<html xmlns="http://www.w3.org/1999/xhtml"><head><title></title><meta charset="UTF-8"><meta name="generator" content="bildumilo 1.0 https://github.com/yoosofan/bildumilo"><link rel="stylesheet" href="css/hovercraft.css" media="all"><link rel="stylesheet" href="css/highlight.css" media="all"><link rel="stylesheet" href="css/style.css" media="all"><script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        showProcessingMessages: false,
        messageStyle: "none",
        TeX : { extensions : ['color.js'] }
      });
    </script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body class="impress-not-supported"><div id="impress" data-width="1024" data-transition-duration="1000"><div class="step step-level-1" step="0" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="0" data-y="0" data-z="0"><h1 id="recursive-descendant-parser">Recursive Descendant Parser</h1><h2 id="syntax-analysis">Syntax Analysis</h2><p>Ahmad Yoosofan</p><p>Compiler course</p><p>University of Kashan</p><p><a href="https://yoosofan.github.io/course/compiler.html">https://yoosofan.github.io/course/compiler.html</a></p></div><div class="step step-level-1" step="1" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="1600" data-y="0" data-z="0"><h1 id="special-state-diagram-for-addition">Special State Diagram for Addition</h1><ol><li>2</li><li>2+3</li><li>86+54+876+432+32</li></ol><h2 id="grammar">Grammar</h2><ol><li class="substep">E &#8594; a</li><li class="substep">E &#8594; a + E</li></ol><ul><li class="substep">E &#8594; a + E | a</li></ul><img src="img/graph_157.png" class="substep"><p class="substep">Which edge must we choose from node 0?</p><p class="substep">Node 1</p><p class="substep">Node 3</p></div><div class="step step-level-1 t2c" step="2" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="3200" data-y="0" data-z="0"><h1 id="left-factoring">Left Factoring</h1><ul><li>E &#8594; a + E</li><li>E &#8594; a</li></ul><img src="img/graph_158.png" class="substep"><ol><li class="substep">E &#8594; a B</li><li class="substep">B &#8594; + E</li><li class="substep">B &#8594; &#955;</li></ol><img src="img/graph_159.png" class="substep"><img src="img/graph_160.png" class="substep"></div><div class="step step-level-1 t2c" step="3" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="4800" data-y="0" data-z="0"><h1 id="parser-code-for-add">Parser Code for Add</h1><div><p>E</p><img src="img/graph_161.png"><p>B</p><img src="img/graph_162.png"></div><pre class="highlight code python substep"><span class="ln"> 1 </span><span class="k">def</span> <span class="nf">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="n">t</span> <span class="o">=</span> <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>  <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'a'</span><span class="p">:</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'a B</span><span class="se">\t</span><span class="s1"> a: '</span><span class="p">,</span>  <span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">','</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\t</span><span class="s1">B: '</span><span class="p">,</span>  <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">end</span><span class="p">:])</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>    <span class="k">return</span> <span class="n">B</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'Synatx Error: number expected'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'Reminder: '</span><span class="p">,</span><span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">begin</span><span class="p">:])</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">10 </span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">def</span> <span class="nf">B</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="n">t</span> <span class="o">=</span> <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>  <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'+'</span><span class="p">:</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'+E,</span><span class="se">\t</span><span class="s1">E:'</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">end</span><span class="p">:]</span> <span class="p">)</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>    <span class="k">return</span> <span class="n">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>  <span class="k">elif</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'EOF'</span><span class="p">:</span> <span class="k">return</span> <span class="kc">True</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'Error a a:'</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">19 </span><span class="w">
</span><span class="ln">20 </span><span class="w"></span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">s</span><span class="p">):</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span>  <span class="n">lex1</span> <span class="o">=</span> <span class="n">lexical_number_plus</span><span class="o">.</span><span class="n">lexical</span><span class="p">(</span><span class="n">s</span><span class="p">);</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">))</span></pre><pre class="highlight code console substep"><span class="go">python3 a.py 12.1  + 35.45 + 2

a B  a:  12.1,  B:  +35.45+2
+E, E: 35.45+2
a B  a:  35.45, B:  +2
+E, E: 2
a B  a:  2.0, B:
True</span></pre><pre class="highlight code console substep"><span class="go">python3 a.py 12.1  + + 2

12.1  + + 2
a B  a:  12.1,  B:  ++2
+E, E: +2
Synatx Error: number expected
Reminder:  +2
False</span></pre></div><div class="step step-level-1 t2c" step="4" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="6400" data-y="0" data-z="0"><h1 id="parse-tree">Parse Tree</h1><div><pre class="highlight code python"><span class="ln"> 1 </span><span class="k">def</span> <span class="nf">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="n">t</span> <span class="o">=</span> <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>  <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'a'</span><span class="p">:</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'a B</span><span class="se">\t</span><span class="s1"> a: '</span><span class="p">,</span>  <span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">','</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\t</span><span class="s1">B: '</span><span class="p">,</span>  <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">end</span><span class="p">:])</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>    <span class="k">return</span> <span class="n">B</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'Synatx Error: number expected'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'Reminder: '</span><span class="p">,</span><span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">begin</span><span class="p">:])</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">10 </span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">def</span> <span class="nf">B</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="n">t</span> <span class="o">=</span> <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>  <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'+'</span><span class="p">:</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'+E,</span><span class="se">\t</span><span class="s1">E:'</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">end</span><span class="p">:]</span> <span class="p">)</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>    <span class="k">return</span> <span class="n">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>  <span class="k">elif</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'EOF'</span><span class="p">:</span> <span class="k">return</span> <span class="kc">True</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'Error a a:'</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">19 </span><span class="w">
</span><span class="ln">20 </span><span class="w"></span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">s</span><span class="p">):</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span>  <span class="n">lex1</span> <span class="o">=</span> <span class="n">lexical_number_plus</span><span class="o">.</span><span class="n">lexical</span><span class="p">(</span><span class="n">s</span><span class="p">);</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">))</span></pre><pre class="highlight code console"><span class="go">python3 a.py 12.1  + 35.45 + 2

a B  a:  12.1,  B:  +35.45+2
+E, E: 35.45+2
a B  a:  35.45, B:  +2
+E, E: 2
a B  a:  2.0, B:
True</span></pre></div><div class="substep"><img src="img/graph_163.png" class="substep"><ol><li class="substep">E[12.1+35.45+2] &#8658;</li><li class="substep">a[12.1] + E[35.45+2] &#8658;</li><li class="substep">a[12.1] + a[35.45] + E[2] &#8658;</li><li class="substep">a[12.1] + a[35.45] + a[2] &#8658;</li><li class="substep">Left Most Derivation</li></ol></div></div><div class="step step-level-1 t2c" step="5" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="8000" data-y="0" data-z="0"><h1 id="doing-addition">Doing Addition</h1><pre class="highlight code python substep"><span class="ln"> 1 </span><span class="k">def</span> <span class="nf">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="n">t</span> <span class="o">=</span> <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>  <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'a'</span><span class="p">:</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'a B</span><span class="se">\t</span><span class="s1"> a: '</span><span class="p">,</span>  <span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">','</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\t</span><span class="s1">B: '</span><span class="p">,</span>  <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">end</span><span class="p">:])</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>    <span class="k">return</span> <span class="n">B</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'Synatx Error: number expected'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'Reminder: '</span><span class="p">,</span><span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">begin</span><span class="p">:])</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">10 </span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">def</span> <span class="nf">B</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="n">t</span> <span class="o">=</span> <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>  <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'+'</span><span class="p">:</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'+E,</span><span class="se">\t</span><span class="s1">E:'</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">end</span><span class="p">:]</span> <span class="p">)</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>    <span class="k">return</span> <span class="n">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>  <span class="k">elif</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'EOF'</span><span class="p">:</span> <span class="k">return</span> <span class="kc">True</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'Error a a:'</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">19 </span><span class="w">
</span><span class="ln">20 </span><span class="w"></span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">s</span><span class="p">):</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span>  <span class="n">lex1</span> <span class="o">=</span> <span class="n">lexical_number_plus</span><span class="o">.</span><span class="n">lexical</span><span class="p">(</span><span class="n">s</span><span class="p">);</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">))</span></pre><pre class="highlight code python substep"><span class="ln"> 1 </span><span class="k">def</span> <span class="nf">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="n">t</span> <span class="o">=</span> <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>  <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'a'</span><span class="p">:</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'a B</span><span class="se">\t</span><span class="s1"> a: '</span><span class="p">,</span>  <span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">','</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\t</span><span class="s1">B: '</span><span class="p">,</span>  <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">end</span><span class="p">:])</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>    <span class="n">res</span> <span class="o">=</span> <span class="n">B</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>    <span class="k">return</span> <span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">t</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'Synatx Error: number expected'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'Reminder: '</span><span class="p">,</span><span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">begin</span><span class="p">:])</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">0</span><span class="w">
</span><span class="ln">11 </span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="k">def</span> <span class="nf">B</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>  <span class="n">t</span> <span class="o">=</span> <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>  <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'+'</span><span class="p">:</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'+E,</span><span class="se">\t</span><span class="s1">E:'</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">end</span><span class="p">:]</span> <span class="p">)</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>    <span class="k">return</span> <span class="n">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>  <span class="k">elif</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'EOF'</span><span class="p">:</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>    <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="mi">0</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'Error a a:'</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">0</span></pre><pre class="highlight code console substep"><span class="go">python3 a.py 12.1  + 35.45 + 2

a B  a:  12.1,  B:  +35.45+2
+E, E: 35.45+2
a B  a:  35.45, B:  +2
+E, E: 2
a B  a:  2.0, B:
</span><span class="gp-VirtualEnv">(True, 49.550000000000004)</span>
</pre><pre class="highlight code console substep"><span class="go">python3 a.py 2 +

a B  a:  2.0, B:  +
+E, E:
Synatx Error: number expected
Reminder:
</span><span class="gp-VirtualEnv">(False, 2.0)</span>
</pre></div><div class="step step-level-1 t2c" step="6" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="9600" data-y="0" data-z="0"><h1 id="simplify-diagram">Simplify Diagram</h1><div><p>E</p><img src="img/graph_164.png"><p>B</p><img src="img/graph_165.png"></div><div class="substep"><p>Combine them</p><img src="img/graph_166.png"><img src="img/graph_167.png" class="substep"></div><p class="substep">E</p><img src="img/graph_168.png" class="substep"></div><div class="step step-level-1 t2c" step="7" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="11200" data-y="0" data-z="0"><h1 id="parser-code-for-add-nonrecursive">Parser Code for add Nonrecursive</h1><div><p>E</p><img src="img/graph_169.png"></div><pre class="highlight code python substep"><span class="ln"> 1 </span><span class="k">def</span> <span class="nf">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="k">while</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>    <span class="n">t</span> <span class="o">=</span> <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>    <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'a'</span><span class="p">:</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span>      <span class="nb">print</span><span class="p">(</span><span class="s1">'a: '</span><span class="p">,</span>  <span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">','</span><span class="p">)</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>      <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\t</span><span class="s1">: '</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">end</span><span class="p">:])</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>    <span class="k">else</span><span class="p">:</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>      <span class="nb">print</span><span class="p">(</span><span class="s1">'Synatx Error: number expected'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>      <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\t</span><span class="s1">'</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">begin</span><span class="p">:])</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>      <span class="k">break</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>    <span class="n">t</span> <span class="o">=</span> <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>    <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s1">'+'</span><span class="p">:</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>      <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s1">'EOF'</span><span class="p">:</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>        <span class="nb">print</span><span class="p">(</span><span class="s1">'End of input expected'</span><span class="p">)</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>      <span class="k">break</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>  <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s1">'EOF'</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">True</span><span class="w">
</span><span class="ln">18 </span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">s</span><span class="p">):</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span>  <span class="n">lex1</span> <span class="o">=</span> <span class="n">lexical_number_plus</span><span class="o">.</span><span class="n">lexical</span><span class="p">(</span><span class="n">s</span><span class="p">);</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">))</span></pre><pre class="highlight code console substep"><span class="go">input: 16+34+0.30
output:
a:  16.0, :  +34+0.30
a:  34.0, :  +0.30
a:  0.3,  :
True</span></pre><pre class="highlight code console substep"><span class="go">input: 23+ + 34
output:
a:  23.0, :  ++34
Synatx Error: number expected
   +34
False</span></pre></div><div class="step step-level-1 t2c" step="8" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="12800" data-y="0" data-z="0"><h1 id="calculator-code-for-add-nonrecursive">Calculator Code for add Nonrecursive</h1><div><p>E</p><img src="img/graph_170.png"></div><pre class="highlight code python substep"><span class="ln"> 1 </span><span class="k">def</span> <span class="nf">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span> <span class="n">state</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">validity</span> <span class="o">=</span> <span class="kc">True</span><span class="p">;</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>  <span class="k">while</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>    <span class="k">if</span> <span class="n">state</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span>      <span class="n">t</span> <span class="o">=</span> <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>      <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'a'</span><span class="p">:</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>        <span class="nb">print</span><span class="p">(</span><span class="s1">'a: '</span><span class="p">,</span>  <span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">','</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>        <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\t</span><span class="s1">: '</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">end</span><span class="p">:])</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>        <span class="n">state</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">x</span> <span class="o">+=</span> <span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">;</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>      <span class="k">else</span><span class="p">:</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>        <span class="nb">print</span><span class="p">(</span><span class="s1">'Synatx Error: number expected'</span><span class="p">)</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>        <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\t</span><span class="s1">'</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">begin</span><span class="p">:]);</span> <span class="n">validity</span> <span class="o">=</span> <span class="kc">False</span><span class="p">;</span> <span class="k">break</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>    <span class="k">elif</span> <span class="n">state</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>      <span class="n">t</span> <span class="o">=</span> <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>      <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'+'</span><span class="p">:</span>  <span class="n">state</span> <span class="o">=</span> <span class="mi">0</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>      <span class="k">elif</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'EOF'</span><span class="p">:</span>  <span class="n">state</span> <span class="o">=</span> <span class="mi">2</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>      <span class="k">else</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">'End of input expected'</span><span class="p">);</span> <span class="n">validity</span> <span class="o">=</span> <span class="kc">False</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>    <span class="k">elif</span> <span class="n">state</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span> <span class="n">validity</span> <span class="o">=</span> <span class="kc">True</span><span class="p">;</span> <span class="k">break</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span>  <span class="k">return</span> <span class="n">validity</span><span class="p">,</span> <span class="n">x</span></pre><pre class="highlight code console substep"><span class="go">input: 16+34+0.30
output:
a:  16.0, :  +34+0.30
a:  34.0, :  +0.30
a:  0.3,  :
</span><span class="gp-VirtualEnv">(True, 50.3)</span>
</pre><pre class="highlight code console substep"><span class="go">input: 23+ + 34
output:

a:  23.0, :  ++34
Synatx Error: number expected
   +34
</span><span class="gp-VirtualEnv">(False, 23.0)</span>
</pre></div><div class="step step-level-1" step="9" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="14400" data-y="0" data-z="0"><h1 id="classes-of-languages">Classes of Languages</h1><img src="img/languages.png" height="400px"><p><a href="https://www.researchgate.net/figure/Human-languages-and-the-classes-of-the-Chomsky-hierarchy-with-parsing-complexity_fig1_257299091">https://www.researchgate.net/figure/Human-languages-and-the-classes-of-the-Chomsky-hierarchy-with-parsing-complexity_fig1_257299091</a></p></div><div class="step step-level-1 t2c" step="10" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="16000" data-y="0" data-z="0"><h1 id="parse-for-no-priority">Parse for + * ( ) no priority</h1><div><p>Consider the follwing sentences of a langauge:</p><p>Write down the Grammar</p><ol><li>3</li><li>9 +3</li><li>9 * 3</li><li>(9 * 3)</li><li>(9 + 3)</li><li>(9 * 4) + 5</li><li>9 * (4 + 5)</li><li>(9 * (4 + 5)) * 3</li><li>9 * ((4 + 5) * 3)</li><li>9 * ((4 + 5) + 3)</li><li>(9 + (4 + 5)) * 3</li></ol><ol><li class="substep">S &#8594; A + A</li><li class="substep">S &#8594; A * A</li><li class="substep">S &#8594; A</li><li class="substep">A &#8594; (S)</li><li class="substep">A &#8594; a</li></ol></div><div><img src="img/graph_171.png" class="substep"><img src="img/graph_172.png" class="substep"></div></div><div class="step step-level-1 t2c" step="11" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="17600" data-y="0" data-z="0"><h1 id="left-factoring-1">Left Factoring</h1><div><ol><li>S &#8594; A + A</li><li>S &#8594; A * A</li><li>S &#8594; A</li><li>A &#8594; (S)</li><li>A &#8594; a</li></ol><ol><li class="substep">S &#8594; A B</li><li class="substep">B &#8594; + A | * A | &#955;</li><li class="substep">A &#8594; ( S ) | a</li></ol></div><div class="substep"><ul><li>S</li></ul><img src="img/graph_173.png" class="substep"><ul><li>B</li></ul><img src="img/graph_174.png" class="substep"></div><div class="substep"><ul><li>A</li></ul><img src="img/graph_175.png" class="substep"></div></div><div class="step step-level-1 t2c" step="12" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="19200" data-y="0" data-z="0"><h1 id="simplify-diagram-1">Simplify Diagram</h1><div><ul><li>S</li></ul><img src="img/graph_176.png"><ul><li>B</li></ul><img src="img/graph_177.png"><ul><li>A</li></ul><img src="img/graph_178.png"></div><div class="substep"><ul><li>Combine S and B</li></ul><img src="img/graph_179.png" class="substep"></div></div><div class="step step-level-1 t2c" step="13" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="20800" data-y="0" data-z="0"><h1 id="remove-some-recursion">Remove Some Recursion</h1><div><ul><li>S</li></ul><img src="img/graph_180.png"></div><img src="img/graph_181.png" class="substep"><div class="substep"><ul><li>A</li></ul><img src="img/graph_182.png" class="substep"></div></div><div class="step step-level-1 t2c" step="14" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="22400" data-y="0" data-z="0"><h1 id="parser-code">Parser Code</h1><div><ul><li>S</li></ul><img src="img/graph_183.png"><ul><li>A</li></ul><img src="img/graph_184.png" width="300"></div><pre class="highlight code python substep"><span class="ln"> 1 </span><span class="k">def</span> <span class="nf">S</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="k">while</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>    <span class="k">if</span> <span class="n">A</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>    <span class="k">if</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s1">'+'</span> <span class="ow">and</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s1">'*'</span><span class="p">:</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span>      <span class="k">break</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="s1">':'</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">end</span><span class="p">:])</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>    <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>  <span class="k">if</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'EOF'</span> <span class="ow">or</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">')'</span><span class="p">:</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>    <span class="k">return</span> <span class="kc">True</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">def</span> <span class="nf">A</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="k">if</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'a'</span><span class="p">:</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'a: '</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">','</span><span class="p">)</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\t</span><span class="s1">: '</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">end</span><span class="p">:])</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>    <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>  <span class="k">elif</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'('</span><span class="p">:</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'(</span><span class="se">\t</span><span class="s1">: '</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">end</span><span class="p">:])</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>    <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span>    <span class="k">if</span> <span class="n">S</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span>    <span class="k">if</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s1">')'</span> <span class="p">:</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span>      <span class="nb">print</span><span class="p">(</span><span class="s1">'Synatx Error: ) expected'</span><span class="p">)</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span>      <span class="nb">print</span><span class="p">(</span><span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="s1">'</span><span class="se">\t</span><span class="s1">'</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">begin</span><span class="p">:])</span><span class="w">
</span><span class="ln">23 </span><span class="w"></span>      <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">24 </span><span class="w"></span>    <span class="k">else</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">')'</span><span class="p">);</span> <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">25 </span><span class="w"></span>  <span class="k">else</span><span class="p">:</span><span class="w">
</span><span class="ln">26 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">' a or ( expected:: '</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span><span class="p">)</span><span class="w">
</span><span class="ln">27 </span><span class="w"></span>    <span class="k">return</span> <span class="kc">False</span><span class="p">;</span><span class="w">
</span><span class="ln">28 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">True</span><span class="w">
</span><span class="ln">29 </span><span class="w"></span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">s</span><span class="p">):</span><span class="w">
</span><span class="ln">30 </span><span class="w"></span>  <span class="n">lex1</span> <span class="o">=</span> <span class="n">lexical_number_plus_mul_par</span><span class="o">.</span><span class="n">lexical</span><span class="p">(</span><span class="n">s</span><span class="p">);</span><span class="w">
</span><span class="ln">31 </span><span class="w"></span>  <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">32 </span><span class="w"></span>  <span class="k">if</span> <span class="n">S</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span></pre></div><div class="step step-level-1 t2c" step="15" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="24000" data-y="0" data-z="0"><h1 id="lexical">Lexical</h1><pre class="highlight code python substep"><span class="ln"> 2 </span><span class="k">class</span> <span class="nc">tokenCls</span><span class="p">:</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">type1</span><span class="o">=</span><span class="s1">'EOF'</span><span class="p">,</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>      <span class="n">v1</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">l1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">e1</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">type1</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">begin</span> <span class="o">=</span> <span class="n">b1</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">e1</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">v1</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span> <span class="o">=</span> <span class="n">l1</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>    <span class="k">return</span> <span class="s1">'[type: '</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span> <span class="o">+</span> \
<span class="ln">12 </span>     <span class="s1">',</span><span class="se">\t</span><span class="s1">value: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">+</span> \
<span class="ln">13 </span>     <span class="s1">'</span><span class="se">\t</span><span class="s1">line: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">)</span> <span class="o">+</span> \
<span class="ln">14 </span>     <span class="s1">'</span><span class="se">\t</span><span class="s1">begin: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">begin</span><span class="p">)</span> <span class="o">+</span> \
<span class="ln">15 </span>     <span class="s1">'</span><span class="se">\t</span><span class="s1">end: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span> <span class="o">+</span> <span class="s1">']'</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span><span class="k">class</span> <span class="nc">lexical</span><span class="p">:</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">begin</span> <span class="o">=</span> <span class="mi">0</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="mi">0</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span> <span class="o">=</span> <span class="mi">0</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">)</span><span class="w">
</span><span class="ln">23 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">ct</span> <span class="o">=</span> <span class="n">tokenCls</span><span class="p">(</span><span class="n">b1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">begin</span><span class="p">,</span><span class="w">
</span><span class="ln">24 </span><span class="w"></span>      <span class="n">e1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span><span class="w">
</span><span class="ln">25 </span><span class="w"></span>  <span class="k">def</span> <span class="nf">getToken</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span><span class="w">
</span><span class="ln">26 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">ct</span> <span class="o">=</span> <span class="n">tokenCls</span><span class="p">(</span><span class="n">b1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">begin</span><span class="p">,</span><span class="w">
</span><span class="ln">27 </span><span class="w"></span>      <span class="n">e1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span><span class="w">
</span><span class="ln">28 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">begin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="w">
</span><span class="ln">29 </span><span class="w"></span>    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">:</span><span class="w">
</span><span class="ln">30 </span><span class="w"></span>      <span class="n">a</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">'[ </span><span class="se">\t</span><span class="s1">]+'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">:])</span><span class="w">
</span><span class="ln">31 </span><span class="w"></span>      <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span><span class="w">
</span><span class="ln">32 </span><span class="w"></span>        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">begin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="n">a</span><span class="o">.</span><span class="n">end</span><span class="p">()</span><span class="w">
</span><span class="ln">33 </span><span class="w"></span>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">:</span></pre><pre class="highlight code python substep"><span class="ln">33 </span>          <span class="k">break</span><span class="w">
</span><span class="ln">34 </span><span class="w">
</span><span class="ln">35 </span><span class="w"></span>      <span class="n">a</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">'\d+(\.\d+)?'</span><span class="p">,</span><span class="w">
</span><span class="ln">36 </span><span class="w"></span>        <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">:])</span><span class="w">
</span><span class="ln">37 </span><span class="w"></span>      <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span><span class="w">
</span><span class="ln">38 </span><span class="w"></span>        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+=</span> <span class="mi">1</span><span class="w">
</span><span class="ln">39 </span><span class="w"></span>        <span class="n">operators1</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'+'</span><span class="p">,</span> <span class="s1">'-'</span><span class="p">,</span> <span class="s1">'*'</span><span class="p">,</span> <span class="s1">'/'</span><span class="p">,</span> <span class="s1">'('</span><span class="p">,</span> <span class="s1">')'</span><span class="p">]</span><span class="w">
</span><span class="ln">40 </span><span class="w"></span>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">begin</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">]</span> <span class="ow">in</span> <span class="n">operators1</span><span class="p">:</span><span class="w">
</span><span class="ln">41 </span><span class="w"></span>          <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">begin</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">]</span><span class="w">
</span><span class="ln">42 </span><span class="w"></span>          <span class="k">break</span><span class="w">
</span><span class="ln">43 </span><span class="w"></span>        <span class="k">else</span><span class="p">:</span><span class="w">
</span><span class="ln">44 </span><span class="w"></span>          <span class="nb">print</span><span class="p">(</span><span class="s1">'Lexical error: '</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">' : '</span><span class="p">)</span><span class="w">
</span><span class="ln">45 </span><span class="w"></span>          <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">begin</span><span class="p">,</span> <span class="s1">':'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">' , '</span><span class="p">)</span><span class="w">
</span><span class="ln">46 </span><span class="w"></span>          <span class="nb">print</span><span class="p">(</span><span class="s1">'Unknown character:'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">begin</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">])</span><span class="w">
</span><span class="ln">47 </span><span class="w"></span>          <span class="bp">self</span><span class="o">.</span><span class="n">begin</span> <span class="o">+=</span> <span class="mi">1</span><span class="w">
</span><span class="ln">48 </span><span class="w"></span>      <span class="k">else</span><span class="p">:</span><span class="w">
</span><span class="ln">49 </span><span class="w"></span>        <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s1">'a'</span><span class="w">
</span><span class="ln">50 </span><span class="w"></span>        <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">group</span><span class="p">())</span><span class="w">
</span><span class="ln">51 </span><span class="w"></span>        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+=</span> <span class="n">a</span><span class="o">.</span><span class="n">end</span><span class="p">()</span><span class="w">
</span><span class="ln">52 </span><span class="w"></span>        <span class="k">break</span><span class="w">
</span><span class="ln">53 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">begin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">begin</span><span class="w">
</span><span class="ln">54 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="w">
</span><span class="ln">55 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">lineno</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="w">
</span><span class="ln">56 </span><span class="w"></span>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="w">
</span><span class="ln">57 </span><span class="w"></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span><span class="w">
</span><span class="ln">58 </span><span class="w"></span>  <span class="c1">#s = input('Enter ') # 12+35+2</span><span class="w">
</span><span class="ln">59 </span><span class="w"></span>  <span class="n">s</span> <span class="o">=</span> <span class="s1">'12+35+2  '</span><span class="w">
</span><span class="ln">60 </span><span class="w"></span>  <span class="n">s</span> <span class="o">=</span> <span class="s1">'  12  +  35 + 2   '</span><span class="w">
</span><span class="ln">61 </span><span class="w"></span>  <span class="n">s</span> <span class="o">=</span> <span class="s1">'  12  +  35 --- 2   '</span><span class="w">
</span><span class="ln">62 </span><span class="w"></span>  <span class="c1"># ~ s = '1.0.'  s = '1.0=23.2+4'</span><span class="w">
</span><span class="ln">63 </span><span class="w"></span>  <span class="n">s</span> <span class="o">=</span> <span class="s1">'12+35+2  '</span><span class="w">
</span><span class="ln">64 </span><span class="w"></span>  <span class="n">lex1</span> <span class="o">=</span> <span class="n">lexical</span><span class="p">(</span><span class="n">s</span><span class="p">);</span></pre></div><div class="step step-level-1 t2c" step="16" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="25600" data-y="0" data-z="0"><h1 id="a-simple-calculator">A Simple Calculator (, ), <tt>+</tt>, <tt>*</tt></h1><div class="substep"><ol><li>34</li><li>34 + 2</li><li>34 + 45+98</li><li>34 + 45+98 * 4 * 554</li><li>(34 * 2) + 3</li><li>43 * (54+3)</li><li>2 + (34)</li><li>(34+3) * 2</li><li>(34+3) * 2</li></ol><p class="substep">Grammar 1</p><ol><li class="substep">S -&gt; S + S</li><li class="substep">S -&gt; S * S</li><li class="substep">S -&gt; a</li><li class="substep">S -&gt; (S)</li></ol><p class="substep">Wrong Grammar (Why?)</p></div><div class="substep"><p class="substep">Grammar 2</p><ol><li class="substep">E -&gt; T + E | T</li><li class="substep">T -&gt; F * T | F</li><li class="substep">F -&gt; (E) | a</li></ol><p class="substep">Grammar 3</p><ul><li class="substep">E -&gt; E + T | T</li><li class="substep">T -&gt; T * F | F</li><li class="substep">F -&gt; (E) | a</li></ul><p class="substep"><strong>Left Recursion</strong></p><ol><li class="substep">E -&gt; T L</li><li class="substep">L -&gt; + E | &#955;</li><li class="substep">T -&gt; F M</li><li class="substep">M -&gt; * T | &#955;</li><li class="substep">F -&gt; (E) | a</li></ol></div></div><div class="step step-level-1 t2c" step="17" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="27200" data-y="0" data-z="0"><h1 id="state-diagram-ii">State Diagram(II)</h1><div class="substep"><p>E -&gt; T L</p><img src="img/graph_185.png" class="substep"></div><div class="substep"><p>L -&gt; + E | &#955;</p><img src="img/graph_186.png" class="substep"></div><div class="substep"><p>T -&gt; F M</p><img src="img/graph_187.png" class="substep"></div><div class="substep"><p>M -&gt; * T | &#955;</p><img src="img/graph_188.png" class="substep"></div><div class="substep"><p>F -&gt; (E) | a</p><img src="img/graph_189.png" class="substep"></div><ol><li>E -&gt; T L</li><li>L -&gt; + E | &#955;</li><li>T -&gt; F M</li><li>M -&gt; * T | &#955;</li><li>F -&gt; (E) | a</li></ol></div><div class="step step-level-1 t2c" step="18" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="28800" data-y="0" data-z="0"><h1 id="simplify-diagram-ii-combine-e-l">Simplify Diagram(II) - Combine E, L</h1><div><p>E -&gt; T L</p><img src="img/graph_190.png"></div><div><p>L -&gt; + E | &#955;</p><img src="img/graph_191.png"></div><img src="img/graph_192.png" class="substep"><img src="img/graph_193.png" class="substep"><img src="img/graph_194.png" class="substep"></div><div class="step step-level-1 t2c" step="19" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="30400" data-y="0" data-z="0"><h1 id="simplify-diagram-iii-combine-t-m">Simplify Diagram(III) - Combine T, M</h1><div><p>T -&gt; F M</p><img src="img/graph_195.png"></div><div><p>M -&gt; * T | &#955;</p><img src="img/graph_196.png"></div><img src="img/graph_197.png" class="substep"><img src="img/graph_198.png" class="substep"><img src="img/graph_199.png" class="substep"></div><div class="step step-level-1 t2c" step="20" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="32000" data-y="0" data-z="0"><h1 id="diagrams-of-the-second-calculator">Diagrams of the Second Calculator</h1><div><p>E</p><img src="img/graph_200.png"><p>T</p><img src="img/graph_201.png"><p>F</p><img src="img/graph_202.png"></div><div class="substep"><p><em>Can E and T be combined?</em></p><p>E</p><img src="img/graph_203.png" class="substep"><ol><li class="substep">4 + 3 * 2</li><li class="substep">( 4 + 3 ) * 2</li><li class="substep">4 + ( 3 * 2 )</li><li class="substep">3 * 2 + 4</li><li class="substep">3 * ( 2 + 4 )</li><li class="substep">( 3 * 2 ) + 4</li></ol></div></div><div class="step step-level-1 t2c" step="21" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="33600" data-y="0" data-z="0"><h1 id="state-diagram">State Diagram</h1><div><ul><li>E -&gt; T + E | T</li></ul><img src="img/graph_204.png"></div><div><ul><li>T -&gt; F * T | F</li></ul><img src="img/graph_205.png"></div><div><ul><li>F -&gt; (E) | a</li></ul><img src="img/graph_206.png"></div></div><div class="step step-level-1 t2c" step="22" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="35200" data-y="0" data-z="0"><h1 id="simplify-diagram-iv-fewer-steps">Simplify Diagram(IV) - Fewer steps</h1><img src="img/graph_207.png" class="substep"><img src="img/graph_208.png" class="substep"><img src="img/graph_209.png" class="substep"><img src="img/graph_210.png" class="substep"><img src="img/graph_211.png" class="substep"></div><div class="step step-level-1 t2c" step="23" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="36800" data-y="0" data-z="0"><h1 id="parser-code-for-add-and-multiply">Parser Code for Add and Multiply</h1><div><p>E</p><img src="img/graph_212.png"><p>T</p><img src="img/graph_213.png"><p>F</p><img src="img/graph_214.png" width="300"></div><pre class="highlight code python substep"><span class="ln"> 1 </span><span class="k">def</span> <span class="nf">S</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>  <span class="k">if</span> <span class="n">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>    <span class="k">if</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'EOF'</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span>    <span class="k">else</span><span class="p">:</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>      <span class="nb">print</span><span class="p">(</span><span class="s1">'Syntax Error: extra characters at END: '</span><span class="p">)</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>      <span class="nb">print</span><span class="p">(</span><span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">begin</span><span class="p">:])</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>  <span class="k">else</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">'Syntax Error at'</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">begin</span><span class="p">:])</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">def</span> <span class="nf">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="k">while</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>    <span class="k">if</span> <span class="n">T</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>    <span class="k">if</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s1">'+'</span><span class="p">:</span> <span class="k">break</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>    <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">True</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="k">def</span> <span class="nf">T</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>  <span class="k">while</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>    <span class="k">if</span> <span class="n">F</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>    <span class="k">if</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s1">'*'</span><span class="p">:</span> <span class="k">break</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span>    <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">True</span><span class="p">;</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span><span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span>  <span class="k">if</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'a'</span><span class="p">:</span><span class="w">
</span><span class="ln">23 </span><span class="w"></span>    <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">24 </span><span class="w"></span>  <span class="k">elif</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'('</span><span class="p">:</span><span class="w">
</span><span class="ln">25 </span><span class="w"></span>    <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">26 </span><span class="w"></span>    <span class="k">if</span> <span class="n">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">27 </span><span class="w"></span>    <span class="k">if</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s1">')'</span> <span class="p">:</span> <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">28 </span><span class="w"></span>    <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">29 </span><span class="w"></span>  <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">30 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">True</span><span class="w">
</span><span class="ln">31 </span><span class="w"></span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">s</span><span class="p">):</span><span class="w">
</span><span class="ln">32 </span><span class="w"></span>  <span class="n">lex1</span> <span class="o">=</span> <span class="n">lexical_number_plus_mul_par</span><span class="o">.</span><span class="n">lexical</span><span class="p">(</span><span class="n">s</span><span class="p">);</span><span class="w">
</span><span class="ln">33 </span><span class="w"></span>  <span class="n">S</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span></pre></div><div class="step step-level-1 t2c" step="24" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="38400" data-y="0" data-z="0"><h1 id="another-language-for-simple-expression">Another Language for simple expression  + - * / ( )</h1><div><ol><li>2 + 3 * 4 - 5</li><li>4 - 5 * 2 / ( 4 - 2 ) + 1</li><li>( ( 2 * ( 3 - 1) ) / (5 - 3) ) * ( 7 - 8 )</li></ol><p>Grammar ?</p><ol><li class="substep">E &#8594; T + E | T - E | T</li><li class="substep">T &#8594; F * T | F / T | F</li><li class="substep">F &#8594; (E) | a</li></ol><p class="substep">Is there any problem?</p><ol><li class="substep">4 - 3 - 2</li><li class="substep">16 / 4 / 2</li></ol><p class="substep">It was a wrong grammar</p></div><div class="substep"><ol><li class="substep">E &#8594; E + T | E - T | T</li><li class="substep">T &#8594; T * F | T / F | F</li><li class="substep">F &#8594; (E) | a</li></ol><p class="substep">Left Most Derivation</p><ol><li class="substep">E &#8658; E + T &#8658;</li><li class="substep">T + T &#8658;</li><li class="substep">F + T &#8658;</li><li class="substep">16 + T &#8658; 16 + T * F &#8658;</li><li class="substep">16 + F * F &#8658;</li><li class="substep">16 + 3 * F &#8658;</li><li class="substep">16 + 3 * 4</li></ol></div></div><div class="step step-level-1" step="25" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="40000" data-y="0" data-z="0"><h1 id="left-recursion-elimination">Left Recursion Elimination</h1><h2 id="a-a">A &#8594; A &#945; | &#946;</h2><table cellpadding="0" cellspacing="0"><tbody><tr><td><img src="img/with_left_recursion.png" height="350px" class="substep" align="center"></td><td><img src="img/without_left_recursion.png" height="350px" class="substep" align="center"></td></tr></tbody></table><ul><li class="substep">A  &#8594; &#946; A'</li><li class="substep">A' &#8594; &#945; A' | &#955;</li></ul></div><div class="step step-level-1" step="26" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="41600" data-y="0" data-z="0"><h1 id="general-form-of-direct-left-recursion-elimination">General Form of Direct Left Recursion Elimination</h1><h2 id="a-a-1-a-2-a-m-1-2-n">A &#8594; A <span class="math ">\(&#945;_1\)</span> | A <span class="math ">\(&#945;_2\)</span> | <span class="math ">\(...\)</span> | A <span class="math ">\(&#945;_m\)</span> |  <span class="math ">\(&#946;_1\)</span> |  <span class="math ">\(&#946;_2\)</span> | <span class="math ">\(...\)</span> |  <span class="math ">\(&#946;_n\)</span></h2><p class="substep">Convert to</p><ul><li class="substep">A  &#8594; <span class="math ">\(&#946;_1\)</span> A' |  <span class="math ">\(&#946;_2\)</span> A' | <span class="math ">\(...\)</span>  |  <span class="math ">\(&#946;_n\)</span> A'</li><li class="substep">A' &#8594; <span class="math ">\(&#945;_1\)</span> A' | <span class="math ">\(&#945;_2\)</span> A' | <span class="math ">\(...\)</span>  |  <span class="math ">\(&#945;_m\)</span> A' | &#955;</li></ul></div><div class="step step-level-1 t2c" step="27" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="43200" data-y="0" data-z="0"><h1 id="calculator-grammar">Calculator Grammar</h1><div><div class="math-block ">$$\begin{align}A &#8594; A &#945;_1 | A &#945;_2 | \dots | A &#945;_m | &#946;_1 |  &#946;_2 | \dots |  &#946;_n\end{align}$$</div><p>Convert to</p><ul><li>A  &#8594; <span class="math ">\(&#946;_1\)</span> A' |  <span class="math ">\(&#946;_2\)</span> A' | <span class="math ">\(...\)</span>  |  <span class="math ">\(&#946;_n\)</span> A'</li><li>A' &#8594; <span class="math ">\(&#945;_1\)</span> A' | <span class="math ">\(&#945;_2\)</span> A' | <span class="math ">\(...\)</span>  |  <span class="math ">\(&#945;_m\)</span> A' | &#955;</li></ul><ul><li class="substep">E &#8594; E + T | E - T | T</li><li class="substep">T &#8594; T * F | T / F | F</li><li class="substep">F &#8594; a | (E)</li></ul><p class="substep">Convert to</p><ul><li class="substep">E  &#8594; T E'</li><li class="substep">E' &#8594; + T E' | - T E' | &#955;</li><li class="substep">T  &#8594; F T'</li><li class="substep">T  &#8594; * F T' | / F T' | &#955;</li><li class="substep">F &#8594; a | (E)</li></ul></div><div class="substep"><img src="img/graph_215.png" class="substep"><img src="img/graph_216.png" class="substep"><img src="img/graph_217.png" class="substep"><img src="img/graph_218.png" class="substep"><img src="img/graph_219.png" class="substep"></div></div><div class="step step-level-1 t2c" step="28" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="44800" data-y="0" data-z="0"><h1 id="simplify-diagram-v-combine-e-and-e">Simplify Diagram(V) - Combine E and E'</h1><div><p>E</p><img src="img/graph_220.png"><p>E'</p><img src="img/graph_221.png"></div><div><img src="img/graph_222.png" class="substep"><img src="img/graph_223.png" class="substep"><img src="img/graph_224.png" class="substep"></div></div><div class="step step-level-1 t2c" step="29" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="46400" data-y="0" data-z="0"><h1 id="simplify-diagram-vi-combining-t-and-t">Simplify Diagram(VI) - Combining T and T'</h1><div><p>T</p><img src="img/graph_225.png"><p>T'</p><img src="img/graph_226.png"></div><div><img src="img/graph_227.png" class="substep"><img src="img/graph_228.png" class="substep"><img src="img/graph_229.png" class="substep"></div></div><div class="step step-level-1 t2c" step="30" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="48000" data-y="0" data-z="0"><h1 id="parser-code-for-last-calculator">Parser Code for Last Calculator</h1><div><p>E</p><img src="img/graph_230.png"><p>T</p><img src="img/graph_231.png"><p>F</p><img src="img/graph_232.png"></div><pre class="highlight code python substep"><span class="ln"> 1 </span><span class="k">def</span> <span class="nf">S</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>  <span class="k">if</span> <span class="n">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>    <span class="k">if</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'EOF'</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span>    <span class="k">else</span><span class="p">:</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>      <span class="nb">print</span><span class="p">(</span><span class="s1">'Syntax Error: extra characters at END: '</span><span class="p">)</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>      <span class="nb">print</span><span class="p">(</span><span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">begin</span><span class="p">:])</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>  <span class="k">else</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">'Syntax Error at'</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">begin</span><span class="p">:])</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">def</span> <span class="nf">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="k">while</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>    <span class="k">if</span> <span class="n">T</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>    <span class="k">if</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'+'</span><span class="p">,</span> <span class="s1">'-'</span><span class="p">]:</span> <span class="k">break</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>    <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">True</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="k">def</span> <span class="nf">T</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>  <span class="k">while</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>    <span class="k">if</span> <span class="n">F</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>    <span class="k">if</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'*'</span><span class="p">,</span> <span class="s1">'/'</span><span class="p">]:</span> <span class="k">break</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span>    <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">True</span><span class="p">;</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span><span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span>  <span class="k">if</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'a'</span><span class="p">:</span><span class="w">
</span><span class="ln">23 </span><span class="w"></span>    <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">24 </span><span class="w"></span>  <span class="k">elif</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'('</span><span class="p">:</span><span class="w">
</span><span class="ln">25 </span><span class="w"></span>    <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">26 </span><span class="w"></span>    <span class="k">if</span> <span class="n">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">27 </span><span class="w"></span>    <span class="k">if</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s1">')'</span> <span class="p">:</span> <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">28 </span><span class="w"></span>    <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">29 </span><span class="w"></span>  <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">30 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">True</span><span class="w">
</span><span class="ln">31 </span><span class="w"></span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">s</span><span class="p">):</span><span class="w">
</span><span class="ln">32 </span><span class="w"></span>  <span class="n">lex1</span> <span class="o">=</span> <span class="n">lexical_number_plus_mul_par</span><span class="o">.</span><span class="n">lexical</span><span class="p">(</span><span class="n">s</span><span class="p">);</span><span class="w">
</span><span class="ln">33 </span><span class="w"></span>  <span class="n">S</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span></pre></div><div class="step step-level-1 t2c" step="31" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="49600" data-y="0" data-z="0"><h1 id="parser-tree">Parser Tree</h1><pre class="highlight code python"><span class="ln"> 9 </span><span class="k">def</span> <span class="nf">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="k">while</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'E: '</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">begin</span><span class="p">:])</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>    <span class="k">if</span> <span class="n">T</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>    <span class="k">if</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'+'</span><span class="p">,</span> <span class="s1">'-'</span><span class="p">]:</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>      <span class="k">break</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'Op: '</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">begin</span><span class="p">:])</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>    <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">True</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span><span class="k">def</span> <span class="nf">T</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span>  <span class="k">while</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'T: '</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">begin</span><span class="p">:])</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span>    <span class="k">if</span> <span class="n">F</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span>    <span class="k">if</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'*'</span><span class="p">,</span> <span class="s1">'/'</span><span class="p">]:</span><span class="w">
</span><span class="ln">23 </span><span class="w"></span>      <span class="k">break</span><span class="w">
</span><span class="ln">24 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'Op: '</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">begin</span><span class="p">:])</span><span class="w">
</span><span class="ln">25 </span><span class="w"></span>    <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">26 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">True</span><span class="p">;</span><span class="w">
</span><span class="ln">27 </span><span class="w"></span><span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">lex1</span><span class="p">):</span><span class="w">
</span><span class="ln">28 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'F: '</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">lex1</span><span class="o">.</span><span class="n">begin</span><span class="p">:])</span><span class="w">
</span><span class="ln">29 </span><span class="w"></span>  <span class="k">if</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'a'</span><span class="p">:</span><span class="w">
</span><span class="ln">30 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'Number: '</span><span class="p">,</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="w">
</span><span class="ln">31 </span><span class="w"></span>    <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">32 </span><span class="w"></span>  <span class="k">elif</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">'('</span><span class="p">:</span><span class="w">
</span><span class="ln">33 </span><span class="w"></span>    <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">34 </span><span class="w"></span>    <span class="k">if</span> <span class="n">E</span><span class="p">(</span><span class="n">lex1</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">35 </span><span class="w"></span>    <span class="k">if</span> <span class="n">lex1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s1">')'</span> <span class="p">:</span><span class="w">
</span><span class="ln">36 </span><span class="w"></span>      <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">37 </span><span class="w"></span>    <span class="n">lex1</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">38 </span><span class="w"></span>  <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span><span class="w">
</span><span class="ln">39 </span><span class="w"></span>  <span class="k">return</span> <span class="kc">True</span></pre><pre class="highlight code console"><span class="ln"> 1 </span><span class="go">python3 t.py '1+4*(3-1)'
</span><span class="ln"> 2 </span><span class="go">E:  1+4*(3-1)
</span><span class="ln"> 3 </span><span class="go">T:  1+4*(3-1)
</span><span class="ln"> 4 </span><span class="go">F:  1+4*(3-1)
</span><span class="ln"> 5 </span><span class="go">Number:  1.0
</span><span class="ln"> 6 </span><span class="go">Op:  +4*(3-1)
</span><span class="ln"> 7 </span><span class="go">T:  4*(3-1)
</span><span class="ln"> 8 </span><span class="go">F:  4*(3-1)
</span><span class="ln"> 9 </span><span class="go">Number:  4.0
</span><span class="ln">10 </span><span class="go">Op:  *(3-1)
</span><span class="ln">11 </span><span class="go">F:  (3-1)
</span><span class="ln">12 </span><span class="go">E:  3-1)
</span><span class="ln">13 </span><span class="go">T:  3-1)
</span><span class="ln">14 </span><span class="go">F:  3-1)
</span><span class="ln">15 </span><span class="go">Number:  3.0
</span><span class="ln">16 </span><span class="go">Op:  -1)
</span><span class="ln">17 </span><span class="go">T:  1)
</span><span class="ln">18 </span><span class="go">F:  1)
</span><span class="ln">19 </span><span class="go">Number:  1.0
</span><span class="ln">20 </span><span class="go">True</span></pre></div><div class="step step-level-1" step="32" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="51200" data-y="0" data-z="0"><img src="img/graph_233.png" height="500"><ol><li>E &#8594; E + T | E - T | T  ,  2.  T &#8594; T * F | T / F | F , 3. F &#8594; (E) | a</li></ol></div><div class="step step-level-1 grid-2col-class" step="33" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="52800" data-y="0" data-z="0"><img src="img/graph_234.png" height="500"><pre class="highlight code console"><span class="ln"> 1 </span><span class="go">python3 t.py '1+4*(3-1)'
</span><span class="ln"> 2 </span><span class="go">E:  1+4*(3-1)
</span><span class="ln"> 3 </span><span class="go">T:  1+4*(3-1)
</span><span class="ln"> 4 </span><span class="go">F:  1+4*(3-1)
</span><span class="ln"> 5 </span><span class="go">Number:  1.0
</span><span class="ln"> 6 </span><span class="go">Op:  +4*(3-1)
</span><span class="ln"> 7 </span><span class="go">T:  4*(3-1)
</span><span class="ln"> 8 </span><span class="go">F:  4*(3-1)
</span><span class="ln"> 9 </span><span class="go">Number:  4.0
</span><span class="ln">10 </span><span class="go">Op:  *(3-1)
</span><span class="ln">11 </span><span class="go">F:  (3-1)
</span><span class="ln">12 </span><span class="go">E:  3-1)
</span><span class="ln">13 </span><span class="go">T:  3-1)
</span><span class="ln">14 </span><span class="go">F:  3-1)
</span><span class="ln">15 </span><span class="go">Number:  3.0
</span><span class="ln">16 </span><span class="go">Op:  -1)
</span><span class="ln">17 </span><span class="go">T:  1)
</span><span class="ln">18 </span><span class="go">F:  1)
</span><span class="ln">19 </span><span class="go">Number:  1.0
</span><span class="ln">20 </span><span class="go">True</span></pre></div><div class="step step-level-1 t2c" step="34" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="54400" data-y="0" data-z="0"><h1 id="calculator">Calculator</h1><pre class="highlight code python"><span class="ln"> 2 </span><span class="k">def</span> <span class="nf">E</span><span class="p">(</span><span class="n">s1</span><span class="p">):</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>  <span class="p">[</span><span class="n">s1</span><span class="p">,</span> <span class="n">x</span><span class="p">]</span><span class="o">=</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>  <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> \
<span class="ln"> 5 </span>      <span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'+'</span> <span class="ow">or</span> <span class="n">s1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'-'</span><span class="p">):</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>    <span class="k">if</span> <span class="n">s1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s1">'+'</span><span class="p">:</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>      <span class="n">flag</span> <span class="o">=</span> <span class="kc">True</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>    <span class="k">else</span><span class="p">:</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>      <span class="n">flag</span> <span class="o">=</span> <span class="kc">False</span><span class="p">;</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>    <span class="p">[</span><span class="n">s1</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>    <span class="k">if</span> <span class="n">flag</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>      <span class="n">x</span> <span class="o">+=</span> <span class="n">y</span><span class="p">;</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>    <span class="k">else</span><span class="p">:</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>      <span class="n">x</span> <span class="o">-=</span> <span class="n">y</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>  <span class="k">return</span> <span class="p">[</span><span class="n">s1</span><span class="p">,</span> <span class="n">x</span><span class="p">]</span><span class="w">
</span><span class="ln">16 </span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="k">def</span> <span class="nf">T</span><span class="p">(</span><span class="n">s1</span><span class="p">):</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>  <span class="p">[</span><span class="n">s1</span><span class="p">,</span> <span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span>  <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> \
<span class="ln">20 </span>      <span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'*'</span> <span class="ow">or</span> <span class="n">s1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'/'</span><span class="p">):</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span>    <span class="k">if</span> <span class="n">s1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'*'</span><span class="p">:</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span>      <span class="n">flag</span> <span class="o">=</span> <span class="kc">True</span><span class="p">;</span><span class="w">
</span><span class="ln">23 </span><span class="w"></span>    <span class="k">else</span><span class="p">:</span><span class="w">
</span><span class="ln">24 </span><span class="w"></span>      <span class="n">flag</span> <span class="o">=</span> <span class="kc">False</span><span class="p">;</span><span class="w">
</span><span class="ln">25 </span><span class="w"></span>    <span class="p">[</span><span class="n">s1</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span><span class="w">
</span><span class="ln">26 </span><span class="w"></span>    <span class="k">if</span> <span class="n">flag</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln">27 </span><span class="w"></span>      <span class="n">x</span> <span class="o">*=</span> <span class="n">y</span><span class="p">;</span><span class="w">
</span><span class="ln">28 </span><span class="w"></span>    <span class="k">else</span><span class="p">:</span><span class="w">
</span><span class="ln">29 </span><span class="w"></span>      <span class="n">x</span> <span class="o">/=</span> <span class="n">y</span><span class="w">
</span><span class="ln">30 </span><span class="w"></span>  <span class="k">return</span> <span class="p">[</span><span class="n">s1</span><span class="p">,</span> <span class="n">x</span><span class="p">]</span></pre><pre class="highlight code python"><span class="ln">31 </span><span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">s1</span><span class="p">):</span><span class="w">
</span><span class="ln">32 </span><span class="w"></span>  <span class="k">if</span> <span class="n">s1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'('</span><span class="p">:</span><span class="w">
</span><span class="ln">33 </span><span class="w"></span>    <span class="n">s1</span> <span class="o">=</span> <span class="n">s1</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="w">
</span><span class="ln">34 </span><span class="w"></span>    <span class="p">[</span><span class="n">s1</span><span class="p">,</span> <span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">E</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="w">
</span><span class="ln">35 </span><span class="w"></span>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">s1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">')'</span><span class="p">:</span><span class="w">
</span><span class="ln">36 </span><span class="w"></span>      <span class="nb">print</span><span class="p">(</span><span class="s1">'Error: ) missing'</span><span class="p">)</span><span class="w">
</span><span class="ln">37 </span><span class="w"></span>      <span class="k">raise</span><span class="w">
</span><span class="ln">38 </span><span class="w"></span>    <span class="n">s1</span> <span class="o">=</span> <span class="n">s1</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="w">
</span><span class="ln">39 </span><span class="w"></span>    <span class="k">return</span> <span class="p">[</span><span class="n">s1</span><span class="p">,</span> <span class="n">x</span><span class="p">]</span><span class="w">
</span><span class="ln">40 </span><span class="w"></span>  <span class="k">else</span><span class="p">:</span><span class="w">
</span><span class="ln">41 </span><span class="w"></span>    <span class="n">a</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">'[0-9]+(\.[0-9]+)?'</span><span class="p">,</span> <span class="n">s1</span><span class="p">)</span><span class="w">
</span><span class="ln">42 </span><span class="w"></span>    <span class="n">s1</span> <span class="o">=</span> <span class="n">s1</span><span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">end</span><span class="p">():]</span><span class="w">
</span><span class="ln">43 </span><span class="w"></span>    <span class="k">return</span> <span class="p">[</span><span class="n">s1</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">group</span><span class="p">())]</span><span class="w">
</span><span class="ln">44 </span><span class="w">
</span><span class="ln">45 </span><span class="w"></span><span class="n">st</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">'Enter &gt;&gt; '</span><span class="p">)</span> <span class="c1">#st='12+35-2'</span><span class="w">
</span><span class="ln">46 </span><span class="w"></span><span class="k">while</span> <span class="n">st</span> <span class="o">!=</span> <span class="s2">""</span><span class="p">:</span><span class="w">
</span><span class="ln">47 </span><span class="w"></span>  <span class="k">try</span><span class="p">:</span><span class="w">
</span><span class="ln">48 </span><span class="w"></span>    <span class="p">[</span><span class="n">s1</span><span class="p">,</span> <span class="n">val</span><span class="p">]</span> <span class="o">=</span> <span class="n">E</span><span class="p">(</span><span class="n">st</span><span class="p">)</span><span class="w">
</span><span class="ln">49 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="w">
</span><span class="ln">50 </span><span class="w"></span>  <span class="k">except</span><span class="p">:</span><span class="w">
</span><span class="ln">51 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'Error'</span><span class="p">)</span><span class="w">
</span><span class="ln">52 </span><span class="w"></span>  <span class="n">st</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">'Enter &gt;&gt; '</span><span class="p">)</span> <span class="c1">#st='12+35-2'</span></pre></div><div class="step step-level-1 t2c" step="35" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="56000" data-y="0" data-z="0"><h1 id="calculator-iv-lexical">Calculator(IV)(lexical)</h1><pre class="highlight code python"><span class="ln"> 0 </span><span class="kn">import</span> <span class="nn">re</span><span class="w">
</span><span class="ln"> 1 </span><span class="w"></span><span class="k">class</span> <span class="nc">error</span><span class="p">(</span><span class="ne">BaseException</span><span class="p">):</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">):</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>      <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">;</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="k">class</span> <span class="nc">Lexical</span><span class="p">:</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="s1">'4+5'</span><span class="p">):</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">ct</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'$'</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="c1"># current token</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">pi</span> <span class="o">=</span> <span class="mi">0</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">);</span><span class="w">
</span><span class="ln">12 </span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>  <span class="k">def</span> <span class="nf">getToken</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>    <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">pi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">;</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">:</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>      <span class="n">res</span><span class="o">=</span><span class="p">[</span><span class="s1">'$'</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'*'</span><span class="p">:</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span>      <span class="n">res</span><span class="o">=</span><span class="p">[</span><span class="s1">'*'</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'/'</span><span class="p">:</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span>      <span class="n">res</span><span class="o">=</span><span class="p">[</span><span class="s1">'/'</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'+'</span><span class="p">:</span><span class="w">
</span><span class="ln">23 </span><span class="w"></span>      <span class="n">res</span><span class="o">=</span><span class="p">[</span><span class="s1">'+'</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="w">
</span><span class="ln">24 </span><span class="w"></span>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'-'</span><span class="p">:</span></pre><pre class="highlight code python"><span class="ln">25 </span>      <span class="n">res</span><span class="o">=</span><span class="p">[</span><span class="s1">'-'</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="w">
</span><span class="ln">26 </span><span class="w"></span>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'('</span><span class="p">:</span><span class="w">
</span><span class="ln">27 </span><span class="w"></span>      <span class="n">res</span><span class="o">=</span><span class="p">[</span><span class="s1">'('</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="w">
</span><span class="ln">28 </span><span class="w"></span>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">')'</span><span class="p">:</span><span class="w">
</span><span class="ln">29 </span><span class="w"></span>      <span class="n">res</span><span class="o">=</span><span class="p">[</span><span class="s1">')'</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="w">
</span><span class="ln">30 </span><span class="w"></span>    <span class="k">elif</span> <span class="s1">'0'</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="s1">'9'</span><span class="p">:</span><span class="w">
</span><span class="ln">31 </span><span class="w"></span>        <span class="n">a</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">'[0-9]+(\.[0-9]+)?'</span><span class="p">,</span><span class="w">
</span><span class="ln">32 </span><span class="w"></span>          <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">:])</span><span class="w">
</span><span class="ln">33 </span><span class="w"></span>        <span class="n">res</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'n'</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">group</span><span class="p">())]</span><span class="w">
</span><span class="ln">34 </span><span class="w"></span>        <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">+=</span> <span class="n">a</span><span class="o">.</span><span class="n">end</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span><span class="w">
</span><span class="ln">35 </span><span class="w"></span>    <span class="k">else</span><span class="p">:</span> <span class="k">raise</span> <span class="n">error</span><span class="p">(</span><span class="s1">'lexical error '</span><span class="p">)</span><span class="w">
</span><span class="ln">36 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span><span class="w">
</span><span class="ln">37 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">ct</span> <span class="o">=</span> <span class="n">res</span> <span class="c1"># print(self.ct)</span><span class="w">
</span><span class="ln">38 </span><span class="w"></span>    <span class="k">return</span> <span class="n">res</span><span class="w">
</span><span class="ln">39 </span><span class="w">
</span><span class="ln">40 </span><span class="w"></span>  <span class="k">def</span> <span class="nf">unget</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span><span class="w">
</span><span class="ln">41 </span><span class="w"></span>    <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pi</span><span class="p">;</span><span class="w">
</span><span class="ln">42 </span><span class="w">
</span><span class="ln">43 </span><span class="w"></span><span class="k">def</span> <span class="nf">E</span><span class="p">(</span><span class="n">lex</span><span class="p">):</span><span class="w">
</span><span class="ln">44 </span><span class="w"></span>  <span class="n">x</span> <span class="o">=</span> <span class="n">T</span><span class="p">(</span><span class="n">lex</span><span class="p">);</span><span class="w">
</span><span class="ln">45 </span><span class="w"></span>  <span class="k">while</span> <span class="n">lex</span><span class="o">.</span><span class="n">ct</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'+'</span><span class="p">,</span> <span class="s1">'-'</span><span class="p">]:</span><span class="w">
</span><span class="ln">46 </span><span class="w"></span>    <span class="n">p</span> <span class="o">=</span> <span class="n">lex</span><span class="o">.</span><span class="n">ct</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></pre></div><div class="step step-level-1 t2c" step="36" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="57600" data-y="0" data-z="0"><h1 id="calculator-v">Calculator(V)</h1><pre class="highlight code python"><span class="ln">47 </span>    <span class="n">lex</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">48 </span><span class="w"></span>    <span class="n">y</span> <span class="o">=</span> <span class="n">T</span><span class="p">(</span><span class="n">lex</span><span class="p">);</span><span class="w">
</span><span class="ln">49 </span><span class="w"></span>    <span class="k">if</span> <span class="n">p</span> <span class="o">==</span> <span class="s1">'+'</span><span class="p">:</span> <span class="n">x</span> <span class="o">+=</span> <span class="n">y</span><span class="w">
</span><span class="ln">50 </span><span class="w"></span>    <span class="k">else</span><span class="p">:</span> <span class="n">x</span> <span class="o">-=</span> <span class="n">y</span><span class="p">;</span><span class="w">
</span><span class="ln">51 </span><span class="w"></span><span class="k">return</span> <span class="n">x</span><span class="p">;</span><span class="w">
</span><span class="ln">52 </span><span class="w">
</span><span class="ln">53 </span><span class="w"></span><span class="k">def</span> <span class="nf">T</span><span class="p">(</span><span class="n">lex</span><span class="p">):</span><span class="w">
</span><span class="ln">54 </span><span class="w"></span>  <span class="n">x</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="n">lex</span><span class="p">);</span><span class="w">
</span><span class="ln">55 </span><span class="w"></span>  <span class="k">while</span> <span class="n">lex</span><span class="o">.</span><span class="n">ct</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'*'</span><span class="p">,</span> <span class="s1">'/'</span><span class="p">]:</span><span class="w">
</span><span class="ln">56 </span><span class="w"></span>    <span class="n">p</span><span class="o">=</span><span class="n">lex</span><span class="o">.</span><span class="n">ct</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w">
</span><span class="ln">57 </span><span class="w"></span>    <span class="n">lex</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">58 </span><span class="w"></span>    <span class="n">y</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="n">lex</span><span class="p">);</span><span class="w">
</span><span class="ln">59 </span><span class="w"></span>    <span class="k">if</span> <span class="n">p</span> <span class="o">==</span> <span class="s1">'*'</span><span class="p">:</span> <span class="n">x</span> <span class="o">*=</span> <span class="n">y</span><span class="w">
</span><span class="ln">60 </span><span class="w"></span>    <span class="k">else</span><span class="p">:</span>        <span class="n">x</span> <span class="o">/=</span> <span class="n">y</span><span class="p">;</span><span class="w">
</span><span class="ln">61 </span><span class="w"></span><span class="k">return</span> <span class="n">x</span><span class="p">;</span><span class="w">
</span><span class="ln">62 </span><span class="w">
</span><span class="ln">63 </span><span class="w"></span><span class="k">def</span> <span class="nf">F</span><span class="p">(</span><span class="n">lex</span><span class="p">):</span><span class="w">
</span><span class="ln">64 </span><span class="w"></span>  <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="w">
</span><span class="ln">65 </span><span class="w"></span>  <span class="k">if</span> <span class="n">lex</span><span class="o">.</span><span class="n">ct</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'n'</span><span class="p">:</span><span class="w">
</span><span class="ln">66 </span><span class="w"></span>    <span class="n">x</span> <span class="o">=</span> <span class="n">lex</span><span class="o">.</span><span class="n">ct</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span><span class="w">
</span><span class="ln">67 </span><span class="w"></span>  <span class="k">elif</span> <span class="n">lex</span><span class="o">.</span><span class="n">ct</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'('</span><span class="p">:</span><span class="w">
</span><span class="ln">68 </span><span class="w"></span>    <span class="n">lex</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">69 </span><span class="w"></span>    <span class="n">x</span> <span class="o">=</span> <span class="n">E</span><span class="p">(</span><span class="n">lex</span><span class="p">);</span></pre><pre class="highlight code python"><span class="ln">70 </span>    <span class="k">if</span> <span class="n">lex</span><span class="o">.</span><span class="n">ct</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">')'</span> <span class="ow">or</span> <span class="n">lex</span><span class="o">.</span><span class="n">ct</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'$'</span><span class="p">:</span><span class="w">
</span><span class="ln">71 </span><span class="w"></span>      <span class="k">raise</span> <span class="n">error</span><span class="p">(</span><span class="s1">' ) is missing '</span><span class="p">)</span><span class="w">
</span><span class="ln">72 </span><span class="w"></span>  <span class="k">else</span><span class="p">:</span><span class="w">
</span><span class="ln">73 </span><span class="w"></span>    <span class="k">raise</span> <span class="n">error</span><span class="p">(</span><span class="s1">' Error in F '</span><span class="p">);</span><span class="w">
</span><span class="ln">74 </span><span class="w"></span>  <span class="n">lex</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">75 </span><span class="w"></span>  <span class="k">return</span> <span class="n">x</span><span class="p">;</span><span class="w">
</span><span class="ln">76 </span><span class="w">
</span><span class="ln">77 </span><span class="w"></span><span class="n">s</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">'Enter &gt;&gt; '</span><span class="p">);</span><span class="w">
</span><span class="ln">78 </span><span class="w"></span><span class="k">while</span> <span class="n">s</span> <span class="o">!=</span> <span class="s1">''</span><span class="p">:</span><span class="w">
</span><span class="ln">79 </span><span class="w"></span>  <span class="k">try</span><span class="p">:</span><span class="w">
</span><span class="ln">80 </span><span class="w"></span>    <span class="n">lex</span> <span class="o">=</span> <span class="n">Lexical</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w">
</span><span class="ln">81 </span><span class="w"></span>    <span class="n">lex</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span><span class="w">
</span><span class="ln">82 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">lex</span><span class="p">));</span><span class="w">
</span><span class="ln">83 </span><span class="w"></span>  <span class="k">except</span> <span class="n">error</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">') is missing'</span><span class="p">);</span><span class="w">
</span><span class="ln">84 </span><span class="w"></span>  <span class="k">except</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">'Syntax Error'</span><span class="p">)</span><span class="w">
</span><span class="ln">85 </span><span class="w"></span>  <span class="n">s</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">'Enter &gt;&gt; '</span><span class="p">)</span></pre></div><div class="step step-level-1 t2c" step="37" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="59200" data-y="0" data-z="0"><h1 id="calculator-vi-lexical">Calculator(VI) - lexical</h1><pre class="highlight code python"><span class="ln"> 0 </span><span class="c1">#include&lt;iostream&gt;</span><span class="w">
</span><span class="ln"> 1 </span><span class="w"></span><span class="c1">#include&lt;cstdlib&gt;</span><span class="w">
</span><span class="ln"> 2 </span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">enum</span> <span class="n">TokenType</span><span class="p">{</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>  <span class="n">NUMBER</span><span class="p">,</span> <span class="n">PLUS</span><span class="p">,</span> <span class="n">MINUS</span><span class="p">,</span> <span class="n">MUL</span><span class="p">,</span> <span class="n">DIV</span><span class="p">,</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span>  <span class="n">LPAR</span><span class="p">,</span> <span class="n">RPAR</span><span class="p">,</span> <span class="n">END_OF_INPUT</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="p">};</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="n">struct</span> <span class="n">Token</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="p">{</span><span class="n">TokenType</span> <span class="nb">type</span><span class="p">;</span> <span class="nb">int</span> <span class="n">n</span><span class="p">;</span> <span class="n">double</span> <span class="n">r</span><span class="p">;};</span><span class="w">
</span><span class="ln"> 9 </span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="n">void</span> <span class="n">error</span><span class="p">(</span><span class="n">const</span> <span class="n">std</span><span class="p">::</span><span class="n">string</span> <span class="n">msg</span><span class="p">){</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>  <span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">msg</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="p">::</span><span class="n">endl</span><span class="p">;</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="ln">14 </span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="n">Token</span>  <span class="n">t</span><span class="p">;</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span><span class="n">char</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">200</span><span class="p">];</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="nb">int</span> <span class="n">tindex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="w">
</span><span class="ln">18 </span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="n">void</span> <span class="n">E</span><span class="p">(</span><span class="n">void</span><span class="p">);</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span><span class="n">void</span> <span class="n">T</span><span class="p">(</span><span class="n">void</span><span class="p">);</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span><span class="n">void</span> <span class="n">F</span><span class="p">(</span><span class="n">void</span><span class="p">);</span><span class="w">
</span><span class="ln">22 </span><span class="w">
</span><span class="ln">23 </span><span class="w"></span><span class="n">void</span> <span class="n">read</span><span class="p">(</span><span class="n">void</span><span class="p">){</span><span class="w">
</span><span class="ln">24 </span><span class="w"></span>  <span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s2">"Enter expression"</span><span class="w">
</span><span class="ln">25 </span><span class="w"></span>    <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="p">::</span><span class="n">endl</span><span class="p">;</span><span class="w">
</span><span class="ln">26 </span><span class="w"></span>  <span class="n">std</span><span class="p">::</span><span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">buffer</span><span class="p">;</span><span class="w">
</span><span class="ln">27 </span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="ln">28 </span><span class="w">
</span><span class="ln">29 </span><span class="w"></span><span class="n">Token</span> <span class="n">getToken</span><span class="p">(</span><span class="n">void</span><span class="p">){</span><span class="w">
</span><span class="ln">30 </span><span class="w"></span>  <span class="n">static</span> <span class="nb">int</span> <span class="n">number_of_call</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre><pre class="highlight code python"><span class="ln">31 </span>  <span class="n">number_of_call</span> <span class="o">++</span><span class="p">;</span><span class="w">
</span><span class="ln">32 </span><span class="w"></span>  <span class="k">if</span><span class="p">(</span><span class="n">buffer</span><span class="p">[</span><span class="n">tindex</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'('</span><span class="p">)</span><span class="w">
</span><span class="ln">33 </span><span class="w"></span>    <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">LPAR</span><span class="p">;</span><span class="w">
</span><span class="ln">34 </span><span class="w"></span>  <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">buffer</span><span class="p">[</span><span class="n">tindex</span><span class="p">]</span> <span class="o">==</span> <span class="s1">')'</span><span class="p">)</span><span class="w">
</span><span class="ln">35 </span><span class="w"></span>    <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">RPAR</span><span class="p">;</span><span class="w">
</span><span class="ln">36 </span><span class="w"></span>  <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">buffer</span><span class="p">[</span><span class="n">tindex</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'+'</span><span class="p">)</span><span class="w">
</span><span class="ln">37 </span><span class="w"></span>    <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">PLUS</span><span class="p">;</span><span class="w">
</span><span class="ln">38 </span><span class="w"></span>  <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">buffer</span><span class="p">[</span><span class="n">tindex</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'-'</span><span class="p">)</span><span class="w">
</span><span class="ln">39 </span><span class="w"></span>    <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">MINUS</span><span class="p">;</span><span class="w">
</span><span class="ln">40 </span><span class="w"></span>  <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">buffer</span><span class="p">[</span><span class="n">tindex</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'*'</span><span class="p">)</span><span class="w">
</span><span class="ln">41 </span><span class="w"></span>    <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">MUL</span><span class="p">;</span><span class="w">
</span><span class="ln">42 </span><span class="w"></span>  <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">buffer</span><span class="p">[</span><span class="n">tindex</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'/'</span><span class="p">)</span><span class="w">
</span><span class="ln">43 </span><span class="w"></span>    <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">DIV</span><span class="p">;</span><span class="w">
</span><span class="ln">44 </span><span class="w"></span>  <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">buffer</span><span class="p">[</span><span class="n">tindex</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="s1">'0'</span> <span class="o">&amp;&amp;</span><span class="w">
</span><span class="ln">45 </span><span class="w"></span>      <span class="n">buffer</span><span class="p">[</span><span class="n">tindex</span><span class="p">]</span><span class="o">&lt;=</span><span class="s1">'9'</span><span class="p">){</span><span class="w">
</span><span class="ln">46 </span><span class="w"></span>    <span class="n">t</span><span class="o">.</span><span class="n">type</span><span class="o">=</span><span class="n">NUMBER</span><span class="p">;</span><span class="w">
</span><span class="ln">47 </span><span class="w"></span>    <span class="n">t</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="w">
</span><span class="ln">48 </span><span class="w"></span>    <span class="k">for</span><span class="p">(;</span> <span class="n">buffer</span><span class="p">[</span><span class="n">tindex</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="s1">'0'</span><span class="w">
</span><span class="ln">49 </span><span class="w"></span>        <span class="o">&amp;&amp;</span> <span class="n">buffer</span><span class="p">[</span><span class="n">tindex</span><span class="p">]</span> <span class="o">&lt;=</span><span class="s1">'9'</span><span class="p">;</span> <span class="n">tindex</span><span class="o">++</span><span class="p">)</span><span class="w">
</span><span class="ln">50 </span><span class="w"></span>      <span class="n">t</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">n</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="n">buffer</span><span class="p">[</span><span class="n">tindex</span><span class="p">]</span> <span class="o">-</span> <span class="mi">48</span><span class="p">;</span><span class="w">
</span><span class="ln">51 </span><span class="w"></span>    <span class="n">tindex</span> <span class="o">--</span><span class="p">;</span><span class="w">
</span><span class="ln">52 </span><span class="w"></span>  <span class="p">}</span><span class="w">
</span><span class="ln">53 </span><span class="w"></span>  <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">buffer</span><span class="p">[</span><span class="n">tindex</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'</span><span class="se">\0</span><span class="s1">'</span><span class="p">)</span><span class="w">
</span><span class="ln">54 </span><span class="w"></span>    <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">END_OF_INPUT</span><span class="p">;</span><span class="w">
</span><span class="ln">55 </span><span class="w"></span>  <span class="k">else</span><span class="w">
</span><span class="ln">56 </span><span class="w"></span>    <span class="n">error</span><span class="p">(</span><span class="s2">"unknown character"</span><span class="p">);</span><span class="w">
</span><span class="ln">57 </span><span class="w"></span>  <span class="o">//</span><span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span><span class="o">&lt;&lt;</span><span class="s1">'</span><span class="se">\t</span><span class="s1">'</span><span class="o">&lt;&lt;</span><span class="n">tindex</span><span class="o">&lt;&lt;</span><span class="s1">'</span><span class="se">\t</span><span class="s1">'</span><span class="w">
</span><span class="ln">58 </span><span class="w"></span>  <span class="o">//&lt;&lt;</span><span class="n">number_of_call</span><span class="o">&lt;&lt;</span><span class="s1">'</span><span class="se">\t</span><span class="s1">'</span><span class="o">&lt;&lt;</span><span class="n">t</span><span class="o">.</span><span class="n">n</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="p">::</span><span class="n">endl</span><span class="p">;</span><span class="w">
</span><span class="ln">59 </span><span class="w"></span>  <span class="n">tindex</span><span class="o">++</span><span class="p">;</span><span class="w">
</span><span class="ln">60 </span><span class="w"></span>  <span class="k">return</span> <span class="n">t</span><span class="p">;</span><span class="w">
</span><span class="ln">61 </span><span class="w"></span><span class="p">}</span></pre></div><div class="step step-level-1 t2c" step="38" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="60800" data-y="0" data-z="0"><h1 id="calculator-vii">Calculator(VII)</h1><pre class="highlight code python"><span class="ln">63 </span><span class="n">void</span> <span class="n">A</span><span class="p">(</span><span class="n">void</span><span class="p">){</span><span class="w">
</span><span class="ln">64 </span><span class="w"></span>  <span class="n">t</span> <span class="o">=</span> <span class="n">getToken</span><span class="p">();</span><span class="w">
</span><span class="ln">65 </span><span class="w"></span>  <span class="n">E</span><span class="p">();</span><span class="w">
</span><span class="ln">66 </span><span class="w"></span>  <span class="k">if</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="n">END_OF_INPUT</span><span class="p">)</span><span class="w">
</span><span class="ln">67 </span><span class="w"></span>    <span class="n">error</span><span class="p">(</span><span class="s2">"unrecognized token"</span><span class="p">);</span><span class="w">
</span><span class="ln">68 </span><span class="w"></span>  <span class="k">else</span><span class="w">
</span><span class="ln">69 </span><span class="w"></span>    <span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s2">"Accept"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="p">::</span><span class="n">endl</span><span class="p">;</span><span class="w">
</span><span class="ln">70 </span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="ln">71 </span><span class="w">
</span><span class="ln">72 </span><span class="w"></span><span class="n">void</span> <span class="n">E</span><span class="p">(</span><span class="n">void</span><span class="p">){</span><span class="w">
</span><span class="ln">73 </span><span class="w"></span>  <span class="n">T</span><span class="p">();</span><span class="w">
</span><span class="ln">74 </span><span class="w"></span>  <span class="k">while</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">PLUS</span> <span class="o">||</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MINUS</span><span class="p">){</span><span class="w">
</span><span class="ln">75 </span><span class="w"></span>    <span class="n">t</span> <span class="o">=</span> <span class="n">getToken</span><span class="p">();</span><span class="w">
</span><span class="ln">76 </span><span class="w"></span>    <span class="n">T</span><span class="p">();</span><span class="w">
</span><span class="ln">77 </span><span class="w"></span>  <span class="p">}</span><span class="w">
</span><span class="ln">78 </span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="ln">79 </span><span class="w">
</span><span class="ln">80 </span><span class="w"></span><span class="n">void</span> <span class="n">T</span><span class="p">(</span><span class="n">void</span><span class="p">){</span><span class="w">
</span><span class="ln">81 </span><span class="w"></span>  <span class="n">F</span><span class="p">();</span><span class="w">
</span><span class="ln">82 </span><span class="w"></span>  <span class="k">while</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MUL</span> <span class="o">||</span> <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">DIV</span> <span class="p">){</span><span class="w">
</span><span class="ln">83 </span><span class="w"></span>    <span class="n">t</span> <span class="o">=</span> <span class="n">getToken</span><span class="p">();</span><span class="w">
</span><span class="ln">84 </span><span class="w"></span>    <span class="n">F</span><span class="p">();</span><span class="w">
</span><span class="ln">85 </span><span class="w"></span>  <span class="p">}</span><span class="w">
</span><span class="ln">86 </span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="ln">87 </span><span class="w">
</span><span class="ln">88 </span><span class="w"></span><span class="n">void</span> <span class="n">F</span><span class="p">(</span><span class="n">void</span><span class="p">){</span><span class="w">
</span><span class="ln">89 </span><span class="w"></span>  <span class="k">if</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">LPAR</span><span class="p">){</span></pre><pre class="highlight code python"><span class="ln"> 90 </span>    <span class="n">t</span> <span class="o">=</span> <span class="n">getToken</span><span class="p">();</span><span class="w">
</span><span class="ln"> 91 </span><span class="w"></span>    <span class="n">E</span><span class="p">();</span><span class="w">
</span><span class="ln"> 92 </span><span class="w"></span>    <span class="k">if</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="n">RPAR</span><span class="p">)</span><span class="w">
</span><span class="ln"> 93 </span><span class="w"></span>      <span class="n">error</span><span class="p">(</span><span class="s2">" ) is missing"</span><span class="p">);</span><span class="w">
</span><span class="ln"> 94 </span><span class="w"></span>  <span class="p">}</span><span class="w">
</span><span class="ln"> 95 </span><span class="w"></span>  <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">type</span><span class="o">==</span><span class="n">NUMBER</span><span class="p">)</span><span class="w">
</span><span class="ln"> 96 </span><span class="w"></span>    <span class="p">;</span><span class="w">
</span><span class="ln"> 97 </span><span class="w"></span>  <span class="k">else</span><span class="w">
</span><span class="ln"> 98 </span><span class="w"></span>    <span class="n">error</span><span class="p">(</span><span class="s2">"Wrong token "</span><span class="p">);</span><span class="w">
</span><span class="ln"> 99 </span><span class="w"></span>  <span class="n">t</span> <span class="o">=</span> <span class="n">getToken</span><span class="p">();</span><span class="w">
</span><span class="ln">100 </span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="ln">101 </span><span class="w">
</span><span class="ln">102 </span><span class="w"></span><span class="n">void</span> <span class="n">tryGetToken</span><span class="p">(</span><span class="n">void</span><span class="p">){</span><span class="w">
</span><span class="ln">103 </span><span class="w"></span>  <span class="n">do</span><span class="p">{</span><span class="w">
</span><span class="ln">104 </span><span class="w"></span>    <span class="n">t</span> <span class="o">=</span> <span class="n">getToken</span><span class="p">();</span><span class="w">
</span><span class="ln">105 </span><span class="w"></span>  <span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="n">END_OF_INPUT</span><span class="p">);}</span><span class="w">
</span><span class="ln">106 </span><span class="w">
</span><span class="ln">107 </span><span class="w"></span><span class="nb">int</span> <span class="n">main</span><span class="p">(){</span><span class="w">
</span><span class="ln">108 </span><span class="w"></span>  <span class="n">read</span><span class="p">();</span> <span class="o">/*</span><span class="n">tryGetToken</span><span class="p">();</span><span class="o">*/</span><span class="w">
</span><span class="ln">109 </span><span class="w"></span>  <span class="n">A</span><span class="p">();</span><span class="w">
</span><span class="ln">110 </span><span class="w"></span>  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span><span class="w">
</span><span class="ln">111 </span><span class="w"></span><span class="p">}</span><span class="o">/*</span><span class="mi">2</span><span class="o">-</span><span class="p">(</span><span class="mi">3</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">3</span><span class="o">-</span><span class="p">(</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">5</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="p">))</span><span class="o">-</span><span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="o">*/</span></pre></div><div class="step step-level-1" step="39" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="62400" data-y="0" data-z="0"><p>End</p></div></div><div id="slide-number" class="slide-number">
         1
      </div><script type="text/javascript" src="js/impress.js"></script><script type="text/javascript" src="js/gotoSlide.js"></script><script type="text/javascript" src="js/hovercraft.js"></script><script type="text/javascript">
      document.getElementById("impress").addEventListener("impress:stepenter", update_slide_number, false);
    </script></body></html>