<html xmlns="http://www.w3.org/1999/xhtml"><head><title></title><meta charset="UTF-8"><meta name="generator" content="bildumilo 1.0 https://github.com/yoosofan/bildumilo"><link rel="stylesheet" href="css/hovercraft.css" media="all"><link rel="stylesheet" href="css/highlight.css" media="all"><link rel="stylesheet" href="css/style.css" media="all"><link rel="stylesheet" href="css/python.css" media="all"><script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        showProcessingMessages: false,
        messageStyle: "none",
        TeX : { extensions : ['color.js'] }
      });
    </script></head><body class="impress-not-supported"><div id="impress" data-width="1024" data-height="768" data-transition-duration="1000"><div class="step step-level-1" step="0" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="0" data-y="0" data-z="0"><h1 id="database-application-python">Database - Application - python</h1><p>Ahmad Yoosofan</p><p>University of Kashan</p></div><div class="step step-level-1" step="1" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="1600" data-y="0" data-z="0"><h1 id="simple-application-i">Simple Application(I)</h1><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">sqlite3</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">'sp.sqlite'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">r1</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from "s";'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">:</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="n">c</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1" step="2" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="3200" data-y="0" data-z="0"><h1 id="cursor-i">Cursor(I)</h1><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">sqlite3</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">'sp.sqlite'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">c1</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">c2</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="n">r1</span> <span class="o">=</span> <span class="n">c1</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from s;'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="n">r2</span> <span class="o">=</span> <span class="n">c2</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from p;'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'S'</span><span class="p">)</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">:</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="w">
</span><span class="ln">12 </span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'P'</span><span class="p">)</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="w">
</span><span class="ln">16 </span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="n">c1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span><span class="n">c2</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1" step="3" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="4800" data-y="0" data-z="0"><h1 id="cursor-ii">Cursor(II)</h1><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">sqlite3</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">'sp.sqlite'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">r1</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from s;'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'S'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">:</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="w">
</span><span class="ln">10 </span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="n">r2</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from p;'</span><span class="p">)</span><span class="w">
</span><span class="ln">12 </span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'P'</span><span class="p">)</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="w">
</span><span class="ln">16 </span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="n">c</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1 t2c" step="4" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="6400" data-y="0" data-z="0"><h1 id="cursor-iii">Cursor(III)</h1><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">sqlite3</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">'sp.sqlite'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">r1</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from s;'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">r2</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from p;'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'r1: '</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">r1</span><span class="p">))</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'r2:'</span><span class="p">,</span>  <span class="nb">type</span><span class="p">(</span><span class="n">r2</span><span class="p">))</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="n">r1</span> <span class="o">=</span> <span class="p">(</span> <span class="p">(</span><span class="s1">'p4'</span><span class="p">,</span> <span class="s1">'cog'</span><span class="p">,</span> <span class="s1">'green'</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>        <span class="p">(</span><span class="s1">'p8'</span><span class="p">,</span> <span class="s1">'bolt'</span><span class="p">,</span> <span class="s1">'red'</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>     <span class="p">)</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="n">r2</span> <span class="o">=</span> <span class="p">(</span> <span class="p">(</span><span class="s1">'p15'</span><span class="p">,</span> <span class="s1">'screw'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">,</span> <span class="mi">76</span><span class="p">),</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>       <span class="p">(</span> <span class="s1">'p45'</span><span class="p">,</span> <span class="s1">'Nut'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span> <span class="mi">27</span><span class="p">)</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>     <span class="p">)</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'r1: '</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">r1</span><span class="p">))</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'r2:'</span><span class="p">,</span>  <span class="nb">type</span><span class="p">(</span><span class="n">r2</span><span class="p">))</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'S'</span><span class="p">)</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="n">r1</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from s;'</span><span class="p">)</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span><span class="n">r2</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from p;'</span><span class="p">)</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">:</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'P'</span><span class="p">)</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span><span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span><span class="w">
</span><span class="ln">23 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="w">
</span><span class="ln">24 </span><span class="w"></span><span class="n">c</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">25 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre><pre class="highlight code console"><span class="ln"> 1 </span><span class="go">python3 sp260.py
</span><span class="ln"> 2 </span><span class="go">
</span><span class="ln"> 3 </span><span class="go">r1:  &lt;class 'sqlite3.Cursor'&gt;
</span><span class="ln"> 4 </span><span class="go">r2: &lt;class 'sqlite3.Cursor'&gt;
</span><span class="ln"> 5 </span><span class="go">r1:  &lt;class 'tuple'&gt;
</span><span class="ln"> 6 </span><span class="go">r2: &lt;class 'tuple'&gt;
</span><span class="ln"> 7 </span><span class="go">S
</span><span class="ln"> 8 </span><span class="go"></span><span class="gp-VirtualEnv">('P1', 'Nut', 'Red', 12, 'London')</span>
<span class="ln"> 9 </span><span class="go"></span><span class="gp-VirtualEnv">('P2', 'Bolt', 'Green', 17, 'Paris')</span>
<span class="ln">10 </span><span class="go"></span><span class="gp-VirtualEnv">('P3', 'Screw', 'Blue', 17, 'Oslo')</span>
<span class="ln">11 </span><span class="go"></span><span class="gp-VirtualEnv">('P4', 'Screw', 'Red', 14, 'London')</span>
<span class="ln">12 </span><span class="go"></span><span class="gp-VirtualEnv">('P5', 'Cam', 'Blue', 12, 'Paris')</span>
<span class="ln">13 </span><span class="go"></span><span class="gp-VirtualEnv">('P6', 'Cog', 'Red', 19, 'London')</span>
<span class="ln">14 </span><span class="go">P</span></pre></div><div class="step step-level-1 t2c" step="5" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="8000" data-y="0" data-z="0"><h1 id="traverse-fields">Traverse Fields</h1><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">sqlite3</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">'sp.sqlite'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">c1</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">c2</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="n">r1</span> <span class="o">=</span> <span class="n">c1</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from s;'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="n">r2</span> <span class="o">=</span> <span class="n">c2</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from p;'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'S'</span><span class="p">)</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">:</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>  <span class="k">for</span> <span class="n">k1</span> <span class="ow">in</span> <span class="n">m1</span><span class="p">:</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">" ;  "</span><span class="p">)</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>  <span class="nb">print</span><span class="p">();</span><span class="w">
</span><span class="ln">14 </span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'P'</span><span class="p">)</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span><span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="w">
</span><span class="ln">18 </span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="n">c1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span><span class="n">c2</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">21 </span><span class="w">
</span><span class="ln">22 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre><pre class="highlight code console"><span class="ln"> 1 </span><span class="go">python3 sp280.py
</span><span class="ln"> 2 </span><span class="go">
</span><span class="ln"> 3 </span><span class="go">S
</span><span class="ln"> 4 </span><span class="go">S1 ;  Smith ;  20 ;  London ;
</span><span class="ln"> 5 </span><span class="go">S2 ;  Jones ;  10 ;  Paris ;
</span><span class="ln"> 6 </span><span class="go">S3 ;  Blake ;  30 ;  Paris ;
</span><span class="ln"> 7 </span><span class="go">S4 ;  Clark ;  20 ;  London ;
</span><span class="ln"> 8 </span><span class="go">S5 ;  Adams ;  30 ;  Athens ;
</span><span class="ln"> 9 </span><span class="go">S6 ;  Ali ;  40 ;  &#1705;&#1575;&#1588;&#1575;&#1606; ;
</span><span class="ln">10 </span><span class="go">P
</span><span class="ln">11 </span><span class="go"></span><span class="gp-VirtualEnv">('P1', 'Nut', 'Red', 12, 'London')</span>
<span class="ln">12 </span><span class="go"></span><span class="gp-VirtualEnv">('P2', 'Bolt', 'Green', 17, 'Paris')</span>
<span class="ln">13 </span><span class="go"></span><span class="gp-VirtualEnv">('P3', 'Screw', 'Blue', 17, 'Oslo')</span>
<span class="ln">14 </span><span class="go"></span><span class="gp-VirtualEnv">('P4', 'Screw', 'Red', 14, 'London')</span>
<span class="ln">15 </span><span class="go"></span><span class="gp-VirtualEnv">('P5', 'Cam', 'Blue', 12, 'Paris')</span>
<span class="ln">16 </span><span class="go"></span><span class="gp-VirtualEnv">('P6', 'Cog', 'Red', 19, 'London')</span>
<span class="ln">17 </span></pre></div><div class="step step-level-1 t2c" step="6" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="9600" data-y="0" data-z="0"><h1 id="fetch">Fetch</h1><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">sqlite3</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">'sp.sqlite'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">c1</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">c2</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="n">r1</span> <span class="o">=</span> <span class="n">c1</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from s;'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="n">r2</span> <span class="o">=</span> <span class="n">c2</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from p;'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'S'</span><span class="p">)</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">:</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="w">
</span><span class="ln">12 </span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'P'</span><span class="p">)</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="n">c2</span><span class="o">.</span><span class="n">fetchone</span><span class="p">())</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="n">c2</span><span class="o">.</span><span class="n">fetchone</span><span class="p">())</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="n">r2</span><span class="o">.</span><span class="n">fetchone</span><span class="p">())</span><span class="w">
</span><span class="ln">17 </span><span class="w">
</span><span class="ln">18 </span><span class="w"></span><span class="n">c1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="n">c2</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre><pre class="highlight code console"><span class="ln"> 1 </span><span class="go">python3 sp280.py
</span><span class="ln"> 2 </span><span class="go">
</span><span class="ln"> 3 </span><span class="go">S
</span><span class="ln"> 4 </span><span class="go"></span><span class="gp-VirtualEnv">('S1', 'Smith', 20, 'London')</span>
<span class="ln"> 5 </span><span class="go"></span><span class="gp-VirtualEnv">('S2', 'Jones', 10, 'Paris')</span>
<span class="ln"> 6 </span><span class="go"></span><span class="gp-VirtualEnv">('S3', 'Blake', 30, 'Paris')</span>
<span class="ln"> 7 </span><span class="go"></span><span class="gp-VirtualEnv">('S4', 'Clark', 20, 'London')</span>
<span class="ln"> 8 </span><span class="go"></span><span class="gp-VirtualEnv">('S5', 'Adams', 30, 'Athens')</span>
<span class="ln"> 9 </span><span class="go"></span><span class="gp-VirtualEnv">('S6', 'Ali', 40, '&#1705;&#1575;&#1588;&#1575;&#1606;')</span>
<span class="ln">10 </span><span class="go">P
</span><span class="ln">11 </span><span class="go"></span><span class="gp-VirtualEnv">('P1', 'Nut', 'Red', 12, 'London')</span>
<span class="ln">12 </span><span class="go"></span><span class="gp-VirtualEnv">('P2', 'Bolt', 'Green', 17, 'Paris')</span>
<span class="ln">13 </span><span class="go"></span><span class="gp-VirtualEnv">('P3', 'Screw', 'Blue', 17, 'Oslo')</span>
<span class="ln">14 </span></pre></div><div class="step step-level-1 t2c" step="7" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="11200" data-y="0" data-z="0"><h1 id="manipulate-tables-i">Manipulate Tables(I)</h1><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">sqlite3</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">'sp.sqlite'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'''
</span><span class="ln"> 5 </span><span class="s1">  insert into p(pn, pname, color, weight, city)
</span><span class="ln"> 6 </span><span class="s1">  values('p19','Nut'  ,'Red'  ,12.0,'London')
</span><span class="ln"> 7 </span><span class="s1">  ;
</span><span class="ln"> 8 </span><span class="s1"> '''</span><span class="p">)</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="n">r1</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from p;'</span><span class="p">)</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">:</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'before commit'</span><span class="p">)</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'after commit'</span><span class="p">)</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="n">r1</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from p;'</span><span class="p">)</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span><span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">:</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span><span class="n">c</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1 t2c" step="8" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="12800" data-y="0" data-z="0"><h1 id="manipulate-tables-ii">Manipulate Tables(II)</h1><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">sqlite3</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">'sp.sqlite'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">c1</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">c2</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">c1</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'''
</span><span class="ln"> 6 </span><span class="s1">  insert into p(pn, pname, color, weight, city)
</span><span class="ln"> 7 </span><span class="s1">  values('p20','Nut'  ,'Red'  ,12.0,'London')
</span><span class="ln"> 8 </span><span class="s1">  ;
</span><span class="ln"> 9 </span><span class="s1"> '''</span><span class="p">)</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="n">r1</span> <span class="o">=</span> <span class="n">c2</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from p;'</span><span class="p">)</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">:</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'before commit'</span><span class="p">)</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'after commit'</span><span class="p">)</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span><span class="n">r1</span> <span class="o">=</span> <span class="n">c2</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from p;'</span><span class="p">)</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">:</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="n">c1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span><span class="n">c2</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1 t2c" step="9" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="14400" data-y="0" data-z="0"><h1 id="two-connection">Two Connection</h1><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">sqlite3</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">'sp.sqlite'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">conn1</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">'sp.sqlite'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">c1</span> <span class="o">=</span> <span class="n">conn1</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'''
</span><span class="ln"> 7 </span><span class="s1">  insert into p(pn, pname, color, weight, city)
</span><span class="ln"> 8 </span><span class="s1">  values('p22','Nut'  ,'Red'  ,12.0,'London')
</span><span class="ln"> 9 </span><span class="s1">  ;
</span><span class="ln">10 </span><span class="s1"> '''</span><span class="p">)</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="n">r1</span> <span class="o">=</span> <span class="n">c1</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from p;'</span><span class="p">)</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">:</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'before commit'</span><span class="p">)</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="s1">'after commit'</span><span class="p">)</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="n">r1</span> <span class="o">=</span> <span class="n">c1</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from p;'</span><span class="p">)</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span><span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">:</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span><span class="n">c</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span><span class="n">c1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1 t2c" step="10" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="16000" data-y="0" data-z="0"><h1 id="delete">DELETE</h1><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">sqlite3</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">'sp.sqlite'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'''delete from p where pn='p19';'''</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="n">r1</span> <span class="o">=</span> <span class="n">c1</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'select * from p;'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">:</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="n">c</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1 t2c" step="11" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="17600" data-y="0" data-z="0"><h1 id="a-program-i">A program(I)</h1><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="k">def</span> <span class="nf">createTable</span><span class="p">(</span><span class="n">c</span><span class="p">):</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'''
</span><span class="ln"> 3 </span><span class="s1">    CREATE TABLE IF NOT EXISTS stocks (
</span><span class="ln"> 4 </span><span class="s1">    date1 char(10),
</span><span class="ln"> 5 </span><span class="s1">    trans char(15),
</span><span class="ln"> 6 </span><span class="s1">    symbol char(10),
</span><span class="ln"> 7 </span><span class="s1">    qty numeric(8,2),
</span><span class="ln"> 8 </span><span class="s1">    price numeric(8,2),
</span><span class="ln"> 9 </span><span class="s1">    primary key(date1)
</span><span class="ln">10 </span><span class="s1">  );
</span><span class="ln">11 </span><span class="s1">  '''</span><span class="p">)</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'''
</span><span class="ln">13 </span><span class="s1">    INSERT INTO stocks VALUES (
</span><span class="ln">14 </span><span class="s1">      '2006-01-05'
</span><span class="ln">15 </span><span class="s1">      ,'BUY', 'RHAT', 100, 35.14
</span><span class="ln">16 </span><span class="s1">    );
</span><span class="ln">17 </span><span class="s1">  '''</span><span class="p">)</span><span class="w">
</span><span class="ln">18 </span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="k">def</span> <span class="nf">test2</span><span class="p">(</span><span class="n">c</span><span class="p">):</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span>  <span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="s1">'RAT'</span><span class="p">,)</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span>  <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'''
</span><span class="ln">22 </span><span class="s1">    SELECT *
</span><span class="ln">23 </span><span class="s1">    FROM stocks
</span><span class="ln">24 </span><span class="s1">    WHERE symbol=?
</span><span class="ln">25 </span><span class="s1">  '''</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span></pre></div><div class="step step-level-1 t2c" step="12" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="19200" data-y="0" data-z="0"><h1 id="a-program-ii">A program(II)</h1><pre class="highlight code python ltr"><span class="ln">26 </span>  <span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">())</span><span class="w">
</span><span class="ln">27 </span><span class="w"></span>  <span class="n">purchases</span> <span class="o">=</span> <span class="p">[</span><span class="w">
</span><span class="ln">28 </span><span class="w"></span>    <span class="p">(</span><span class="s1">'2006-03-28'</span><span class="p">,</span> <span class="s1">'BUY'</span><span class="p">,</span> <span class="s1">'IBM'</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mf">45.00</span><span class="p">),</span><span class="w">
</span><span class="ln">29 </span><span class="w"></span>    <span class="p">(</span><span class="s1">'2006-04-05'</span><span class="p">,</span> <span class="s1">'BUY'</span><span class="p">,</span> <span class="s1">'MSFT'</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mf">72.00</span><span class="p">),</span><span class="w">
</span><span class="ln">30 </span><span class="w"></span>    <span class="p">(</span><span class="s1">'2006-04-06'</span><span class="p">,</span> <span class="s1">'SELL'</span><span class="p">,</span> <span class="s1">'IBM'</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mf">53.00</span><span class="p">),</span><span class="w">
</span><span class="ln">31 </span><span class="w"></span>  <span class="p">]</span><span class="w">
</span><span class="ln">32 </span><span class="w"></span>  <span class="n">c</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span><span class="s1">'INSERT INTO stocks VALUES (?,?,?,?,?)'</span><span class="p">,</span> <span class="n">purchases</span><span class="p">)</span><span class="w">
</span><span class="ln">33 </span><span class="w">
</span><span class="ln">34 </span><span class="w"></span><span class="k">def</span> <span class="nf">testDelete</span><span class="p">(</span><span class="n">c</span><span class="p">):</span><span class="w">
</span><span class="ln">35 </span><span class="w"></span>  <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"DELETE FROM stocks WHERE symbol='IBM';"</span><span class="p">)</span><span class="w">
</span><span class="ln">36 </span><span class="w"></span>  <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select * from stocks"</span><span class="p">);</span><span class="w">
</span><span class="ln">37 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s2">"&#1570;&#1582;&#1585;&#1740;&#1606; &#1582;&#1585;&#1608;&#1670;&#1740;&#8204;&#1607;&#1575;&#1740;"</span><span class="p">);</span><span class="w">
</span><span class="ln">38 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">())</span><span class="w">
</span><span class="ln">39 </span><span class="w">
</span><span class="ln">40 </span><span class="w"></span><span class="k">def</span> <span class="nf">testFor</span><span class="p">(</span><span class="n">c</span><span class="p">):</span><span class="w">
</span><span class="ln">41 </span><span class="w"></span>  <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'SELECT * FROM stocks ORDER BY price'</span><span class="p">):</span><span class="w">
</span><span class="ln">42 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span><span class="w">
</span><span class="ln">43 </span><span class="w">
</span><span class="ln">44 </span><span class="w"></span><span class="n">path1</span> <span class="o">=</span> <span class="s1">'example.db'</span><span class="w">
</span><span class="ln">45 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">path1</span><span class="p">)</span><span class="w">
</span><span class="ln">46 </span><span class="w"></span><span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln">47 </span><span class="w"></span><span class="c1">#createTable(c)</span><span class="w">
</span><span class="ln">48 </span><span class="w"></span><span class="c1">#test2(c)</span><span class="w">
</span><span class="ln">49 </span><span class="w"></span><span class="n">testDelete</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="w">
</span><span class="ln">50 </span><span class="w"></span><span class="c1">#testFor(c)</span><span class="w">
</span><span class="ln">51 </span><span class="w"></span><span class="n">c</span><span class="o">.</span><span class="n">close</span><span class="p">();</span> <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span> <span class="c1">#os.system('rm example.db')</span><span class="w">
</span><span class="ln">52 </span><span class="w"></span><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path1</span><span class="p">):</span><span class="w">
</span><span class="ln">53 </span><span class="w"></span>  <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">path1</span><span class="p">)</span></pre></div><div class="step step-level-1" step="13" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="20800" data-y="0" data-z="0"><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">psycopg</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s2">"sp"</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">"ali"</span><span class="p">,</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>        <span class="n">password</span><span class="o">=</span><span class="s2">"12"</span><span class="p">,</span> <span class="n">host</span> <span class="o">=</span> <span class="s1">'127.0.0.1'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select * from s;"</span><span class="p">);</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1" step="14" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="22400" data-y="0" data-z="0"><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">psycopg</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s2">"sp"</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">"ali"</span><span class="p">,</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>         <span class="n">password</span><span class="o">=</span><span class="s2">"12"</span><span class="p">,</span> <span class="n">host</span> <span class="o">=</span> <span class="s1">'127.0.0.1'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select * from s;"</span><span class="p">);</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'[ '</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="s1">''</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>  <span class="k">for</span> <span class="n">m1</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>      <span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="n">end</span><span class="o">=</span><span class="s1">', '</span><span class="p">)</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>    <span class="k">else</span><span class="p">:</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>      <span class="nb">print</span><span class="p">(</span><span class="s1">'not str:: '</span><span class="p">,</span><span class="n">m1</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">', '</span><span class="p">)</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">']'</span><span class="p">)</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1" step="15" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="24000" data-y="0" data-z="0"><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">psycopg</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s2">"sp"</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">"ali"</span><span class="p">,</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>         <span class="n">password</span><span class="o">=</span><span class="s2">"12"</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s1">'127.0.0.1'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="c1">#cur.execute("select * from a1;");</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"""create table a1(
</span><span class="ln"> 7 </span><span class="s2">                    mn int primary key,
</span><span class="ln"> 8 </span><span class="s2">                    st char(20)
</span><span class="ln"> 9 </span><span class="s2">                );
</span><span class="ln">10 </span><span class="s2">            """</span><span class="p">)</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">();</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1" step="16" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="25600" data-y="0" data-z="0"><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">psycopg</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s2">"sp"</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">"ali"</span><span class="p">,</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>         <span class="n">password</span><span class="o">=</span><span class="s2">"12"</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s1">'127.0.0.1'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="c1">#cur.execute("select * from a1;");</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"""CREATE TABLE IF NOT EXISTS "a1"(
</span><span class="ln"> 7 </span><span class="s2">                    "mn" INTEGER PRIMARY KEY,
</span><span class="ln"> 8 </span><span class="s2">                    "st" VARCHAR(20)
</span><span class="ln"> 9 </span><span class="s2">                );
</span><span class="ln">10 </span><span class="s2">            """</span><span class="p">)</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">();</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1" step="17" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="27200" data-y="0" data-z="0"><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">psycopg</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s2">"sp"</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">"ali"</span><span class="p">,</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>         <span class="n">password</span><span class="o">=</span><span class="s2">"12"</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s1">'127.0.0.1'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"""ALTER TABLE "a1" ADD "status" INTEGER;"""</span><span class="p">);</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="c1">#input("Enter something: ")</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">();</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"""SELECT * FROM "a1";"""</span><span class="p">)</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1" step="18" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="28800" data-y="0" data-z="0"><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">psycopg</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s2">"sp"</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">"ali"</span><span class="p">,</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>        <span class="n">password</span><span class="o">=</span><span class="s2">"12"</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s1">'127.0.0.1'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">();</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select * from a1;"</span><span class="p">);</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1" step="19" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="30400" data-y="0" data-z="0"><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">psycopg</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s2">"sp"</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">"postgres"</span><span class="p">,</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>          <span class="n">password</span><span class="o">=</span><span class="s2">"12"</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s1">'127.0.0.1'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"""SELECT * FROM "s";"""</span><span class="p">);</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">11 </span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="c1"># psql --username=postgres --dbname=sp  --host=127.0.0.1  --password</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="c1"># INSERT INTO "p"("pn", "pname", "color", "weight", "city") VALUES('p7','Bolt', 'Green', 12.1, 'Shiraz');</span><span class="w">
</span><span class="ln">14 </span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="c1"># with psk as (select city from p natural join s)</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span><span class="c1"># select * from psk;</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="c1"># CREATE OR REPLACE VIEW "psk" ("city") AS SELECT DISTINCT "p"."city" FROM "s" JOIN "p" ON "s"."city" = "p"."city" ;</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span><span class="sd">"""
</span><span class="ln">19 </span><span class="sd">CREATE OR REPLACE VIEW "psk" ("city") AS
</span><span class="ln">20 </span><span class="sd">    SELECT DISTINCT "p"."city"
</span><span class="ln">21 </span><span class="sd">    FROM "s" JOIN "p" ON "s"."city" = "p"."city" ;
</span><span class="ln">22 </span><span class="sd">"""</span></pre></div><div class="step step-level-1" step="20" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="32000" data-y="0" data-z="0"><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">psycopg</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s2">"sp"</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">"postgres"</span><span class="p">,</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>          <span class="n">password</span><span class="o">=</span><span class="s2">"12"</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s1">'127.0.0.1'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">();</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select * from a1;"</span><span class="p">);</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="c1">#cur.execute("insert into a1(sno,status) values('s4','alll');")</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"""INSERT INTO "a1"("mn", "st", "status") VALUES
</span><span class="ln">11 </span><span class="s2">            (4, 'S4', 15);"""</span><span class="p">)</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="c1">#input('Enter Something:: ')</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"""UPDATE "a1" SET "status" = 40 WHERE "st"='S4';"""</span><span class="p">)</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select * from a1;"</span><span class="p">);</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span><span class="w">
</span><span class="ln">18 </span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1" step="21" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="33600" data-y="0" data-z="0"><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="c1">#Error</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="kn">import</span> <span class="nn">psycopg</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s2">"sp"</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">"ali"</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">"12"</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s1">'127.0.0.1'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select * from a1;"</span><span class="p">);</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"update a1 set status=10 where sn='s1';"</span><span class="p">)</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"update a1 set status=20 where sn='s2';"</span><span class="p">)</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">();</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1" step="22" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="35200" data-y="0" data-z="0"><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="n">mport</span> <span class="n">psycopg</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s2">"sp"</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">"postgres"</span><span class="p">,</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>            <span class="n">password</span><span class="o">=</span><span class="s2">"12"</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s1">'127.0.0.1'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select * from s;"</span><span class="p">);</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="nb">print</span><span class="p">()</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="n">n1</span><span class="o">=</span><span class="nb">input</span><span class="p">(</span><span class="s1">'Enter Status for s1 :  '</span><span class="p">)</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="n">si</span><span class="o">=</span><span class="nb">input</span><span class="p">(</span><span class="s2">"Enter si : "</span><span class="p">);</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="n">stmt</span><span class="o">=</span><span class="s2">"update s set status="</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n1</span><span class="p">)</span><span class="o">+</span><span class="s2">" where sn='"</span><span class="o">+</span><span class="n">si</span><span class="o">+</span><span class="s2">"';"</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="n">stmt</span><span class="o">=</span><span class="s2">"update s set status="</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n1</span><span class="p">)</span><span class="o">+</span><span class="s2">" where sn='"</span><span class="o">+</span><span class="s2">"'S12'"</span><span class="o">+</span><span class="s2">"';"</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="n">stmt</span><span class="o">=</span><span class="s2">"update s set status="</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n1</span><span class="p">)</span><span class="o">+</span><span class="s2">" where sn='"</span><span class="o">+</span><span class="s2">"S12' or </span><span class="se">\'</span><span class="s2">32</span><span class="se">\'</span><span class="s2">='32"</span><span class="o">+</span><span class="s2">"';"</span><span class="w">
</span><span class="ln">14 </span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="c1"># update s set status=13 where sn='S12' or '32'='32';</span><span class="w">
</span><span class="ln">16 </span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="n">stmt</span><span class="o">=</span><span class="s2">"update s set status="</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n1</span><span class="p">)</span><span class="o">+</span><span class="s2">" where sn='"</span><span class="o">+</span><span class="s2">"S12'; insert into p(pn, pname, weight, city) values('p31', 'ddd', 43, 'Kashan'); select * from p where pn='p4343"</span><span class="o">+</span><span class="s2">"';"</span><span class="w">
</span><span class="ln">18 </span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span><span class="c1">#cur.execute("update s set status=20 where sn='s3';")</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">();</span><span class="w">
</span><span class="ln">23 </span><span class="w"></span><span class="nb">print</span><span class="p">();</span><span class="w">
</span><span class="ln">24 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select * from s;"</span><span class="p">);</span><span class="w">
</span><span class="ln">25 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln">26 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">
</span><span class="ln">27 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">28 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1" step="23" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="36800" data-y="0" data-z="0"><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">psycopg</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s2">"sp"</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">"postgres"</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">"12"</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s1">'127.0.0.1'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select * from a1;"</span><span class="p">);</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"update a1 set status=10 where sno='s1';"</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"update a1 set status=20 where sno='s3';"</span><span class="p">)</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">();</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select * from a1;"</span><span class="p">);</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1" step="24" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="38400" data-y="0" data-z="0"><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">psycopg</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s2">"sp"</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">"postgres"</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">"12"</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s1">'127.0.0.1'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">s1</span><span class="o">=</span><span class="nb">input</span><span class="p">(</span><span class="s1">'Enter a sn: '</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">sname1</span><span class="o">=</span><span class="nb">input</span><span class="p">(</span><span class="s1">'Enter sname '</span><span class="p">)</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="n">stmt1</span> <span class="o">=</span><span class="s2">"insert into s(sn, sname, status, city) values('"</span><span class="p">;</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="n">stmt1</span><span class="o">+=</span><span class="n">s1</span><span class="o">+</span><span class="s2">"','"</span><span class="o">+</span><span class="n">sname1</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="n">stmt1</span><span class="o">+=</span><span class="s2">"',30,'Athens');"</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt1</span><span class="p">)</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select * from s;"</span><span class="p">);</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1" step="25" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="40000" data-y="0" data-z="0"><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">psycopg</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s2">"sp"</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">"postgres"</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">"12"</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s1">'127.0.0.1'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">s1</span><span class="o">=</span><span class="nb">input</span><span class="p">(</span><span class="s1">'Enter a sn: '</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">sname1</span><span class="o">=</span><span class="nb">input</span><span class="p">(</span><span class="s1">'Enter sname '</span><span class="p">)</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="n">stmt1</span> <span class="o">=</span><span class="s2">"insert into s(sn, sname, status, city) values('"</span><span class="p">;</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="n">stmt1</span><span class="o">+=</span><span class="n">s1</span><span class="o">+</span><span class="s2">"','"</span><span class="o">+</span><span class="n">sname1</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="n">stmt1</span><span class="o">+=</span><span class="s2">"',30,'Athens');"</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt1</span><span class="p">)</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select * from s;"</span><span class="p">);</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>  <span class="k">for</span> <span class="n">l1</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>    <span class="c1">#print(l1,type(l1),end=' ');</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">int</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span><span class="o">!=</span><span class="nb">float</span> <span class="ow">and</span> <span class="n">l1</span><span class="o">!=</span><span class="kc">None</span><span class="p">:</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>      <span class="nb">print</span><span class="p">(</span><span class="n">l1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">l1</span><span class="p">),</span><span class="n">end</span><span class="o">=</span><span class="s1">' '</span><span class="p">);</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>  <span class="nb">print</span><span class="p">()</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1" step="26" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="41600" data-y="0" data-z="0"><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="n">mport</span> <span class="n">psycopg</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s2">"sp"</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">"postgres"</span><span class="p">,</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>            <span class="n">password</span><span class="o">=</span><span class="s2">"12"</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s1">'127.0.0.1'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select * from s;"</span><span class="p">);</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="nb">print</span><span class="p">()</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="n">n1</span><span class="o">=</span><span class="nb">input</span><span class="p">(</span><span class="s1">'Enter Status for s1 :  '</span><span class="p">)</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="n">si</span><span class="o">=</span><span class="nb">input</span><span class="p">(</span><span class="s2">"Enter si : "</span><span class="p">);</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="n">stmt</span><span class="o">=</span><span class="s2">"update s set status="</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n1</span><span class="p">)</span><span class="o">+</span><span class="s2">" where sn='"</span><span class="o">+</span><span class="n">si</span><span class="o">+</span><span class="s2">"';"</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="n">stmt</span><span class="o">=</span><span class="s2">"update s set status="</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n1</span><span class="p">)</span><span class="o">+</span><span class="s2">" where sn='"</span><span class="o">+</span><span class="s2">"'S12'"</span><span class="o">+</span><span class="s2">"';"</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="n">stmt</span><span class="o">=</span><span class="s2">"update s set status="</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n1</span><span class="p">)</span><span class="o">+</span><span class="s2">" where sn='"</span><span class="o">+</span><span class="s2">"S12' or </span><span class="se">\'</span><span class="s2">32</span><span class="se">\'</span><span class="s2">='32"</span><span class="o">+</span><span class="s2">"';"</span><span class="w">
</span><span class="ln">14 </span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="c1"># update s set status=13 where sn='S12' or '32'='32';</span><span class="w">
</span><span class="ln">16 </span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="n">stmt</span><span class="o">=</span><span class="s2">"update s set status="</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n1</span><span class="p">)</span><span class="o">+</span><span class="s2">" where sn='"</span><span class="o">+</span><span class="s2">"S12'; insert into p(pn, pname, weight, city) values('p31', 'ddd', 43, 'Kashan'); select * from p where pn='p4343"</span><span class="o">+</span><span class="s2">"';"</span><span class="w">
</span><span class="ln">18 </span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="nb">print</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span><span class="c1">#cur.execute("update s set status=20 where sn='s3';")</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">();</span><span class="w">
</span><span class="ln">23 </span><span class="w"></span><span class="nb">print</span><span class="p">();</span><span class="w">
</span><span class="ln">24 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select * from s;"</span><span class="p">);</span><span class="w">
</span><span class="ln">25 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln">26 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">
</span><span class="ln">27 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">28 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1" step="27" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="43200" data-y="0" data-z="0"><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">psycopg</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s2">"sp"</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">"postgres"</span><span class="p">,</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>        <span class="n">password</span><span class="o">=</span><span class="s2">"12"</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s1">'127.0.0.1'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select sn, avg(qty) from sp group by sn;"</span><span class="p">);</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select sn,qty from sp;"</span><span class="p">)</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="nb">sum</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="n">prev</span><span class="o">=</span><span class="s1">'s00'</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="n">prev</span><span class="p">:</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>    <span class="nb">sum</span><span class="o">+=</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>  <span class="k">else</span><span class="p">:</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>    <span class="k">if</span> <span class="n">prev</span><span class="o">!=</span><span class="s1">'s00'</span><span class="p">:</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>      <span class="nb">print</span><span class="p">(</span><span class="n">prev</span><span class="p">,</span> <span class="nb">sum</span><span class="p">)</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>    <span class="nb">sum</span><span class="o">=</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>    <span class="n">prev</span><span class="o">=</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1" step="28" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="44800" data-y="0" data-z="0"><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="kn">import</span> <span class="nn">psycopg</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="c1">#conn = psycopg.connect(dbname="sp", user="postgres", password="12",host='localhost')</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s2">"sp"</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">"postgres"</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">"12344321"</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s1">'127.0.0.1'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="c1">#cur.execute("SELECT * from s")</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="c1">#print(cur.fetchone())</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="c1">#cur.execute(</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="c1"># "create view vs2 as select sno,pno,sname from s natural join sp;");</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="c1">#cur.execute(</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="c1"># "select * from vs2");</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="c1">#print(cur.fetchone());</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="c1">#for a  in cur.fetchall():</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="c1">#  print(a)</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="c1">#cur.execute(</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="c1">#  "insert into s values ('s6','ali',20,null);")</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span><span class="c1">#conn.commit();</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select * from s;"</span><span class="p">);</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span>  <span class="k">for</span> <span class="n">l1</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span>    <span class="c1">#print(l1,type(l1),end=' ');</span><span class="w">
</span><span class="ln">21 </span><span class="w"></span>    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">int</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span><span class="o">!=</span><span class="nb">float</span> <span class="ow">and</span> <span class="n">l1</span><span class="o">!=</span><span class="kc">None</span><span class="p">:</span><span class="w">
</span><span class="ln">22 </span><span class="w"></span>      <span class="nb">print</span><span class="p">(</span><span class="n">l1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">l1</span><span class="p">),</span><span class="n">end</span><span class="o">=</span><span class="s1">' '</span><span class="p">);</span><span class="w">
</span><span class="ln">23 </span><span class="w"></span>  <span class="nb">print</span><span class="p">()</span><span class="w">
</span><span class="ln">24 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">'''
</span><span class="ln">25 </span><span class="s1">create table if not exists a2 (
</span><span class="ln">26 </span><span class="s1">  sn varchar(10),
</span><span class="ln">27 </span><span class="s1">  sname varchar(25),
</span><span class="ln">28 </span><span class="s1">  primary key(sn)
</span><span class="ln">29 </span><span class="s1">);
</span><span class="ln">30 </span><span class="s1">'''</span><span class="p">)</span><span class="w">
</span><span class="ln">31 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span><span class="w">
</span><span class="ln">32 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="w">
</span><span class="ln">33 </span><span class="w"></span> <span class="s2">"insert into a2 values('s1','ali');"</span><span class="p">)</span><span class="w">
</span><span class="ln">34 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span><span class="w">
</span><span class="ln">35 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"select * from a1;"</span><span class="p">);</span><span class="w">
</span><span class="ln">36 </span><span class="w"></span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span><span class="w">
</span><span class="ln">37 </span><span class="w"></span>  <span class="k">for</span> <span class="n">l1</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span><span class="w">
</span><span class="ln">38 </span><span class="w"></span>    <span class="c1">#print(l1,type(l1),end=' ');</span><span class="w">
</span><span class="ln">39 </span><span class="w"></span>    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">int</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span><span class="o">!=</span><span class="nb">float</span> <span class="ow">and</span> <span class="n">l1</span><span class="o">!=</span><span class="kc">None</span><span class="p">:</span><span class="w">
</span><span class="ln">40 </span><span class="w"></span>      <span class="nb">print</span><span class="p">(</span><span class="n">l1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">l1</span><span class="p">),</span><span class="n">end</span><span class="o">=</span><span class="s1">' '</span><span class="p">);</span><span class="w">
</span><span class="ln">41 </span><span class="w"></span>  <span class="nb">print</span><span class="p">()</span><span class="w">
</span><span class="ln">42 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">43 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div><div class="step step-level-1" step="29" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="46400" data-y="0" data-z="0"><pre class="highlight code python ltr"><span class="ln"> 1 </span><span class="c1">#https://www.psycopg.org/docs/usage.html</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="kn">import</span> <span class="nn">psycopg</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s2">"sp"</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">"postgres"</span><span class="p">,</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>        <span class="n">password</span><span class="o">=</span><span class="s2">"12"</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s1">'127.0.0.1'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="n">sql</span> <span class="o">=</span> <span class="s2">"""
</span><span class="ln"> 7 </span><span class="s2">      CREATE TABLE test (
</span><span class="ln"> 8 </span><span class="s2">        id serial PRIMARY KEY,
</span><span class="ln"> 9 </span><span class="s2">        num integer,
</span><span class="ln">10 </span><span class="s2">        data varchar);
</span><span class="ln">11 </span><span class="s2">      """</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="n">sql</span> <span class="o">=</span> <span class="s2">"INSERT INTO test (num, data) VALUES (</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)"</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s2">"abc'def"</span><span class="p">))</span><span class="w">
</span><span class="ln">15 </span><span class="w">
</span><span class="ln">16 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"SELECT * FROM test;"</span><span class="p">)</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div></div><div id="slide-number" class="slide-number">
         1
      </div><script type="text/javascript" src="js/impress.js"></script><script type="text/javascript" src="js/gotoSlide.js"></script><script type="text/javascript" src="js/hovercraft.js"></script><script type="text/javascript">
      document.getElementById("impress").addEventListener("impress:stepenter", update_slide_number, false);
    </script></body></html>