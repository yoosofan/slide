<html xmlns="http://www.w3.org/1999/xhtml"><head><title></title><meta charset="UTF-8"><meta name="generator" content="bildumilo 1.0 https://github.com/yoosofan/bildumilo"><link rel="stylesheet" href="css/hovercraft.css" media="all"><link rel="stylesheet" href="css/highlight.css" media="all"><link rel="stylesheet" href="css/style.css" media="all"><script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        showProcessingMessages: false,
        messageStyle: "none",
        TeX : { extensions : ['color.js'] }
      });
    </script></head><body class="impress-not-supported"><div id="impress" data-width="1024" data-height="768" data-transition-duration="1000"><div class="step step-level-1" step="0" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="0" data-y="0" data-z="0"><h1 id="database-course">Database Course</h1><p>Ahmad Yoosofan</p><p>SQL 3</p><p>University of Kashan</p></div><div class="step step-level-1 t2c" step="1" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="1600" data-y="0" data-z="0"><h1 id="update-i">Update(I)</h1><pre class="highlight code sql"><span class="k">update</span><span class="w"> </span><span class="n">P</span><span class="w">
</span><span class="k">set</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">pn</span><span class="o">=</span><span class="s1">'P6'</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">update</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">set</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'London'</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">update</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span><span class="k">set</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">LOWER</span><span class="p">(</span><span class="w">
    </span><span class="n">firstname</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="ss">"."</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">lastname</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="ss">"@chinookcorp.com"</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">update</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span><span class="k">set</span><span class="w"> </span><span class="n">lastname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Smith'</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">employeeid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="2" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="3200" data-y="0" data-z="0"><h1 id="update-ii">Update(II)</h1><pre class="highlight code sql"><span class="k">update</span><span class="w"> </span><span class="n">tableA</span><span class="w">
</span><span class="k">set</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'abcd'</span><span class="p">,</span><span class="w">
  </span><span class="k">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">case</span><span class="w">
    </span><span class="k">when</span><span class="w"> </span><span class="k">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'abc'</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s1">'abcd'</span><span class="w">
    </span><span class="k">else</span><span class="w"> </span><span class="k">C</span><span class="w">
  </span><span class="k">end</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">

</span><span class="c1">-- https://stackoverflow.com/a/17081004/886607
</span><span class="k">update</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">set</span><span class="w">
  </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">case</span><span class="w">
    </span><span class="k">when</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'london'</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="k">else</span><span class="w"> </span><span class="n">status</span><span class="w">
  </span><span class="k">end</span></pre><pre class="highlight code sql substep"><span class="k">update</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">set</span><span class="w">
  </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">case</span><span class="w">
  </span><span class="k">when</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'London'</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="k">when</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="w">
  </span><span class="k">else</span><span class="w"> </span><span class="n">status</span><span class="w">
</span><span class="k">end</span></pre><pre class="highlight code sql substep"><span class="k">update</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">set</span><span class="w">
  </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">case</span><span class="w">
    </span><span class="k">when</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'London'</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">4</span><span class="w">
    </span><span class="k">when</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">3</span><span class="w">
    </span><span class="k">else</span><span class="w"> </span><span class="n">status</span><span class="w">
  </span><span class="k">end</span></pre></div><div class="step step-level-1" step="3" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="4800" data-y="0" data-z="0"><h1 id="condition-on-delete">Condition on delete</h1><pre class="highlight code sql substep"><span class="w">  </span><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">qty</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="w">
      </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w">
      </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
    </span><span class="p">)</span><span class="w">
  </span><span class="p">;</span></pre></div><div class="step step-level-1" step="4" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="6400" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">update</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">S</span><span class="w">
</span><span class="k">set</span><span class="w"> </span><span class="n">tot_cred</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">credits</span><span class="p">)</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">takes</span><span class="p">,</span><span class="w"> </span><span class="n">course</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">takes</span><span class="p">.</span><span class="n">course_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">course</span><span class="p">.</span><span class="n">course_id</span><span class="w">
    </span><span class="k">and</span><span class="w"> </span><span class="n">S</span><span class="p">.</span><span class="n">ID</span><span class="o">=</span><span class="w"> </span><span class="n">takes</span><span class="p">.</span><span class="n">ID</span><span class="w"> </span><span class="k">and</span><span class="w">
    </span><span class="n">takes</span><span class="p">.</span><span class="n">grade</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="s1">'F'</span><span class="w"> </span><span class="k">and</span><span class="w">
    </span><span class="n">takes</span><span class="p">.</span><span class="n">grade</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">case</span><span class="w">
  </span><span class="k">when</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">credits</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">credits</span><span class="p">)</span><span class="w">
  </span><span class="k">else</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="k">end</span></pre></div><div class="step step-level-1 t2c" step="5" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="8000" data-y="0" data-z="0"><h1 id="with-i">with(I)</h1><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">averagev</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">temp</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">temp</span><span class="p">.</span><span class="n">averagev</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">with</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="p">(</span><span class="n">averagev</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">temp</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">averagev</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="6" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="9600" data-y="0" data-z="0"><h1 id="with-ii">with(II)</h1><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">averagev</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">temp1</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
    </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">temp2</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">temp2</span><span class="p">.</span><span class="n">total</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">temp1</span><span class="p">.</span><span class="n">averagev</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">with</span><span class="w"> </span><span class="n">temp1</span><span class="p">(</span><span class="n">averagev</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="p">),</span><span class="w">
  </span><span class="n">temp2</span><span class="p">(</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">total</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">qty</span><span class="p">)</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
    </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">pn</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">temp1</span><span class="p">,</span><span class="w"> </span><span class="n">temp2</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">temp2</span><span class="p">.</span><span class="n">total</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">temp1</span><span class="p">.</span><span class="n">averagev</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="7" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="11200" data-y="0" data-z="0"><h1 id="with-iii">with(III)</h1><pre class="highlight code sql"><span class="k">with</span><span class="w"> </span><span class="n">dept_total</span><span class="w"> </span><span class="p">(</span><span class="n">dept_name</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">dept_name</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">instructor</span><span class="w">
    </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">dept_name</span><span class="w">
  </span><span class="p">),</span><span class="w">
  </span><span class="n">dept_total_avg</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">dept_total</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="n">dept_name</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">dept_total</span><span class="p">,</span><span class="w"> </span><span class="n">dept_total_avg</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">dept_total</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">dept_total_avg</span><span class="p">.</span><span class="n">value</span></pre></div><div class="step step-level-1" step="8" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="12800" data-y="0" data-z="0"><h1 id="with-diagram">With Diagram</h1><svg class="rrdiagram" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="453" height="78" viewbox="0 0 453 78"><path class="connector" d="M0 50h15m50 0h30m88 0h20m-123 0q5 0 5 5v8q0 5 5 5h98q5 0 5-5v-8q0-5 5-5m5 0h30m-5 0q-5 0-5-5v-19q0-5 5-5h85m24 0h86q5 0 5 5v19q0 5-5 5m-5 0h35"></path><polygon points="0,57 5,50 0,43"></polygon><rect class="literal" x="15" y="34" width="50" height="24" rx="7"></rect><text class="text" x="25" y="50">WITH</text><rect class="literal" x="95" y="34" width="88" height="24" rx="7"></rect><text class="text" x="105" y="50">RECURSIVE</text><rect class="literal" x="313" y="5" width="24" height="24" rx="7"></rect><text class="text" x="323" y="21">,</text><a xlink:href="#common-table-expression"><rect class="rule" x="233" y="34" width="185" height="24"></rect><text class="text" x="243" y="50">common_table_expression</text></a><polygon points="449,57 453,57 453,43 449,43"></polygon></svg><svg class="rrdiagram" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="608" height="179" viewbox="0 0 608 179"><path class="connector" d="M0 50h15m81 0h30m25 0h30m-5 0q-5 0-5-5v-19q0-5 5-5h46m24 0h46q5 0 5 5v19q0 5-5 5m-5 0h30m25 0h20m-251 0q5 0 5 5v8q0 5 5 5h226q5 0 5-5v-8q0-5 5-5m5 0h10m36 0h10m25 0h30m58 0h27m-95 24q0 5 5 5h5m60 0h10q5 0 5-5m-85 29q0 5 5 5h5m56 0h14q5 0 5-5m-85 29q0 5 5 5h5m65 0h5q5 0 5-5m-90-82q5 0 5 5v106q0 5 5 5h5m60 0h10q5 0 5-5v-106q0-5 5-5m5 0h10m25 0h15"></path><polygon points="0,57 5,50 0,43" style="fill:black;stroke-width:0"></polygon><a xlink:href="../../../syntax_resources/grammar_diagrams#cte-name"><rect class="rule" x="15" y="34" width="81" height="24"></rect><text class="text" x="25" y="50">cte_name</text></a><rect class="literal" x="126" y="34" width="25" height="24" rx="7"></rect><text class="text" x="136" y="50">(</text><rect class="literal" x="222" y="5" width="24" height="24" rx="7"></rect><text class="text" x="232" y="21">,</text><a xlink:href="../../../syntax_resources/grammar_diagrams#column-name"><rect class="rule" x="181" y="34" width="106" height="24"></rect><text class="text" x="191" y="50">column_name</text></a><rect class="literal" x="317" y="34" width="25" height="24" rx="7"></rect><text class="text" x="327" y="50">)</text><rect class="literal" x="372" y="34" width="36" height="24" rx="7"></rect><text class="text" x="382" y="50">AS</text><rect class="literal" x="418" y="34" width="25" height="24" rx="7"></rect><text class="text" x="428" y="50">(</text><a xlink:href="../../../syntax_resources/grammar_diagrams#select"><rect class="rule" x="473" y="34" width="58" height="24"></rect><text class="text" x="483" y="50">select</text></a><a xlink:href="../../../syntax_resources/grammar_diagrams#values"><rect class="rule" x="473" y="63" width="60" height="24"></rect><text class="text" x="483" y="79">values</text></a><a xlink:href="../../../syntax_resources/grammar_diagrams#insert"><rect class="rule" x="473" y="92" width="56" height="24"></rect><text class="text" x="483" y="108">insert</text></a><a xlink:href="../../../syntax_resources/grammar_diagrams#update"><rect class="rule" x="473" y="121" width="65" height="24"></rect><text class="text" x="483" y="137">update</text></a><a xlink:href="../../../syntax_resources/grammar_diagrams#delete"><rect class="rule" x="473" y="150" width="60" height="24"></rect><text class="text" x="483" y="166">delete</text></a><rect class="literal" x="568" y="34" width="25" height="24" rx="7"></rect><text class="text" x="578" y="50">)</text><polygon points="604,57 608,57 608,43 604,43" style="fill:black;stroke-width:0"></polygon></svg></div><div class="step step-level-1 t2c" step="9" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="14400" data-y="0" data-z="0"><h1 id="unknown">Unknown</h1><ul><li>3 = 2 =&gt; FALSE</li><li>3 = 3 =&gt; TRUE</li><li>NULL = 3 =&gt; UNKNOWN</li><li>3 = NULL =&gt; UNKNOWN</li><li>NULL = NULL =&gt; UNKNOWN</li><li>NULL &lt;&gt; 1 =&gt; UNKNOWN</li><li>NULL &gt; 1 =&gt; UNKNOWN</li></ul><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="c1">-- always empty
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="w">
</span><span class="p">;</span><span class="w">

</span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w">
</span><span class="p">;</span><span class="w">

</span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="n">expression</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">TRUE</span><span class="w">
</span><span class="n">expression</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">TRUE</span><span class="w">
</span><span class="n">expression</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">FALSE</span><span class="w">
</span><span class="n">expression</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">FALSE</span><span class="w">
</span><span class="n">expression</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">UNKNOWN</span><span class="w">
</span><span class="n">expression</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">UNKNOWN</span></pre></div><div class="step step-level-1" step="10" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="16000" data-y="0" data-z="0"><h1 id="three-valued-logic">Three-valued logic</h1><ul><li>Boolean logic</li><li>Kleene and Priest logics</li></ul><p>(F: false; U: unknown; T: true)</p><div class="yoo-grid-auto-flow-column"><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>A</p></th><th><p>~A</p></th></tr></thead><tbody><tr><td><p>F</p></td><td><p>T</p></td></tr><tr><td><p>T</p></td><td><p>F</p></td></tr><tr><td><p>U</p></td><td><p>U</p></td></tr></tbody></table><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th colspan="2" rowspan="2"><p>A and B</p></th><th colspan="3"><p>B</p></th></tr><tr><th><p>T</p></th><th><p>F</p></th><th><p>U</p></th></tr></thead><tbody><tr><td rowspan="3"><p>A</p></td><td><p>T</p></td><td><p>T</p></td><td><p>F</p></td><td><p>U</p></td></tr><tr><td><p>F</p></td><td><p>F</p></td><td><p>F</p></td><td><p>F</p></td></tr><tr><td><p>U</p></td><td><p>U</p></td><td><p>F</p></td><td><p>U</p></td></tr></tbody></table><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th colspan="2" rowspan="2"><p>A or B</p></th><th colspan="3"><p>B</p></th></tr><tr><th><p>T</p></th><th><p>F</p></th><th><p>U</p></th></tr></thead><tbody><tr><td rowspan="3"><p>A</p></td><td><p>T</p></td><td><p>T</p></td><td><p>T</p></td><td><p>T</p></td></tr><tr><td><p>F</p></td><td><p>T</p></td><td><p>F</p></td><td><p>U</p></td></tr><tr><td><p>U</p></td><td><p>T</p></td><td><p>U</p></td><td><p>U</p></td></tr></tbody></table></div></div><div class="step step-level-1" step="11" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="17600" data-y="0" data-z="0"><pre class="highlight code sql"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">List_of_tables</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">unknown</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">List_of_tables</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">unknown</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">List_of_tables</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">unknown</span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">List_of_tables</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">unknown</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">unknown</span><span class="p">;</span></pre><p class="substep">Always True</p></div><div class="step step-level-1" step="12" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="19200" data-y="0" data-z="0"><h1 id="is-not-unknown-is-unknown">"is not unknown" , "is unknown"</h1><ol><li class="substep">Always True or False</li><li class="substep">It cannot be "unknown"</li><li class="substep">The meaning of "null" and "unknown" is different</li><li class="substep">The usages of "null" and "unknown" is different</li></ol></div><div class="step step-level-1" step="13" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="20800" data-y="0" data-z="0"><h1 id="the-final-result-of-an-uknown-condition-is-false">The final result of an uknown condition is False</h1><p class="substep rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1783; &#1583;&#1575;&#1585;&#1606;&#1583;.</p><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">17</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="14" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="22400" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1570;&#1606;&#1607;&#1575; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1784; &#1575;&#1587;&#1578; &#1608; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1583;&#1585; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1575;&#1587;&#1578;.</p><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">17</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">17</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="p">;</span></pre></div><div class="step step-level-1" step="15" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="24000" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1570;&#1606;&#1607;&#1575; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1784; &#1575;&#1587;&#1578; &#1740;&#1575; &#1608;&#1586;&#1606;&#1740; &#1606;&#1583;&#1575;&#1585;&#1606;&#1583; &#1608; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1583;&#1585; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1575;&#1587;&#1578;.</p><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="n">weight</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="p">;</span></pre></div><div class="step step-level-1" step="16" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="25600" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1570;&#1606;&#1607;&#1575; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1784; &#1575;&#1587;&#1578; &#1740;&#1575; &#1608;&#1586;&#1606;&#1740; &#1606;&#1583;&#1575;&#1585;&#1606;&#1583; &#1608; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1583;&#1585; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1575;&#1587;&#1578; &#1608;&#1604;&#1740; &#1575;&#1711;&#1585; &#1588;&#1607;&#1585; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607; &#1608;&#1575;&#1585;&#1583; &#1606;&#1588;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583; &#1608;&#1586;&#1606; &#1570;&#1606; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1779;&#1780; &#1576;&#1575;&#1588;&#1583;.</p><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w"> </span><span class="c1">-- incorrect
</span><span class="ln">2 </span><span class="c1"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">17</span><span class="p">;</span></pre></div><div class="step step-level-1" step="17" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="27200" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">nullif</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">;</span><span class="w"> </span><span class="c1">-- returns the first value,
-- unless it's equal to the second
-- in which case it returns NULL.
-- It is equivalent to this CASE statement:
-- CASE WHEN A &lt;&gt; B OR B IS NULL THEN A END
-- The NULLIF() function returns NULL
-- if two expressions are equal, otherwise
-- it returns the first expression.</span></pre></div><div class="step step-level-1" step="18" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="28800" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">SELECT</span><span class="p">(</span><span class="w">
  </span><span class="k">SUM</span><span class="w"> </span><span class="p">(</span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">gender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">ELSE</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">END</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w">
    </span><span class="k">SUM</span><span class="w"> </span><span class="p">(</span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">gender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">ELSE</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">END</span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="ss">"Male/Female ratio"</span><span class="w">
</span><span class="k">FROM</span><span class="w"> </span><span class="n">members</span><span class="p">;</span><span class="w">


</span><span class="c1">-- ERROR:  division by zero
-- The reason is that the number of females is zero now.
-- To prevent this division by zero error, you can use
-- the NULLIF function as follows:
</span><span class="w">
 </span><span class="k">SELECT</span><span class="w"> </span><span class="p">(</span><span class="w">
     </span><span class="k">SUM</span><span class="w"> </span><span class="p">(</span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">gender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">ELSE</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">END</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w">
       </span><span class="k">NULLIF</span><span class="w"> </span><span class="p">(</span><span class="w">
        </span><span class="k">SUM</span><span class="w"> </span><span class="p">(</span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">gender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">ELSE</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">END</span><span class="p">),</span><span class="w">
        </span><span class="mi">0</span><span class="w">
     </span><span class="p">)</span><span class="w">
   </span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="ss">"Male/Female ratio"</span><span class="w">
 </span><span class="k">FROM</span><span class="w"> </span><span class="n">members</span><span class="p">;</span></pre></div><div class="step step-level-1" step="19" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="30400" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">SELECT</span><span class="w"> </span><span class="n">product</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">price</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">COALESCE</span><span class="p">(</span><span class="n">discount</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">net_price</span><span class="w">
</span><span class="k">FROM</span><span class="w"> </span><span class="n">items</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">SELECT</span><span class="w"> </span><span class="n">product</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="n">price</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">discount</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">ELSE</span><span class="w"> </span><span class="n">discount</span><span class="w"> </span><span class="k">END</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">net_price</span><span class="w">
</span><span class="k">FROM</span><span class="w"> </span><span class="n">items</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">SELECT</span><span class="w"> </span><span class="k">CASE</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="s1">'Is Null'</span><span class="w">  </span><span class="c1">-- This will never be returned
</span><span class="w">  </span><span class="k">WHEN</span><span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="s1">'Is Zero'</span><span class="w">  </span><span class="c1">-- This will be returned when i = 0
</span><span class="w">  </span><span class="k">WHEN</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="s1">'Is One'</span><span class="w">   </span><span class="c1">-- This will be returned when i = 1
</span><span class="w">  </span><span class="k">END</span><span class="w">
</span><span class="k">FROM</span><span class="w"> </span><span class="n">t</span><span class="p">;</span></pre></div><div class="step step-level-1" step="20" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="32000" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1607;&#1605;&#1607;&#1620; &#1602;&#1591;&#1593;&#1575;&#1578; &#1585;&#1575; &#1607;&#1605;&#1585;&#1575;&#1607; &#1576;&#1575; &#1580;&#1605;&#1593; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1570;&#1606;&#1607;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1583;&#1585; &#1589;&#1608;&#1585;&#1578;&#1740; &#1705;&#1607; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1607; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1778;&#1776; &#1576;&#1575;&#1588;&#1583; &#1740;&#1575; &#1575;&#1740;&#1606; &#1705;&#1607; &#1608;&#1586;&#1606;&#1740; &#1606;&#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1583; &#1576;&#1585;&#1575;&#1740; &#1575;&#1740;&#1606; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575; &#1580;&#1605;&#1593; &#1593;&#1585;&#1590;&#1607; &#1583;&#1585; &#1606;&#1592;&#1585; &#1711;&#1585;&#1601;&#1578;&#1607; &#1588;&#1608;&#1583; &#1608;&#1711;&#1585;&#1606;&#1607; &#1605;&#1575;&#1606;&#1606;&#1583; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740; &#1593;&#1585;&#1590;&#1607; &#1606;&#1588;&#1583;&#1607;&#1548; &#1580;&#1605;&#1593; &#1593;&#1585;&#1590;&#1607;&#8204;&#1607;&#1575;&#1740; &#1570;&#1606;&#1607;&#1575; &#1589;&#1601;&#1585; &#1583;&#1585; &#1606;&#1592;&#1585; &#1711;&#1585;&#1601;&#1578;&#1607; &#1588;&#1608;&#1583;.</p><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">17</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="p">;</span></pre></div><div class="step step-level-1" step="21" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="33600" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1570;&#1606;&#1607;&#1575; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1784; &#1576;&#1575;&#1588;&#1583; &#1608; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1576;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1778;&#1776; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;.</p><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">sn</span><span class="p">)</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">17</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="p">;</span></pre></div><div class="step step-level-1" step="22" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="35200" data-y="0" data-z="0"><h1 id="only-conditions-with-known-values">Only Conditions with Known Values</h1><h2 id="pr-is-a-large-combinations-of-conditions">Pr : is a large combinations of conditions</h2><pre class="highlight code sql substep"><span class="ln">1 </span><span class="p">((</span><span class="n">pr</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">unknown</span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">pr</span><span class="w"> </span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="ln">1 </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">List_of_tables</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">unknown</span><span class="p">;</span></pre></div><div class="step step-level-1" step="23" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="36800" data-y="0" data-z="0"><h1 id="check">Check</h1><pre class="highlight code sql"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="n">a</span><span class="w"> </span><span class="nb">NUMERIC</span><span class="w"> </span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w">
  </span><span class="n">b</span><span class="w"> </span><span class="nb">NUMERIC</span><span class="w"> </span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w">
  </span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre></div><div class="step step-level-1" step="24" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="38400" data-y="0" data-z="0"><pre class="highlight code sql"><span class="ln"> 1 </span><span class="k">create</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">sp2</span><span class="p">;</span><span class="w">
</span><span class="ln"> 2 </span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">  </span><span class="n">sn</span><span class="w">      </span><span class="nb">char</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
</span><span class="ln"> 5 </span><span class="w">  </span><span class="n">sname</span><span class="w">   </span><span class="nb">char</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
</span><span class="ln"> 6 </span><span class="w">  </span><span class="n">status</span><span class="w">  </span><span class="nb">int</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">10</span><span class="w">  </span><span class="k">check</span><span class="p">(</span><span class="n">status</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">10</span><span class="p">),</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">  </span><span class="n">city</span><span class="w">    </span><span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s1">'Shiraz'</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="p">);</span><span class="w">
</span><span class="ln"> 9 </span><span class="w">
</span><span class="ln">10 </span><span class="w"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="ln">11 </span><span class="w">  </span><span class="n">pn</span><span class="w">     </span><span class="nb">char</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
</span><span class="ln">12 </span><span class="w">  </span><span class="n">pname</span><span class="w">  </span><span class="nb">char</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
</span><span class="ln">13 </span><span class="w">  </span><span class="n">color</span><span class="w">  </span><span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w">
</span><span class="ln">14 </span><span class="w">  </span><span class="n">weight</span><span class="w"> </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">check</span><span class="p">(</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">90000</span><span class="p">),</span><span class="w">
</span><span class="ln">15 </span><span class="w">  </span><span class="n">city</span><span class="w">   </span><span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span><span class="p">);</span><span class="w">
</span><span class="ln">17 </span><span class="w">
</span><span class="ln">18 </span><span class="w"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">sp</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="ln">19 </span><span class="w">   </span><span class="n">sn</span><span class="w">    </span><span class="nb">char</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="k">cascade</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">cascade</span><span class="p">,</span><span class="w">
</span><span class="ln">20 </span><span class="w">   </span><span class="n">pn</span><span class="w">    </span><span class="nb">char</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="k">cascade</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">cascade</span><span class="p">,</span><span class="w">
</span><span class="ln">21 </span><span class="w">   </span><span class="n">qty</span><span class="w">   </span><span class="nb">int</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">check</span><span class="p">(</span><span class="n">qty</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w">
</span><span class="ln">22 </span><span class="w">   </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="ln">23 </span><span class="w"></span><span class="p">);</span></pre></div><div class="step step-level-1" step="25" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="40000" data-y="0" data-z="0"><h1 id="foreign-key-error">Foreign Key Error</h1><pre class="highlight code sql"><span class="ln"> 1 </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="w">
</span><span class="ln"> 2 </span><span class="w">  </span><span class="ss">"DN"</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
</span><span class="ln"> 3 </span><span class="w">  </span><span class="ss">"DeptName"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s1">''</span><span class="p">,</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">  </span><span class="ss">"MgrSSN"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="ss">"SSN"</span><span class="p">)</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="p">);</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">  </span><span class="ss">"SSN"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">  </span><span class="ss">"name"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
</span><span class="ln"> 9 </span><span class="w">  </span><span class="ss">"salary"</span><span class="w"> </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="ln">10 </span><span class="w">  </span><span class="ss">"Dn"</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">)</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span><span class="p">);</span><span class="w">
</span><span class="ln">12 </span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">,</span><span class="w"> </span><span class="ss">"DeptName"</span><span class="p">,</span><span class="w"> </span><span class="ss">"MgrSSN"</span><span class="p">)</span><span class="w">
</span><span class="ln">14 </span><span class="w">    </span><span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">'computer'</span><span class="p">,</span><span class="w"> </span><span class="s1">''</span><span class="p">);</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">,</span><span class="w"> </span><span class="ss">"DeptName"</span><span class="p">,</span><span class="w"> </span><span class="ss">"MgrSSN"</span><span class="p">)</span><span class="w">
</span><span class="ln">16 </span><span class="w">    </span><span class="k">values</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s1">'Chemistry'</span><span class="p">,</span><span class="w"> </span><span class="s1">''</span><span class="p">);</span></pre><pre class="highlight code sh">--<span class="w"> </span>SQLite<span class="w">
</span>Result:<span class="w"> </span>FOREIGN<span class="w"> </span>KEY<span class="w"> </span>constraint<span class="w"> </span>failed<span class="w">
</span>At<span class="w"> </span>line<span class="w"> </span><span class="m">14</span>:<span class="w">
</span>insert<span class="w"> </span>into<span class="w"> </span><span class="s2">"Department"</span><span class="o">(</span><span class="s2">"DN"</span>,<span class="w"> </span><span class="s2">"DeptName"</span>,<span class="w"> </span><span class="s2">"MgrSSN"</span><span class="o">)</span><span class="w">
    </span>values<span class="o">(</span><span class="m">1</span>,<span class="w"> </span><span class="s1">'computer'</span>,<span class="w"> </span><span class="s1">''</span><span class="o">)</span><span class="p">;</span></pre></div><div class="step step-level-1" step="26" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="41600" data-y="0" data-z="0"><h1 id="foreign-key-error-postgresql">Foreign Key Error(PostgreSQL)</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="w">
  </span><span class="ss">"DN"</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="ss">"DeptName"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s1">''</span><span class="p">,</span><span class="w">
  </span><span class="ss">"MgrSSN"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="ss">"SSN"</span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sh">ERROR:<span class="w">  </span>relation<span class="w"> </span><span class="s2">"Employee"</span><span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>exist</pre><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="w">
  </span><span class="ss">"SSN"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="ss">"name"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="ss">"salary"</span><span class="w"> </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="ss">"Dn"</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sh">ERROR:<span class="w">  </span>relation<span class="w"> </span><span class="s2">"Department"</span><span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>exist</pre></div><div class="step step-level-1" step="27" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="43200" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="w">
  </span><span class="ss">"DN"</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="ss">"DeptName"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s1">''</span><span class="p">,</span><span class="w">
  </span><span class="ss">"MgrSSN"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w">
</span><span class="p">);</span><span class="w">

</span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="w">
  </span><span class="ss">"SSN"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="ss">"name"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="ss">"salary"</span><span class="w"> </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="ss">"Dn"</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">,</span><span class="w"> </span><span class="ss">"DeptName"</span><span class="p">,</span><span class="w"> </span><span class="ss">"MgrSSN"</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">'computer'</span><span class="p">,</span><span class="w"> </span><span class="s1">''</span><span class="p">);</span><span class="w">
</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">,</span><span class="w"> </span><span class="ss">"DeptName"</span><span class="p">,</span><span class="w"> </span><span class="ss">"MgrSSN"</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s1">'Chemistry'</span><span class="p">,</span><span class="w"> </span><span class="s1">''</span><span class="p">);</span><span class="w">

</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="ss">"SSN"</span><span class="p">,</span><span class="w"> </span><span class="ss">"name"</span><span class="p">,</span><span class="w"> </span><span class="ss">"salary"</span><span class="p">,</span><span class="w"> </span><span class="ss">"Dn"</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="s1">'e2'</span><span class="p">,</span><span class="w"> </span><span class="s1">'kamran'</span><span class="p">,</span><span class="w"> </span><span class="mi">1200</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">

</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="ss">"SSN"</span><span class="p">,</span><span class="w"> </span><span class="ss">"name"</span><span class="p">,</span><span class="w"> </span><span class="ss">"salary"</span><span class="p">,</span><span class="w"> </span><span class="ss">"Dn"</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="s1">'e10'</span><span class="p">,</span><span class="w"> </span><span class="s1">'ali'</span><span class="p">,</span><span class="w"> </span><span class="mi">1200</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span></pre></div><div class="step step-level-1" step="28" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="44800" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">update</span><span class="w"> </span><span class="ss">"Department"</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="ss">"MgrSSN"</span><span class="o">=</span><span class="s1">'e2'</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="ss">"DN"</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="w">
</span><span class="k">update</span><span class="w"> </span><span class="ss">"Department"</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="ss">"MgrSSN"</span><span class="o">=</span><span class="s1">'e10'</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="ss">"DN"</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span><span class="w">

</span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Department"</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">constraint</span><span class="w"> </span><span class="ss">"departmentManager"</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="ss">"MgrSSN"</span><span class="p">)</span><span class="w">
  </span><span class="k">references</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="ss">"SSN"</span><span class="p">)</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="k">cascade</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">action</span><span class="p">;</span><span class="w">

</span><span class="k">update</span><span class="w"> </span><span class="ss">"Employee"</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="ss">"Dn"</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="ss">"SSN"</span><span class="o">=</span><span class="s1">'e2'</span><span class="p">;</span><span class="w">
</span><span class="k">update</span><span class="w"> </span><span class="ss">"Employee"</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="ss">"Dn"</span><span class="o">=</span><span class="mi">2</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="ss">"SSN"</span><span class="o">=</span><span class="s1">'e10'</span><span class="p">;</span><span class="w">

</span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Employee"</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">constraint</span><span class="w"> </span><span class="ss">"employeeDepartment"</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="ss">"Dn"</span><span class="p">)</span><span class="w">
  </span><span class="k">references</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">)</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="k">cascade</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">action</span><span class="p">;</span><span class="w">
</span><span class="c1">-- set default
-- set null</span></pre></div><div class="step step-level-1" step="29" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="46400" data-y="0" data-z="0"><h1 id="sqlite-is-incomplete">SQLite is incomplete</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tte1</span><span class="p">(</span><span class="w">
  </span><span class="n">myid</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="n">salary</span><span class="w"> </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">check</span><span class="p">(</span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span><span class="w">
  </span><span class="n">name1</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="n">dept2</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">),</span><span class="w">
  </span><span class="n">fee</span><span class="w">   </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="c1">--check(salary - fee &gt; 80)
</span><span class="w">  </span><span class="k">check</span><span class="p">(</span><span class="n">salary</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">fee</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">80</span><span class="p">)</span><span class="w">
</span><span class="p">);</span><span class="w">

</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tte1</span><span class="p">(</span><span class="n">myid</span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="p">,</span><span class="w"> </span><span class="n">name1</span><span class="p">,</span><span class="w"> </span><span class="n">dept2</span><span class="p">,</span><span class="w"> </span><span class="n">fee</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="mi">31</span><span class="p">,</span><span class="w"> </span><span class="mi">1200</span><span class="p">,</span><span class="w"> </span><span class="s1">'&#1607;&#1608;&#1588;&#1606;&#1711;'</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span></pre><pre class="highlight code sh">Result:<span class="w"> </span>FOREIGN<span class="w"> </span>KEY<span class="w"> </span>constraint<span class="w"> </span>failed<span class="w">
</span>At<span class="w"> </span>line<span class="w"> </span><span class="m">10</span>:<span class="w">
</span>insert<span class="w"> </span>into<span class="w"> </span>tte1<span class="o">(</span>myid,<span class="w"> </span>salary,<span class="w"> </span>name1,<span class="w"> </span>dept2,<span class="w"> </span>fee<span class="o">)</span><span class="w">
    </span>values<span class="o">(</span><span class="m">31</span>,<span class="w"> </span><span class="m">1200</span>,<span class="w"> </span><span class="s1">'&#1607;&#1608;&#1588;&#1606;&#1711;'</span>,<span class="w"> </span><span class="m">1</span>,<span class="w"> </span><span class="m">200</span><span class="o">)</span><span class="p">;</span></pre></div><div class="step step-level-1" step="30" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="48000" data-y="0" data-z="0"><h1 id="same-sample-in-postgresql">Same Sample in PostgreSQL</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tte1</span><span class="p">(</span><span class="w">
  </span><span class="n">myid</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="n">salary</span><span class="w"> </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">check</span><span class="p">(</span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span><span class="w">
  </span><span class="n">name1</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="n">dept2</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">),</span><span class="w">
  </span><span class="n">fee</span><span class="w">   </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="c1">--check(salary - fee &gt; 80)
</span><span class="w">  </span><span class="k">check</span><span class="p">(</span><span class="n">salary</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">fee</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">80</span><span class="p">)</span><span class="w">
</span><span class="p">);</span><span class="w">

</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tte1</span><span class="p">(</span><span class="n">myid</span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="p">,</span><span class="w"> </span><span class="n">name1</span><span class="p">,</span><span class="w"> </span><span class="n">dept2</span><span class="p">,</span><span class="w"> </span><span class="n">fee</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="mi">31</span><span class="p">,</span><span class="w"> </span><span class="mi">1200</span><span class="p">,</span><span class="w"> </span><span class="s1">'&#1607;&#1608;&#1588;&#1606;&#1711;'</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span></pre><pre class="highlight code sh">INSERT<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span></pre></div><div class="step step-level-1" step="31" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="49600" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="w">
  </span><span class="ss">"DN"</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="ss">"DeptName"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s1">''</span><span class="p">,</span><span class="w">
  </span><span class="ss">"MgrSSN"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w">
</span><span class="p">);</span><span class="w">

</span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="w">
  </span><span class="ss">"SSN"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="ss">"name"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="ss">"salary"</span><span class="w"> </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="ss">"Dn"</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">,</span><span class="w"> </span><span class="ss">"DeptName"</span><span class="p">,</span><span class="w"> </span><span class="ss">"MgrSSN"</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">'computer'</span><span class="p">,</span><span class="w"> </span><span class="s1">''</span><span class="p">);</span><span class="w">
</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"Department"</span><span class="p">(</span><span class="ss">"DN"</span><span class="p">,</span><span class="w"> </span><span class="ss">"DeptName"</span><span class="p">,</span><span class="w"> </span><span class="ss">"MgrSSN"</span><span class="p">)</span><span class="w">
  </span><span class="k">values</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s1">'Chemistry'</span><span class="p">,</span><span class="w"> </span><span class="s1">'32'</span><span class="p">);</span><span class="w">

</span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"Department"</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">constraint</span><span class="w"> </span><span class="ss">"departmentManager"</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="ss">"MgrSSN"</span><span class="p">)</span><span class="w">
  </span><span class="k">references</span><span class="w"> </span><span class="ss">"Employee"</span><span class="p">(</span><span class="ss">"SSN"</span><span class="p">)</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="k">cascade</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">action</span><span class="p">;</span></pre><pre class="highlight code sh">ERROR:<span class="w">  </span>insert<span class="w"> </span>or<span class="w"> </span>update<span class="w"> </span>on<span class="w"> </span>table<span class="w"> </span><span class="s2">"Department"</span><span class="w"> </span>violates<span class="w"> </span>foreign<span class="w"> </span>key<span class="w"> </span>constraint<span class="w"> </span><span class="s2">"departmentManager"</span><span class="w">
</span>DETAIL:<span class="w">  </span>Key<span class="w"> </span><span class="o">(</span>MgrSSN<span class="o">)=(</span><span class="m">32</span><span class="o">)</span><span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>present<span class="w"> </span><span class="k">in</span><span class="w"> </span>table<span class="w"> </span><span class="s2">"Employee"</span>.</pre></div><div class="step step-level-1" step="32" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="51200" data-y="0" data-z="0"><h1 id="no-action-restrict-set-null-set-default-or-cascade">no action, restrict, set null, set default or cascade</h1><ol><li>no action</li><li>restrict</li><li>set null</li><li>set default</li><li>cascade</li></ol></div><div class="step step-level-1" step="33" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="52800" data-y="0" data-z="0"><h1 id="constraint-i">Constraint(I)</h1><ul><li>Primary key</li><li>not null (No field part of primary key can be null)</li><li>foreign keys</li><li>unique</li></ul></div><div class="step step-level-1" step="34" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="54400" data-y="0" data-z="0"><h1 id="pragma-foreign-keys">pragma foreign_keys</h1><pre class="highlight code sql"><span class="n">pragma</span><span class="w"> </span><span class="n">foreign_keys</span><span class="o">=</span><span class="k">off</span><span class="p">;</span><span class="w">

</span><span class="n">pragma</span><span class="w"> </span><span class="n">foreign_keys</span><span class="o">=</span><span class="k">on</span><span class="p">;</span><span class="w">

</span><span class="n">pragma</span><span class="w"> </span><span class="n">foreign_keys</span><span class="o">=</span><span class="k">off</span><span class="p">;</span><span class="w">
</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"spj"</span><span class="p">(</span><span class="ss">"sn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"pn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"jn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"qty"</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="s1">'S7'</span><span class="p">,</span><span class="w"> </span><span class="s1">'P1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'J1'</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p">);</span><span class="w">
</span><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="ss">"SPJ"</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="ss">"sn"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'S7'</span><span class="p">;</span><span class="w">
</span><span class="n">pragma</span><span class="w"> </span><span class="n">foreign_keys</span><span class="o">=</span><span class="k">on</span><span class="p">;</span><span class="w">
</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="ss">"spj"</span><span class="p">(</span><span class="ss">"sn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"pn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"jn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"qty"</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="s1">'S7'</span><span class="p">,</span><span class="w"> </span><span class="s1">'P1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'J1'</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p">);</span><span class="w">
</span><span class="n">Error</span><span class="p">:</span><span class="w">
  </span><span class="n">Help</span><span class="p">:</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="k">constraint</span><span class="w"> </span><span class="n">failed</span></pre></div><div class="step step-level-1" step="35" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="56000" data-y="0" data-z="0"><h1 id="sqlite-uses-the-following-terminology">SQLite uses the following terminology</h1><ol><li>The parent table is the table that a foreign key constraint refers to.</li><li>The child table is the table that a foreign key constraint is applied to and the table that contains the references clause.</li><li>The parent key is the column or set of columns in the parent table that the foreign key constraint refers to.</li><li>The child key is the column or set of columns in the child table</li></ol></div><div class="step step-level-1" step="36" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="57600" data-y="0" data-z="0"><h1 id="alter-table-foreign-key">Alter table Foreign key</h1><h2 id="mysql-sql-server-oracle-ms-access">MySQL / SQL Server / Oracle / MS Access</h2><pre class="highlight code sql"><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">Orders</span><span class="w">
</span><span class="k">add</span><span class="w"> </span><span class="k">constraint</span><span class="w"> </span><span class="n">FK_PersonOrder</span><span class="w">
</span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">PersonID</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">Persons</span><span class="p">(</span><span class="n">PersonID</span><span class="p">);</span></pre></div><div class="step step-level-1 t2c" step="37" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="59200" data-y="0" data-z="0"><h1 id="all">All</h1><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1570;&#1606; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575; &#1575;&#1586; &#1608;&#1586;&#1606; &#1607;&#1605;&#1607;&#1620; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740; &#1583;&#1585;&#1608;&#1606; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1576;&#1740;&#1588;&#1578;&#1585; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w"> </span><span class="k">and</span><span class="w">
      </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">weight</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="k">all</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">weight</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="o">=</span><span class="s1">'Paris'</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="38" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="60800" data-y="0" data-z="0"><h1 id="some">Some</h1><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1570;&#1606; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575; &#1575;&#1586; &#1583;&#1587;&#1578; &#1705;&#1605; &#1608;&#1586;&#1606; &#1740;&#1705; &#1602;&#1591;&#1593;&#1607; &#1583;&#1585;&#1608;&#1606; &#1588;&#1607;&#1585; &#1662;&#1575;&#1585;&#1740;&#1587; &#1576;&#1740;&#1588;&#1578;&#1585; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w"> </span><span class="k">and</span><span class="w">
      </span><span class="n">T</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="k">some</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">weight</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Paris'</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="39" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="62400" data-y="0" data-z="0"><h1 id="in">IN</h1><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1607;&#1605;&#1588;&#1607;&#1585;&#1740; &#1570;&#1606; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><p class="rtl-h2">&#1705;&#1608;&#1588;&#1588; &#1705;&#1606;&#1740;&#1583; &#1576;&#1575; exists &#1575;&#1740;&#1606; &#1662;&#1585;&#1587;&#8204;&#1608;&#1580;&#1608; &#1585;&#1575; &#1581;&#1604; &#1705;&#1606;&#1740;&#1583;.</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="40" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="64000" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1607;&#1740;&#1670; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1583;&#1585; &#1588;&#1607;&#1585; &#1570;&#1606; &#1602;&#1591;&#1593;&#1575;&#1578; &#1606;&#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><p class="substep rtl-h2">&#1705;&#1608;&#1588;&#1588; &#1705;&#1606;&#1740;&#1583; &#1576;&#1575; exists &#1575;&#1740;&#1606; &#1662;&#1585;&#1587;&#8204;&#1608;&#1580;&#1608; &#1585;&#1575; &#1581;&#1604; &#1705;&#1606;&#1740;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1" step="41" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="65600" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1607;&#1740;&#1670; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607;&#1620; &#1607;&#1605;&#1588;&#1607;&#1585;&#1740;&#8204;&#1588;&#1575;&#1606; &#1570;&#1606;&#1607;&#1575; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1606;&#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">pn</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">pn</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><p class="substep rtl-h2">&#1705;&#1608;&#1588;&#1588; &#1705;&#1606;&#1740;&#1583; &#1576;&#1575; exists &#1575;&#1740;&#1606; &#1662;&#1585;&#1587;&#8204;&#1608;&#1580;&#1608; &#1585;&#1575; &#1581;&#1604; &#1705;&#1606;&#1740;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
      </span><span class="k">and</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="42" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="67200" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1607;&#1740;&#1670; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607;&#1620; &#1607;&#1605;&#1588;&#1607;&#1585;&#1740;&#8204;&#1588;&#1575;&#1606; &#1607;&#1740;&#1670; &#1602;&#1591;&#1593;&#1607;&#8204;&#1575;&#1740; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1606;&#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;.</p><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1583;&#1585; &#1588;&#1607;&#1585;&#1588;&#1575;&#1606; &#1606;&#1576;&#1575;&#1588;&#1583; &#1705;&#1607; &#1602;&#1591;&#1593;&#1607;&#8204;&#1575;&#1740; &#1593;&#1585;&#1590;&#1607; &#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><p class="substep rtl-h2">&#1705;&#1608;&#1588;&#1588; &#1705;&#1606;&#1740;&#1583; &#1576;&#1575; exists &#1575;&#1740;&#1606; &#1662;&#1585;&#1587;&#8204;&#1608;&#1580;&#1608; &#1585;&#1575; &#1581;&#1604; &#1705;&#1606;&#1740;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">exist</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">sp</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="43" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="68800" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1607;&#1740;&#1670; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607;&#1620; &#1607;&#1605;&#1588;&#1607;&#1585;&#1740;&#8204;&#1588;&#1575;&#1606; &#1607;&#1740;&#1670; &#1602;&#1591;&#1593;&#1607;&#8204;&#1575;&#1740; &#1585;&#1575; &#1593;&#1585;&#1590;&#1607; &#1606;&#1705;&#1585;&#1583;&#1607; &#1576;&#1575;&#1588;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w">
    </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
  </span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w">
    </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
  </span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">in</span><span class="w">
    </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="p">)</span><span class="w">
  </span><span class="p">);</span></pre></div><div class="step step-level-1 t2c" step="44" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="70400" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1608;&#1586;&#1606; &#1570;&#1606;&#1607;&#1575; &#1575;&#1586; &#1602;&#1591;&#1593;&#1607;&#8204;&#1575;&#1740; &#1583;&#1585; &#1588;&#1607;&#1585; &#1705;&#1575;&#1588;&#1575;&#1606; &#1576;&#1586;&#1585;&#1711;&#8204;&#1578;&#1585; &#1576;&#1575;&#1588;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="k">some</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">weight</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Kashan'</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">exist</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Kashan'</span><span class="w">
      </span><span class="k">and</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">weight</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="45" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="72000" data-y="0" data-z="0"><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1602;&#1591;&#1593;&#1575;&#1578;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1583;&#1585; &#1588;&#1607;&#1585; &#1570;&#1606;&#1607;&#1575; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1576;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1586;&#1585;&#1711;&#8204;&#1578;&#1585; &#1575;&#1586; &#1782; &#1608;&#1580;&#1608;&#1583; &#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">6</span><span class="w">
  </span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">some</span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">6</span><span class="w">
  </span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="c1">-- Error
</span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">6</span><span class="w">
  </span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="w">
</span><span class="c1">-- result has more
-- than a row</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">city</span><span class="p">)</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="46" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="73600" data-y="0" data-z="0"><h1 id="order-by">order by</h1><p class="rtl-h1">&#1606;&#1575;&#1605; &#1608; &#1608;&#1590;&#1593;&#1740;&#1578; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1585;&#1575; &#1576;&#1607; &#1589;&#1608;&#1585;&#1578; &#1589;&#1593;&#1608;&#1583;&#1740; &#1576;&#1585; &#1662;&#1575;&#1740;&#1607;&#1620; &#1608;&#1590;&#1593;&#1740;&#1578; &#1570;&#1606;&#1607;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;.</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">sname</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">sname</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="k">asc</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>sname</p></th><th><p>status</p></th></tr></thead><tbody><tr><td><p>Jones</p></td><td><p>10</p></td></tr><tr><td><p>Smith</p></td><td><p>20</p></td></tr><tr><td><p>Clark</p></td><td><p>20</p></td></tr><tr><td><p>Blake</p></td><td><p>30</p></td></tr><tr><td><p>Adams</p></td><td><p>30</p></td></tr><tr><td><p>Ali</p></td><td><p>40</p></td></tr></tbody></table></div><div class="step step-level-1" step="47" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="75200" data-y="0" data-z="0"><h1 id="order-by-desc">order by ..... desc</h1><p class="rtl-h2">&#1606;&#1575;&#1605; &#1608; &#1608;&#1590;&#1593;&#1740;&#1578; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1585;&#1575; &#1576;&#1607; &#1589;&#1608;&#1585;&#1578; &#1606;&#1586;&#1608;&#1604;&#1740; &#1576;&#1585; &#1662;&#1575;&#1740;&#1607;&#1620; &#1608;&#1590;&#1593;&#1740;&#1578; &#1570;&#1606;&#1607;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;.</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">sname</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span></pre><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>sname</p></th><th><p>status</p></th></tr></thead><tbody><tr><td><p>sname</p></td><td><p>status</p></td></tr><tr><td><p>Ali</p></td><td><p>40</p></td></tr><tr><td><p>Blake</p></td><td><p>30</p></td></tr><tr><td><p>Adams</p></td><td><p>30</p></td></tr><tr><td><p>Smith</p></td><td><p>20</p></td></tr><tr><td><p>Clark</p></td><td><p>20</p></td></tr><tr><td><p>Jones</p></td><td><p>10</p></td></tr></tbody></table></div><div class="step step-level-1" step="48" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="76800" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">mytemp</span><span class="p">(</span><span class="w">
  </span><span class="n">name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="n">ssn</span><span class="w">  </span><span class="nb">bigint</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w">
  </span><span class="p">);</span><span class="w">

</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">mytemp</span><span class="p">(</span><span class="n">ssn</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span><span class="w">
</span><span class="c1">--- Help: not null constraint failed: mytemp.name</span></pre><pre class="highlight code sql"><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">mytemp</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span><span class="w">

</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">mytemp</span><span class="p">(</span><span class="n">ssn</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">"ali"</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">mytemp</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="49" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="78400" data-y="0" data-z="0"><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607;&#1620; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606;&#1740; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583; &#1705;&#1607; &#1580;&#1605;&#1593; &#1608;&#1586;&#1606; &#1602;&#1591;&#1593;&#1607;&#8204;&#1607;&#1575;&#1740;&#1740; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607; &#1605;&#1740;&#8204;&#1705;&#1606;&#1606;&#1583; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1777; &#1607;&#1586;&#1575;&#1585; &#1576;&#1575;&#1588;&#1583;</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">spj</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">pn</span><span class="p">)</span><span class="w">
</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">sn</span><span class="w">
</span><span class="k">having</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">qty</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">11000</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="mi">11000</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">weight</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">qty</span><span class="p">)</span><span class="w">
             </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">spj</span><span class="w">
             </span><span class="k">where</span><span class="w"> </span><span class="n">spj</span><span class="p">.</span><span class="n">sn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sn</span><span class="w">
           </span><span class="p">);</span></pre></div><div class="step step-level-1 t2c" step="50" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="80000" data-y="0" data-z="0"><p class="rtl-h1">&#1588;&#1605;&#1575;&#1585;&#1607; &#1608; &#1606;&#1575;&#1605; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1585;&#1575; &#1576;&#1740;&#1575;&#1576;&#1740;&#1583;. &#1575;&#1711;&#1585; &#1608;&#1590;&#1593;&#1740;&#1578; &#1593;&#1585;&#1590;&#1607;&#8204;&#1705;&#1606;&#1606;&#1583;&#1607; &#1576;&#1586;&#1585;&#1711;&#1578;&#1585; &#1575;&#1586; &#1778;&#1776; &#1576;&#1608;&#1583; &#1705;&#1606;&#1575;&#1585; &#1605;&#1588;&#1582;&#1589;&#1575;&#1578; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607; &#1705;&#1604;&#1605;&#1607;&#1620; big &#1608; &#1583;&#1585; &#1594;&#1740;&#1585; &#1575;&#1740;&#1606; &#1589;&#1608;&#1585;&#1578; &#1705;&#1604;&#1605;&#1607;&#1620; small &#1576;&#1711;&#1584;&#1575;&#1585;&#1740;&#1583;.</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">sname</span><span class="p">,</span><span class="w"> </span><span class="k">case</span><span class="w">
    </span><span class="k">when</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s1">'big'</span><span class="w">
    </span><span class="k">else</span><span class="w"> </span><span class="s1">'small'</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="n">size_of_supplier</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="51" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="81600" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="o">&gt;</span><span class="mi">6</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="o">&gt;</span><span class="mi">6</span><span class="w">
</span><span class="p">);</span></pre></div><div class="step step-level-1 t2c" step="52" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="83200" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w">
   </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">status</span><span class="p">)</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="o">=</span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
   </span><span class="p">),</span><span class="w">
   </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w">
   </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">status</span><span class="p">)</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="o">=</span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="w">
   </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sum_status</span><span class="p">,</span><span class="w">
   </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="53" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="84800" data-y="0" data-z="0"><h1 id="unique-i">Unique(I)</h1><pre class="highlight code sql"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="n">ID</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">UNIQUE</span><span class="p">,</span><span class="w">
    </span><span class="n">LastName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
    </span><span class="n">FirstName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
    </span><span class="n">Age</span><span class="w"> </span><span class="nb">int</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="n">ID</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
    </span><span class="n">LastName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
    </span><span class="n">FirstName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
    </span><span class="n">Age</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w">
    </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="n">ID</span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="n">ID</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
    </span><span class="n">LastName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
    </span><span class="n">FirstName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
    </span><span class="n">Age</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w">
    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">UC_Person</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="n">ID</span><span class="p">,</span><span class="n">LastName</span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">"student"</span><span class="p">(</span><span class="w">
  </span><span class="ss">"SSN"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">unique</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="ss">"name"</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="ss">"student_number"</span><span class="w"> </span><span class="nb">bigint</span><span class="w"> </span><span class="k">Primary</span><span class="w"> </span><span class="k">key</span><span class="w">
  </span><span class="p">);</span><span class="w">

</span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w">
  </span><span class="ss">"student"</span><span class="p">(</span><span class="ss">"SSN"</span><span class="p">,</span><span class="w"> </span><span class="ss">"name"</span><span class="p">,</span><span class="w"> </span><span class="ss">"student_number"</span><span class="p">)</span><span class="w">
</span><span class="k">values</span><span class="w">
</span><span class="p">(</span><span class="ss">"38947389"</span><span class="p">,</span><span class="w"> </span><span class="ss">"&#1705;&#1575;&#1605;&#1585;&#1575;&#1606; &#1582;&#1583;&#1575;&#1662;&#1585;&#1587;&#1578;&#1740;"</span><span class="p">,</span><span class="w"> </span><span class="mi">973433</span><span class="p">),</span><span class="w">
</span><span class="p">(</span><span class="ss">"38472389"</span><span class="p">,</span><span class="w"> </span><span class="ss">"&#1705;&#1608;&#1585;&#1608;&#1588; &#1662;&#1575;&#1585;&#1587;&#1575;&#1740;&#1740;"</span><span class="p">,</span><span class="w"> </span><span class="mi">9632847</span><span class="p">),</span><span class="w">
</span><span class="p">(</span><span class="ss">"38947389"</span><span class="p">,</span><span class="w"> </span><span class="ss">")&#1575;&#1581;&#1605;&#1583; &#1740;&#1608;&#1587;&#1601;&#1575;&#1606;"</span><span class="p">,</span><span class="w"> </span><span class="mi">93802932</span><span class="p">);</span></pre></div><div class="step step-level-1 t2c" step="54" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="86400" data-y="0" data-z="0"><h1 id="unique-ii">Unique(II)</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">contacts</span><span class="p">(</span><span class="w">
    </span><span class="n">contact_id</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
    </span><span class="n">first_name</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w">
    </span><span class="n">last_name</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w">
    </span><span class="n">email</span><span class="w"> </span><span class="nb">text</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">shapes</span><span class="p">(</span><span class="w">
  </span><span class="n">shape_id</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="n">background_color</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w">
  </span><span class="n">foreground_color</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w">
  </span><span class="k">UNIQUE</span><span class="p">(</span><span class="n">background_color</span><span class="p">,</span><span class="n">foreground_color</span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="k">ADD</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="n">ID</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="k">ADD</span><span class="w"> </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">UC_Person</span><span class="w">
  </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="n">ID</span><span class="p">,</span><span class="n">LastName</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="k">DROP</span><span class="w"> </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">UC_Person</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="55" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="88000" data-y="0" data-z="0"><h1 id="unique-iii">Unique(III)</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">contacts</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="n">contact_id</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="n">first_name</span><span class="w"> </span><span class="nb">text</span><span class="w">    </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="n">last_name</span><span class="w">  </span><span class="nb">text</span><span class="w">    </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="n">email</span><span class="w">      </span><span class="nb">text</span><span class="p">,</span><span class="w">
  </span><span class="n">phone</span><span class="w">      </span><span class="nb">text</span><span class="w">    </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w">
    </span><span class="k">check</span><span class="w"> </span><span class="p">(</span><span class="k">length</span><span class="p">(</span><span class="n">phone</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="n">product_id</span><span class="w">   </span><span class="nb">integer</span><span class="w">         </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
  </span><span class="n">product_name</span><span class="w"> </span><span class="nb">text</span><span class="w">            </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="n">list_price</span><span class="w">   </span><span class="nb">DECIMAL</span><span class="w"> </span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
  </span><span class="n">discount</span><span class="w">     </span><span class="nb">DECIMAL</span><span class="w"> </span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w">
                              </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="k">check</span><span class="w"> </span><span class="p">(</span><span class="n">list_price</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">discount</span><span class="w"> </span><span class="k">and</span><span class="w">
      </span><span class="n">discount</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">and</span><span class="w">
      </span><span class="n">list_price</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w">
</span><span class="p">);</span></pre></div><div class="step step-level-1 t2c" step="56" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="89600" data-y="0" data-z="0"><h1 id="unique-condition">Unique condition</h1><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">unique</span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="p">;</span><span class="w">
</span><span class="c1">-- not implemented in PostgreSQL</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">unique</span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">sp</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">sp</span><span class="p">.</span><span class="n">pn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pn</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="p">;</span><span class="w">
</span><span class="c1">-- not implemented in PostgreSQL</span></pre></div><div class="step step-level-1 t2c" step="57" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="91200" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740;&#1740; &#1585;&#1575; &#1576;&#1607; &#1583;&#1587;&#1578; &#1570;&#1608;&#1585;&#1740;&#1583; &#1705;&#1607; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1607;&#8204;&#1575;&#1740; &#1576;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1776;&#1776;&#1776; &#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="w">
     </span><span class="p">(</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
       </span><span class="k">where</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">city</span><span class="o">=</span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">status</span><span class="o">&gt;</span><span class="mi">1000</span><span class="w">
     </span><span class="p">)</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">status</span><span class="o">&gt;</span><span class="mi">1000</span></pre></div><div class="step step-level-1 t2c" step="58" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="92800" data-y="0" data-z="0"><p class="rtl-h1">&#1606;&#1575;&#1605; &#1588;&#1607;&#1585;&#1607;&#1575;&#1740;&#1740; &#1585;&#1575; &#1576;&#1607; &#1583;&#1587;&#1578; &#1570;&#1608;&#1585;&#1740;&#1583; &#1705;&#1607; &#1607;&#1605;&#1607;&#1620; &#1593;&#1585;&#1590;&#1607; &#1705;&#1606;&#1606;&#1583;&#1711;&#1575;&#1606; &#1570;&#1606; &#1588;&#1607;&#1585;&#1607;&#1575; &#1608;&#1590;&#1593;&#1740;&#1578; &#1576;&#1740;&#1588;&#1578;&#1585; &#1575;&#1586; &#1777;&#1776;&#1776;&#1776; &#1583;&#1575;&#1588;&#1578;&#1607; &#1576;&#1575;&#1588;&#1606;&#1583;</p><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w">
     </span><span class="p">(</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">T</span><span class="w">
       </span><span class="k">where</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">city</span><span class="o">=</span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">T</span><span class="p">.</span><span class="n">status</span><span class="o">&lt;</span><span class="mi">1000</span><span class="w">
     </span><span class="p">);</span></pre><pre class="highlight code sql substep"><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">s</span><span class="w">
</span><span class="k">except</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w">   </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">status</span><span class="o">&lt;=</span><span class="mi">1000</span></pre></div><div class="step step-level-1" step="59" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="94400" data-y="0" data-z="0"><h1 id="enum-type">ENUM TYPE</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="n">Type_of_Menu</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">enum</span><span class="w"> </span><span class="p">(</span><span class="s1">'soft_menu'</span><span class="p">,</span><span class="w"> </span><span class="s1">'vertical_menu'</span><span class="p">,</span><span class="w"> </span><span class="s1">'horizontal_menu'</span><span class="p">,</span><span class="w">
    </span><span class="s1">'reports'</span><span class="p">,</span><span class="w"> </span><span class="s1">'report_with_submenu'</span><span class="p">,</span><span class="w"> </span><span class="s1">'report_in_submenu'</span><span class="w">
</span><span class="p">);</span><span class="w">

</span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">menu_access</span><span class="p">(</span><span class="w">
  </span><span class="n">menu_type</span><span class="w"> </span><span class="n">Type_of_Menu</span><span class="p">,</span><span class="w">
  </span><span class="n">name</span><span class="w"> </span><span class="nb">char</span><span class="p">(</span><span class="mi">256</span><span class="p">),</span><span class="w">
  </span><span class="n">visible</span><span class="w"> </span><span class="nb">boolean</span><span class="p">,</span><span class="w">
  </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">menu_type</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w">
</span><span class="p">)</span></pre></div><div class="step step-level-1" step="60" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="96000" data-y="0" data-z="0"><h1 id="check-constraint">Check constraint</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="n">valid_colors</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">enum</span><span class="w"> </span><span class="p">(</span><span class="s1">'red'</span><span class="p">,</span><span class="w"> </span><span class="s1">'green'</span><span class="p">,</span><span class="w"> </span><span class="s1">'blue'</span><span class="p">);</span><span class="w">

</span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="n">color</span><span class="w"> </span><span class="n">VALID_COLORS</span><span class="w">
</span><span class="p">);</span></pre><p>The following does not work</p><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">'bl%'</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="n">colors</span><span class="w"> </span><span class="nb">text</span><span class="w"> </span><span class="k">check</span><span class="w"> </span><span class="p">(</span><span class="n">colors</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="s1">'red'</span><span class="p">,</span><span class="w"> </span><span class="s1">'green'</span><span class="p">,</span><span class="w"> </span><span class="s1">'blue'</span><span class="p">))</span><span class="w">
</span><span class="p">);</span></pre></div><div class="step step-level-1" step="61" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="97600" data-y="0" data-z="0"><h1 id="lateral">lateral</h1><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="k">LATERAL</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">t</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="c1">-- Error
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">t</span><span class="p">;</span></pre><pre class="highlight code sh">Error<span class="w"> </span>invalid<span class="w"> </span>reference<span class="w"> </span>to<span class="w"> </span>FROM-clause<span class="w"> </span>entry<span class="w"> </span><span class="k">for</span><span class="w"> </span>table<span class="w"> </span><span class="s2">"p"</span><span class="w">
</span>LINE<span class="w"> </span><span class="m">2</span>:<span class="w"> </span>...<span class="w"> </span>from<span class="w"> </span>p,<span class="w"> </span><span class="o">(</span><span class="k">select</span><span class="w"> </span>sn,<span class="w"> </span>s.city<span class="w"> </span>from<span class="w"> </span>s<span class="w"> </span>where<span class="w"> </span>s.city<span class="w"> </span><span class="o">=</span><span class="w"> </span>p.city<span class="o">)</span><span class="w"> </span>as...<span class="w">
                                                             </span>^<span class="w">
</span>HINT:<span class="w"> </span>There<span class="w"> </span>is<span class="w"> </span>an<span class="w"> </span>entry<span class="w"> </span><span class="k">for</span><span class="w"> </span>table<span class="w"> </span><span class="s2">"p"</span>,<span class="w"> </span>but<span class="w"> </span>it<span class="w"> </span>cannot<span class="w"> </span>be<span class="w"> </span>referenced<span class="w">
</span>from<span class="w"> </span>this<span class="w"> </span>part<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>query.</pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">select</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">city</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="p">;</span></pre></div><div class="step step-level-1" step="62" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="99200" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">with</span><span class="w"> </span><span class="n">psk</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">psk</span><span class="p">;</span><span class="w">

</span><span class="k">with</span><span class="w"> </span><span class="n">psk</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">psk</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">);</span><span class="w">

</span><span class="k">with</span><span class="w"> </span><span class="n">psk</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w">
  </span><span class="p">,</span><span class="w"> </span><span class="n">jsk</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">jn</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">NATURAL</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">jsk</span><span class="p">.</span><span class="n">jn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">psk</span><span class="p">,</span><span class="w"> </span><span class="n">jsk</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w">
    </span><span class="n">jsk</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">city</span><span class="p">;</span></pre></div><div class="step step-level-1" step="63" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="100800" data-y="0" data-z="0"><pre class="highlight code sql"><span class="c1">-- Error
</span><span class="k">select</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">jsk</span><span class="p">.</span><span class="n">jn</span><span class="w">
</span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">pn</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">psk</span><span class="w">
  </span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">jn</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">NATURAL</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">jsk</span><span class="w">
</span><span class="k">where</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">psk</span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w">
  </span><span class="n">jsk</span><span class="p">.</span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">psk</span><span class="p">.</span><span class="n">city</span><span class="p">;</span></pre></div><div class="step step-level-1" step="64" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="102400" data-y="0" data-z="0"><h1 id="vacuum">Vacuum</h1><pre class="highlight code sql"><span class="k">vacuum</span><span class="p">;</span><span class="w">

</span><span class="k">vacuum</span><span class="w"> </span><span class="k">full</span><span class="p">;</span></pre><h2 id="auto-vaccum">auto_vaccum</h2><pre class="highlight code sql"><span class="n">pragma</span><span class="w"> </span><span class="n">auto_vacuum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">full</span><span class="p">;</span><span class="w">
</span><span class="n">pragma</span><span class="w"> </span><span class="n">auto_vacuum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">incremental</span><span class="p">;</span><span class="w">
</span><span class="n">pragma</span><span class="w"> </span><span class="n">auto_vacuum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">none</span><span class="p">;</span></pre><h2 id="vacuum-with-an-into-clause">vacuum with an into clause</h2></div><div class="step step-level-1" step="65" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="104000" data-y="0" data-z="0"><h1 id="view">View</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">kashan_p</span><span class="w"> </span><span class="k">as</span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Kashan'</span><span class="w">
</span><span class="p">);</span></pre><img src="img/create_view_postgresql.png" width="740px"></div><div class="step step-level-1 t2c" step="66" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="105600" data-y="0" data-z="0"><h1 id="sample-view">Sample View</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">student</span><span class="w">
  </span><span class="p">(</span><span class="n">ID</span><span class="w">     </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="w">
   </span><span class="n">name</span><span class="w">     </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
   </span><span class="n">dept_name</span><span class="w">    </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w">
   </span><span class="n">tot_cred</span><span class="w">   </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">check</span><span class="w"> </span><span class="p">(</span><span class="n">tot_cred</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w">
   </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">ID</span><span class="p">),</span><span class="w">
   </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">dept_name</span><span class="p">)</span><span class="w">
    </span><span class="k">references</span><span class="w"> </span><span class="n">department</span><span class="w"> </span><span class="p">(</span><span class="n">dept_name</span><span class="p">)</span><span class="w">
    </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">null</span><span class="w">
  </span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">update</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">S</span><span class="w">
</span><span class="k">set</span><span class="w"> </span><span class="n">tot_cred</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">credits</span><span class="p">)</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">takes</span><span class="p">,</span><span class="w"> </span><span class="n">course</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">takes</span><span class="p">.</span><span class="n">course_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">course</span><span class="p">.</span><span class="n">course_id</span><span class="w">
    </span><span class="k">and</span><span class="w"> </span><span class="n">S</span><span class="p">.</span><span class="n">ID</span><span class="o">=</span><span class="w"> </span><span class="n">takes</span><span class="p">.</span><span class="n">ID</span><span class="w"> </span><span class="k">and</span><span class="w">
    </span><span class="n">takes</span><span class="p">.</span><span class="n">grade</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="s1">'F'</span><span class="w"> </span><span class="k">and</span><span class="w">
    </span><span class="n">takes</span><span class="p">.</span><span class="n">grade</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">student</span><span class="w">
  </span><span class="p">(</span><span class="n">ID</span><span class="w">     </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="w">
   </span><span class="n">name</span><span class="w">     </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
   </span><span class="n">dept_name</span><span class="w">    </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w">
   </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">ID</span><span class="p">),</span><span class="w">
   </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">dept_name</span><span class="p">)</span><span class="w">
    </span><span class="k">references</span><span class="w"> </span><span class="n">department</span><span class="w"> </span><span class="p">(</span><span class="n">dept_name</span><span class="p">)</span><span class="w">
    </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">null</span><span class="w">
  </span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">student_total</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">ID</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">dept_name</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="w">
      </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">credits</span><span class="p">)</span><span class="w">
      </span><span class="k">from</span><span class="w"> </span><span class="n">takes</span><span class="p">,</span><span class="w"> </span><span class="n">course</span><span class="w">
      </span><span class="k">where</span><span class="w"> </span><span class="n">takes</span><span class="p">.</span><span class="n">course_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">course</span><span class="p">.</span><span class="n">course_id</span><span class="w">
        </span><span class="k">and</span><span class="w"> </span><span class="n">student</span><span class="p">.</span><span class="n">ID</span><span class="o">=</span><span class="w"> </span><span class="n">takes</span><span class="p">.</span><span class="n">ID</span><span class="w"> </span><span class="k">and</span><span class="w">
        </span><span class="n">takes</span><span class="p">.</span><span class="n">grade</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="s1">'F'</span><span class="w"> </span><span class="k">and</span><span class="w">
        </span><span class="n">takes</span><span class="p">.</span><span class="n">grade</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total_cred</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w">
</span><span class="p">);</span></pre></div><div class="step step-level-1" step="67" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="107200" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">ALTER</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">kashan_p</span><span class="w"> </span><span class="k">RENAME</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">kashan_parts</span><span class="p">;</span><span class="w">
</span><span class="k">DROP</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="n">kashan_parts</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">drop</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">m2</span><span class="p">;</span><span class="w">
</span><span class="k">drop</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">m1</span><span class="p">;</span><span class="w">

</span><span class="k">create</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">m1</span><span class="w"> </span><span class="k">as</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">s</span><span class="w">
  </span><span class="k">where</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">8</span><span class="w">
  </span><span class="p">;</span><span class="w">

</span><span class="k">create</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">m2</span><span class="w"> </span><span class="k">as</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">sn</span><span class="p">,</span><span class="w"> </span><span class="n">pn</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">m1</span><span class="w"> </span><span class="k">natural</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">p</span><span class="w">
  </span><span class="p">;</span></pre></div><div class="step step-level-1" step="68" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="108800" data-y="0" data-z="0"><h1 id="view-1">view</h1><ul><li>select is fine</li><li>insert, update, delete is problematic</li><li>unless it depends only on one table almost</li><li>Speed of execution</li></ul><pre class="highlight code sql"><span class="k">CREATE</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">TEMP</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">TEMPORARY</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">RECURSIVE</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="k">column_name</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="p">...]</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">]</span><span class="w">
    </span><span class="p">[</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">view_option_name</span><span class="w"> </span><span class="p">[</span><span class="o">=</span><span class="w"> </span><span class="n">view_option_value</span><span class="p">]</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">]</span><span class="w">
    </span><span class="k">AS</span><span class="w"> </span><span class="n">query</span><span class="w">
    </span><span class="p">[</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">CASCADED</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">LOCAL</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="k">CHECK</span><span class="w"> </span><span class="k">OPTION</span><span class="w"> </span><span class="p">]</span></pre><pre class="highlight code sql"><span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">employee_department_info</span><span class="w"> </span><span class="k">AS</span><span class="w">
</span><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">employee_id</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">first_name</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span><span class="w">
</span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w">
</span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">;</span></pre></div><div class="step step-level-1" step="69" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="110400" data-y="0" data-z="0"><h1 id="materialized-view">MATERIALIZED VIEW</h1><pre class="highlight code sql"><span class="k">CREATE</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="k">table_name</span><span class="w">
    </span><span class="p">[</span><span class="w"> </span><span class="p">(</span><span class="k">column_name</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="p">...]</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">]</span><span class="w">
    </span><span class="p">[</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">storage_parameter</span><span class="w"> </span><span class="p">[</span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">]</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">]</span><span class="w">
    </span><span class="p">[</span><span class="w"> </span><span class="n">TABLESPACE</span><span class="w"> </span><span class="n">tablespace_name</span><span class="w"> </span><span class="p">]</span><span class="w">
    </span><span class="k">AS</span><span class="w"> </span><span class="n">query</span><span class="w">
    </span><span class="p">[</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">NO</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="k">DATA</span><span class="w"> </span><span class="p">]</span></pre></div><div class="step step-level-1" step="70" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="112000" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">ALTER</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="n">name</span><span class="w">
    </span><span class="n">action</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="k">ALTER</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="n">name</span><span class="w">
    </span><span class="k">RENAME</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="k">column_name</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">new_column_name</span><span class="w">
</span><span class="k">ALTER</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="n">name</span><span class="w">
    </span><span class="k">RENAME</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">new_name</span><span class="w">
</span><span class="k">ALTER</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="n">name</span><span class="w">
    </span><span class="k">SET</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">new_schema</span><span class="w">

</span><span class="k">where</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="k">of</span><span class="p">:</span><span class="w">

    </span><span class="k">ALTER</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="k">column_name</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="k">STATISTICS</span><span class="w"> </span><span class="nb">integer</span><span class="w">
    </span><span class="k">ALTER</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="k">column_name</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">attribute_option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w">
    </span><span class="k">ALTER</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="k">column_name</span><span class="w"> </span><span class="k">RESET</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">attribute_option</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w">
    </span><span class="k">ALTER</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="k">column_name</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="k">STORAGE</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="n">PLAIN</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">EXTERNAL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">EXTENDED</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">MAIN</span><span class="w"> </span><span class="err">}</span><span class="w">
    </span><span class="k">CLUSTER</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">index_name</span><span class="w">
    </span><span class="k">SET</span><span class="w"> </span><span class="k">WITHOUT</span><span class="w"> </span><span class="k">CLUSTER</span><span class="w">
    </span><span class="k">SET</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">storage_parameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w">
    </span><span class="k">RESET</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">storage_parameter</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w">
    </span><span class="k">OWNER</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">new_owner</span><span class="w">
    </span><span class="k">SET</span><span class="w"> </span><span class="n">TABLESPACE</span><span class="w"> </span><span class="n">new_tablespace</span></pre></div><div class="step step-level-1" step="71" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="113600" data-y="0" data-z="0"><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="n">materialized</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="ss">"pscity"</span><span class="w"> </span><span class="p">(</span><span class="ss">"sn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"pn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"city"</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="ss">"sn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"pn"</span><span class="p">,</span><span class="w"> </span><span class="ss">"p"</span><span class="p">.</span><span class="ss">"city"</span><span class="w">
    </span><span class="k">from</span><span class="w"> </span><span class="ss">"s"</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="ss">"p"</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="ss">"s"</span><span class="p">.</span><span class="ss">"city"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"p"</span><span class="p">.</span><span class="ss">"city"</span><span class="p">;</span><span class="w">

</span><span class="k">drop</span><span class="w"> </span><span class="n">materialized</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="ss">"pscity"</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="n">REFRESH</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">name</span><span class="w">
  </span><span class="p">[</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">NO</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="k">DATA</span><span class="w"> </span><span class="p">]</span><span class="w">

</span><span class="n">REFRESH</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">order_summary</span><span class="p">;</span><span class="w">

</span><span class="n">REFRESH</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">annual_statistics_basis</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="k">NO</span><span class="w"> </span><span class="k">DATA</span><span class="p">;</span></pre><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="n">materialized</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">student_total</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="n">ID</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">dept_name</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="w">
      </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">credits</span><span class="p">)</span><span class="w">
      </span><span class="k">from</span><span class="w"> </span><span class="n">takes</span><span class="p">,</span><span class="w"> </span><span class="n">course</span><span class="w">
      </span><span class="k">where</span><span class="w"> </span><span class="n">takes</span><span class="p">.</span><span class="n">course_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">course</span><span class="p">.</span><span class="n">course_id</span><span class="w">
        </span><span class="k">and</span><span class="w"> </span><span class="n">student</span><span class="p">.</span><span class="n">ID</span><span class="o">=</span><span class="w"> </span><span class="n">takes</span><span class="p">.</span><span class="n">ID</span><span class="w"> </span><span class="k">and</span><span class="w">
        </span><span class="n">takes</span><span class="p">.</span><span class="n">grade</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="s1">'F'</span><span class="w"> </span><span class="k">and</span><span class="w">
        </span><span class="n">takes</span><span class="p">.</span><span class="n">grade</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total_cred</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w">
</span><span class="p">);</span></pre><pre class="highlight code sql"><span class="n">REFRESH</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">student_total</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="72" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="115200" data-y="0" data-z="0"><h1 id="recursive-query">Recursive query</h1><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">course</span><span class="w">
  </span><span class="p">(</span><span class="n">course_id</span><span class="w">    </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="w">
   </span><span class="n">title</span><span class="w">      </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span><span class="w">
   </span><span class="n">dept_name</span><span class="w">    </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w">
   </span><span class="n">credits</span><span class="w">    </span><span class="nb">numeric</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">
     </span><span class="k">check</span><span class="w"> </span><span class="p">(</span><span class="n">credits</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w">
   </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">course_id</span><span class="p">),</span><span class="w">
   </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">dept_name</span><span class="p">)</span><span class="w">
     </span><span class="k">references</span><span class="w"> </span><span class="n">department</span><span class="w">
     </span><span class="p">(</span><span class="n">dept_name</span><span class="p">)</span><span class="w">
     </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">null</span><span class="w">
  </span><span class="p">);</span></pre><pre class="highlight code sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">prereq</span><span class="w">
  </span><span class="p">(</span><span class="n">course_id</span><span class="w">    </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="w">
   </span><span class="n">prereq_id</span><span class="w">    </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="w">
   </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">course_id</span><span class="p">,</span><span class="w"> </span><span class="n">prereq_id</span><span class="p">),</span><span class="w">
   </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">course_id</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">course</span><span class="w"> </span><span class="p">(</span><span class="n">course_id</span><span class="p">)</span><span class="w">
    </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">cascade</span><span class="p">,</span><span class="w">
   </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">prereq_id</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">course</span><span class="w"> </span><span class="p">(</span><span class="n">course_id</span><span class="p">)</span><span class="w">
  </span><span class="p">);</span></pre><p>.</p><pre class="highlight code sql"><span class="k">with</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="n">rec_prereq</span><span class="p">(</span><span class="n">course_id</span><span class="p">,</span><span class="w"> </span><span class="n">prereq_id</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="w">
      </span><span class="k">select</span><span class="w"> </span><span class="n">course_id</span><span class="p">,</span><span class="w"> </span><span class="n">prereq_id</span><span class="w">
      </span><span class="k">from</span><span class="w"> </span><span class="n">prereq</span><span class="w">
    </span><span class="k">union</span><span class="w">
      </span><span class="k">select</span><span class="w"> </span><span class="n">rec_prereq</span><span class="p">.</span><span class="n">course_id</span><span class="p">,</span><span class="w"> </span><span class="n">prereq</span><span class="p">.</span><span class="n">prereq_id</span><span class="p">,</span><span class="w">
      </span><span class="k">from</span><span class="w"> </span><span class="n">rec_rereq</span><span class="p">,</span><span class="w"> </span><span class="n">prereq</span><span class="w">
      </span><span class="k">where</span><span class="w"> </span><span class="n">rec_prereq</span><span class="p">.</span><span class="n">prereq_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">prereq</span><span class="p">.</span><span class="n">course_id</span><span class="w">
    </span><span class="p">)</span><span class="w">
  </span><span class="k">select</span><span class="w"> </span><span class="err">&#8727;</span><span class="w">
  </span><span class="k">from</span><span class="w"> </span><span class="n">rec_prereq</span><span class="p">;</span></pre></div><div class="step step-level-1 t2c" step="73" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="116800" data-y="0" data-z="0"><h1 id="general-recursive-form">General Recursive Form</h1><pre class="highlight code sql"><span class="k">with</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="n">r</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="w"> </span><span class="n">c2</span><span class="p">,</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="c1">-- Non-recursive term.
</span><span class="w">    </span><span class="p">(</span><span class="w">
      </span><span class="k">select</span><span class="w"> </span><span class="p">...</span><span class="w">
    </span><span class="p">)</span><span class="w">

    </span><span class="k">union</span><span class="w"> </span><span class="p">[</span><span class="k">all</span><span class="p">]</span><span class="w">

    </span><span class="c1">-- Recursive term. Notice the
</span><span class="w">    </span><span class="c1">-- so-called recursive
</span><span class="w">    </span><span class="c1">-- self-reference to r.
</span><span class="w">    </span><span class="p">(</span><span class="w">
      </span><span class="k">select</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="p">...</span><span class="w">
    </span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="p">...;</span></pre><pre class="highlight code sql"><span class="k">with</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="n">r</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="c1">-- Non-recursive term.
</span><span class="w">    </span><span class="p">(</span><span class="w">
      </span><span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
    </span><span class="p">)</span><span class="w">
    </span><span class="k">union</span><span class="w"> </span><span class="k">all</span><span class="w">
    </span><span class="c1">-- Recursive term.
</span><span class="w">    </span><span class="p">(</span><span class="w">
      </span><span class="k">select</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="k">from</span><span class="w"> </span><span class="n">r</span><span class="w">
      </span><span class="k">where</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="w">
    </span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="k">select</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w">

</span><span class="c1">-- n 1 2 3 4 5</span></pre></div><div class="step step-level-1" step="74" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="118400" data-y="0" data-z="0"><h1 id="maximum-one-recursive-cte-common-table-expression">Maximum one recursive CTE (Common Table Expression)</h1><pre class="highlight code sql"><span class="k">with</span><span class="w"> </span><span class="n">a1</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="mi">42</span><span class="p">),</span><span class="w">
  </span><span class="n">a2</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="w">
    </span><span class="k">with</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="n">r</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="w">
        </span><span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
        </span><span class="k">union</span><span class="w"> </span><span class="k">all</span><span class="w">
        </span><span class="k">select</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="k">from</span><span class="w"> </span><span class="n">r</span><span class="w">
        </span><span class="k">where</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="w">
    </span><span class="p">)</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">r</span><span class="w">
  </span><span class="p">),</span><span class="w"> </span><span class="n">a3</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="mi">99</span><span class="p">)(</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">a1</span><span class="w">
    </span><span class="k">union</span><span class="w"> </span><span class="k">all</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">a2</span><span class="w">
    </span><span class="k">union</span><span class="w"> </span><span class="k">all</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">a3</span><span class="w">
  </span><span class="p">)</span><span class="w">
  </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span><span class="w">

</span><span class="c1">--- n,  99  42  5  4  3  2  1</span></pre></div><div class="step step-level-1" step="75" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="120000" data-y="0" data-z="0"><p>END</p></div></div><div id="slide-number" class="slide-number">
         1
      </div><script type="text/javascript" src="js/impress.js"></script><script type="text/javascript" src="js/gotoSlide.js"></script><script type="text/javascript" src="js/hovercraft.js"></script><script type="text/javascript" src="js/MathJax/es5/tex-mml-chtml.js"></script><script type="text/javascript">
      document.getElementById("impress").addEventListener("impress:stepenter", update_slide_number, false);
    </script></body></html>