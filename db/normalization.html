<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.20.1: https://docutils.sourceforge.io/" />
<meta content="fa" http-equiv="Content-Language" />
<title>هنجارسازی (نرمال سازی) Normalization</title>
<style type="text/css">

/* Use these two if the main document direction is RTL */
body { direction: rtl; font-family: Nazli; font-size: 0.7em}
div.sidebar { float: left !important; font-family: Nazli;font-size: 0.7em}

/* The next 3 rules are very useful in documents containing pieces
of code in english */
/* Use this if you all your literal blocks (::) are LTR */
pre {direction: ltr; unicode-bidi: embed; font-size: 0.7em }
/* Use this if you all your inline literals (``) are LTR */
tt {direction: ltr; unicode-bidi: embed; font-size: 0.7em }
/* Use this if you all your interpretted text (`) is LTR */
cite {direction: ltr; unicode-bidi: embed;font-size: 0.7em  }

/* Allow manual direction override by class directive and roles */
.rtl { direction: rtl; }
.ltr { direction: ltr; }
.center {
  margin: auto;
  width: 50%;
  padding: 10px;
  text-align: center;
}


</style>
<style type="text/css">

/*
*   math2html: convert LaTeX equations to HTML output.
*
*   Copyright (C) 2009,2010 Alex Fernández
*                 2021      Günter Milde
*
*   Released under the terms of the `2-Clause BSD license'_, in short:
*   Copying and distribution of this file, with or without modification,
*   are permitted in any medium without royalty provided the copyright
*   notice and this notice are preserved.
*   This file is offered as-is, without any warranty.
*
* .. _2-Clause BSD license: http://www.spdx.org/licenses/BSD-2-Clause
*
*   Based on eLyXer: convert LyX source files to HTML output.
*   http://elyxer.nongnu.org/
*
*
* CSS file for LaTeX formulas.
*
* References: http://www.zipcon.net/~swhite/docs/math/math.html
*             http://www.cs.tut.fi/~jkorpela/math/
*/

/* Formulas */
.formula {
	text-align: center;
	margin: 1.2em 0;
	line-height: 1.4;
}
span.formula {
	white-space: nowrap;
}
div.formula {
	padding: 0.5ex;
	margin-left: auto;
	margin-right: auto;
}

/* Basic features */
a.eqnumber {
	display: inline-block;
	float: right;
	clear: right;
	font-weight: bold;
}
span.unknown {
	color: #800000;
}
span.ignored, span.arraydef {
	display: none;
}
.phantom {
	visibility: hidden;
}
.formula i {
	letter-spacing: 0.1ex;
}

/* Alignment */
.align-left, .align-l {
	text-align: left;
}
.align-right, .align-r {
	text-align: right;
}
.align-center, .align-c {
	text-align: center;
}

/* Structures */
span.hspace {
	display: inline-block;
}
span.overline, span.bar {
	text-decoration: overline;
}
.fraction, .fullfraction, .textfraction {
	display: inline-block;
	vertical-align: middle;
	text-align: center;
}
span.formula .fraction,
.textfraction,
span.smallmatrix {
	font-size: 80%;
	line-height: 1;
}
span.numerator {
	display: block;
	line-height: 1;
}
span.denominator {
	display: block;
	line-height: 1;
	padding: 0ex;
	border-top: thin solid;
}
.formula sub, .formula sup {
	font-size: 80%;
}
sup.numerator, sup.unit {
	vertical-align: 80%;
}
sub.denominator, sub.unit {
	vertical-align: -20%;
}
span.smallsymbol {
	font-size: 75%;
	line-height: 75%;
}
span.boldsymbol {
	font-weight: bold;
}
span.sqrt {
	display: inline-block;
	vertical-align: middle;
	padding: 0.1ex;
}
sup.root {
	position: relative;
	left: 1.4ex;
}
span.radical {
	display: inline-block;
	padding: 0ex;
	/* font-size: 160%; for DejaVu, not required with STIX */
	line-height: 100%;
	vertical-align: top;
	vertical-align: middle;
}

span.root {
	display: inline-block;
	border-top: thin solid;
	padding: 0ex;
	vertical-align: middle;
}
div.formula .bigoperator,
.displaystyle .bigoperator,
.displaystyle .bigoperator {
	line-height: 120%;
	font-size: 140%;
	padding-right: 0.2ex;
}
span.fraction .bigoperator,
span.scriptstyle .bigoperator {
	line-height: inherit;
	font-size: inherit;
	padding-right: 0;
}
span.bigdelimiter {
	display: inline-block;
}
span.bigdelimiter.size1 {
	transform: scale(1, 1.2);
	line-height: 1.2;
}
span.bigdelimiter.size2 {
	transform: scale(1, 1.62);
	line-height: 1.62%;

}
span.bigdelimiter.size3 {
	transform: scale(1, 2.05);
	line-height: 2.05%;
}
span.bigdelimiter.size4 {
	transform: scale(1, 2.47);
	line-height: 2.47%;
}
/* vertically stacked sub and superscript */
span.scripts {
	display: inline-table;
	vertical-align: middle;
	padding-right: 0.2ex;
}
.script {
	display: table-row;
	text-align: left;
	line-height: 150%;
}
span.limits {
	display: inline-table;
	vertical-align: middle;
}
.limit {
	display: table-row;
	line-height: 99%;
}
sup.limit, sub.limit {
	line-height: 100%;
}
span.embellished,
span.embellished > .base {
	display: inline-block;
}
span.embellished > sup,
span.embellished > sub {
	display: inline-block;
	font-size: 100%;
	position: relative;
	bottom: 0.3em;
	width: 0px;
}
span.embellished > sub {
	top: 0.4em;
}

/* Environments */
span.array, span.bracketcases, span.binomial, span.environment {
	display: inline-table;
	text-align: center;
	vertical-align: middle;
}
span.arrayrow, span.binomrow {
	display: table-row;
	padding: 0;
	border: 0;
}
span.arraycell, span.bracket, span.case, span.binomcell, span.environmentcell {
	display: table-cell;
	padding: 0ex 0.2ex;
	line-height: 1; /* 99%; */
	border: 0ex;
}
.environment.align > .arrayrow > .arraycell.align-l {
	padding-right: 2em;
}

/* Inline binomials */
span.binom {
	display: inline-block;
	vertical-align: middle;
	text-align: center;
	font-size: 80%;
}
span.binomstack {
	display: block;
	padding: 0em;
}

/* Over- and underbraces */
span.overbrace {
	border-top: 2pt solid;
}
span.underbrace {
	border-bottom: 2pt solid;
}

/* Stackrel */
span.stackrel {
	display: inline-block;
	text-align: center;
}
span.upstackrel {
	display: block;
	padding: 0em;
	font-size: 80%;
	line-height: 64%;
	position: relative;
	top: 0.15em;

}
span.downstackrel {
	display: block;
	vertical-align: bottom;
	padding: 0em;
}

/* Fonts */
.formula {
	font-family: STIX, "DejaVu Serif", "DejaVu Math TeX Gyre", serif;
}
span.radical,   /* ensure correct size of square-root sign */
span.integral { /* upright integral signs for better alignment of indices */
	font-family: "STIXIntegralsUp", STIX;
	/* font-size: 115%; match apparent size with DejaVu */
}
span.bracket {
  /* some "STIX" and "DejaVu Math TeX Gyre" bracket pieces don't fit */
	font-family: "DejaVu Serif", serif;
}
span.mathsf, span.textsf {
	font-family: sans-serif;
}
span.mathrm, span.textrm {
	font-family: STIX, "DejaVu Serif", "DejaVu Math TeX Gyre", serif;
}
span.mathtt, span.texttt {
	font-family: monospace;
}
span.text, span.textnormal,
span.mathsf, span.mathtt, span.mathrm {
	font-style: normal;
}
span.fraktur {
	font-family: "Lucida Blackletter", eufm10, blackletter;
}
span.blackboard {
	font-family: Blackboard, msbm10, serif;
}
span.scriptfont {
	font-family: "Monotype Corsiva", "Apple Chancery", "URW Chancery L", cursive;
	font-style: italic;
}
span.mathscr {
  font-family: MathJax_Script, rsfs10,  cursive;
  font-style: italic;
}
span.textsc {
	font-variant: small-caps;
}
span.textsl {
	font-style: oblique;
}

/* Colors */
span.colorbox {
	display: inline-block;
	padding: 5px;
}
span.fbox {
	display: inline-block;
	border: thin solid black;
	padding: 2px;
}
span.boxed, span.framebox {
	display: inline-block;
	border: thin solid black;
	padding: 5px;
}

</style>
</head>
<body>
<div class="document" id="normalization">
<h1 class="title">هنجارسازی (نرمال سازی) Normalization</h1>
<h2 class="subtitle" id="section-1">احمد یوسفان ، دانشگاه کاشان</h2>

<p>نرمال سازی پایگاه داده روندی برای ساماندهی ویژگی‌ها (ستون‌ها) و رابطه‌ها (جدول‌ها) در یک پایگاه داده‌ی رابطه‌ای به منظور کاهش افزونگی داده است.</p>
<p>هدف از نرمال سازی؟</p>
<p>یک فروشگاه را در نظر بگیرید که اطلاعاتی مانند زیر را بخواهد در خود نگهداری کند.</p>
<table border="1" class="docutils">
<caption>جدول فروش یک فروشگاه</caption>
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">شماره جنس</th>
<th class="head">نام جنس</th>
<th class="head">موجودی</th>
<th class="head">شماره فاکتور فروش</th>
<th class="head">میزان فروش</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>1</td>
<td>شکر</td>
<td>1000</td>
<td>1</td>
<td>12</td>
</tr>
<tr><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>4</td>
<td>14</td>
</tr>
<tr><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>5</td>
<td>5</td>
</tr>
<tr><td>2</td>
<td>نمک</td>
<td>1500</td>
<td>2</td>
<td>10</td>
</tr>
<tr><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>4</td>
<td>20</td>
</tr>
<tr><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>5</td>
<td>30</td>
</tr>
<tr><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>3</td>
<td>40</td>
</tr>
</tbody>
</table>
<div class="section" id="section-2">
<h1>1&nbsp;&nbsp;&nbsp;نرمال سطح ۱</h1>
<div class="section" id="section-3">
<h2>1.1&nbsp;&nbsp;&nbsp;تبدیل شده به نرمال ۱</h2>
<table border="1" class="docutils">
<caption>جدول فروش یک فروشگاه</caption>
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شماره جنس</a></th>
<th class="head">نام جنس</th>
<th class="head">موجودی</th>
<th class="head"><a class="reference external" href="#">شماره فاکتور فروش</a></th>
<th class="head">میزان فروش</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>1</td>
<td>شکر</td>
<td>1000</td>
<td>1</td>
<td>12</td>
</tr>
<tr><td>1</td>
<td>شکر</td>
<td>1000</td>
<td>4</td>
<td>14</td>
</tr>
<tr><td>1</td>
<td>شکر</td>
<td>1000</td>
<td>5</td>
<td>5</td>
</tr>
<tr><td>2</td>
<td>نمک</td>
<td>1500</td>
<td>2</td>
<td>10</td>
</tr>
<tr><td>2</td>
<td>نمک</td>
<td>1500</td>
<td>4</td>
<td>20</td>
</tr>
<tr><td>2</td>
<td>نمک</td>
<td>1500</td>
<td>5</td>
<td>30</td>
</tr>
<tr><td>2</td>
<td>نمک</td>
<td>1500</td>
<td>3</td>
<td>40</td>
</tr>
</tbody>
</table>
<p>کلید؟</p>
<p>ترکیب «شماره جنس» و «شماره فاکتور فروش» کلید را تشکیل می‌دهد.</p>
<p>روشن است که این جدول مشکل دارد و روشن این که باید دو جدول باشد ولی چه قانونی این را می‌گوید.</p>
</div>
<hr class="docutils" />
<div class="section" id="section-4">
<h2>1.2&nbsp;&nbsp;&nbsp;دو جدول پیشنهادی</h2>
<table border="1" class="docutils">
<caption>جدول موجودی فروشگاه</caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شماره جنس</a></th>
<th class="head">نام جنس</th>
<th class="head">موجودی</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>1</td>
<td>شکر</td>
<td>1000</td>
</tr>
<tr><td>2</td>
<td>نمک</td>
<td>1500</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<caption>جدول فروش یک فروشگاه</caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شماره جنس</a></th>
<th class="head"><a class="reference external" href="#">شماره فاکتور فروش</a></th>
<th class="head">میزان فروش</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>1</td>
<td>1</td>
<td>12</td>
</tr>
<tr><td>1</td>
<td>4</td>
<td>14</td>
</tr>
<tr><td>1</td>
<td>5</td>
<td>5</td>
</tr>
<tr><td>2</td>
<td>2</td>
<td>10</td>
</tr>
<tr><td>2</td>
<td>4</td>
<td>20</td>
</tr>
<tr><td>2</td>
<td>5</td>
<td>30</td>
</tr>
<tr><td>2</td>
<td>3</td>
<td>40</td>
</tr>
</tbody>
</table>
<p>مشکل‌های جدول‌های پیشین چه بودند؟</p>
<p>ناهنجاری افزودن داده، حذف داده،‌به روز رسانی داده</p>
<p>قانون تقسیم چه می‌تواند باشد.</p>
</div>
</div>
<div class="section" id="section-5">
<h1>2&nbsp;&nbsp;&nbsp;وابستگی تابعی</h1>
<p>در جدول موجودی فروشگاه، شماره‌ی جنس تعیین کننده‌ی (determinant) دو ویژگی دیگر یعنی «نام جنس» و «موجودی» است. از طرف دیگر می‌توان گفت نام جنس و موجودی وابسته (dependant) به شماره‌ی جنس هستند.</p>
<p>به این نوع وابستگی، «وابستگی تابعی»(Functional Deppendancy) یا FD گفته می‌شود. وابستگی تابعی میان ویژگی‌های جدول برخاسته از تعریف و نوع ارتباط آنها با هم دیگر در جدول است و طراح پایگاه داده باید بتواند وابستگی‌های تابعی میان ویژگی‌های درون جدول‌های خود را بیابد.</p>
<p>بنابراین در هر جدول یک یا چند وابستگی تابعی وجود دارد. برای نمونه تعدادی از وابستگی‌های تابعی دو جدول بالا به قرار زیر است</p>
<ul>
<li><p class="first">در جدول موجودی فروشگاه</p>
<blockquote>
<ul class="simple">
<li>شماره جنس ⭠ نام جنس</li>
<li>شماره جنس ⭠ موجودی</li>
<li>یا به صورت دیگر :  شماره جنس ⭠ {نام جنس ، موجودی}</li>
</ul>
</blockquote>
</li>
<li><p class="first">در جدول فروش</p>
<blockquote>
<ul class="simple">
<li>{شماره جنس ، شماره فاکتور} ⭠ میزان فروش</li>
</ul>
</blockquote>
</li>
</ul>
<p>همان گونه که روشن است وابستگی‌ها به کلید هستند ولی وابستگی‌های دیگری نیز می‌تواند وجود داشته باشد.</p>
<p>در رابطهٔ R دو مجموعه از ویژگی‌های α و β دارای وابستگی تابعی  α → β است اگر و تنها اگر برای هر دو چندتایی t1 و t2 ممکن در رابطهٔ R مقدارهای α  برابر باشند آن‌گاه مقدارهای β نیز برابر است. به عبارت دیگر</p>
<p class="ltr">∀ t1, t2 ∈ R, t1[α] = t2[α] ⇒ t1[β] = t2[β]</p>
<p>با توجه به جدول زیر کدام وابستگی‌های وجود ندارند</p>
<table border="1" class="ltr docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">A</th>
<th class="head">B</th>
<th class="head">C</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>a1</td>
<td>b1</td>
<td>c1</td>
</tr>
<tr><td>a1</td>
<td>b1</td>
<td>c2</td>
</tr>
<tr><td>a1</td>
<td>b2</td>
<td>c2</td>
</tr>
<tr><td>a2</td>
<td>b2</td>
<td>c2</td>
</tr>
<tr><td>a3</td>
<td>b3</td>
<td>c3</td>
</tr>
</tbody>
</table>
<ol class="ltr arabic simple">
<li>A →B</li>
<li>A →C</li>
<li>B→C</li>
<li>AB→C</li>
<li>‌B→A</li>
<li>AC→B</li>
<li>BC→A</li>
</ol>
<div class="section" id="section-6">
<h2>2.1&nbsp;&nbsp;&nbsp;ویژگی‌های ریاضی وابستگی تابعی</h2>
<p>به این ترتیب وابستگی تابعی می‌تواند به صورت یک عمل ریاضی تعریف شود و ویژگی‌های آن از دید ریاضی بر روی رابطه‌ها بررسی گردد.  بنابراین تعدادی اصل و تعدادی ویژگی و قضیه ار روی آن به دست می‌آید که در اینجا به بخشی از آن پرداخته می‌شود.</p>
<blockquote>
اگر X ، Y و Z مجموعه‌هایی از ویژگی‌ها در یک رابطه‌ی R باشند برخی از قانون‌هایی که نتیجه می‌شود در ادامه نوشته شده است.</blockquote>
<p>اصول آرمسترانگ</p>
<ul class="simple">
<li>بازتابی بودن:  اگر Y زیر مجموعه‌ی X باشد آن‌گاه X ⭢ Y</li>
<li>بسط پذیری   :  اگر X ⭢ Y آن‌گاه XZ ⭢ YZ</li>
<li>تراگذری     :  اگر X ⭢ Y و Y ⭢ Z  آن‌گاه X ⭢ Z</li>
</ul>
<p>قانون‌های زیر می‌تواند از روی سه قانون بالا به دست آید:</p>
<ul class="simple">
<li>خود تعیینی : همواره داریم X ⭢ X</li>
<li>اجتماع     : اگر X ⭢ Y و X ⭢ Z آن‌گاه X ⭢ YZ</li>
<li>تجزیه      : اگر X ⭢ YZ آن‌گاه  X ⭢ Y و X ⭢ Z</li>
<li>شبه تراگذری: اگر  X ⭢ Y و WY ⭢ Z آن‌گاه WX ⭢ Z</li>
<li>ترکیب      : اگر X ⭢ Y و Z ⭢ W آن‌گاه XZ ⭢ YW</li>
<li>اتحاد کلی  :  اگر X ⭢ Y و Z ⭢ W آن‌گاه X ⋃ (Z - Y) ⭢ YW</li>
</ul>
</div>
<div class="section" id="section-7">
<h2>2.2&nbsp;&nbsp;&nbsp;بستار وابستگی تابعی</h2>
<p>به مجموعه‌ی همه‌ی وابستگی‌های تابعی که می‌تواند از روی چند وابستگی تابعی به دست آید بستار آن وابستگی‌های تابعی گفته می‌شود. اگر F یک مجموعه وابستگی باشد <span class="formula"><sup> + </sup><i>F</i></span> مجموعه‌ی بستار F است.</p>
<p>برای نمونه اگر  در رابطه‌ی R ویژگی‌های A,B,C,D را به همراه قانون‌های وابستگی زیر داشته باشیم</p>
<ol class="ltr arabic simple">
<li>A → B</li>
<li>B → C</li>
<li>AB → D</li>
</ol>
<p>آن‌گاه قانون‌های زیر (بخشی از بستار این قانون‌ها) می‌تواند به دست آید:</p>
<ol class="ltr loweralpha simple">
<li>A → A</li>
<li>A → AB</li>
<li>A → ABD</li>
<li>A → ABCD</li>
<li>B → B</li>
<li>B → BC</li>
<li>A → D</li>
</ol>
</div>
<div class="section" id="section-8">
<h2>2.3&nbsp;&nbsp;&nbsp;مجموعه‌ی کاهش ناپذیر وابستگی‌ها</h2>
<p>در یک رابطه (جدول) به مجموعه‌ای از وابستگی‌های تابعی گفته می‌شود که کمینه باشد یا به عبارت دیگر هیچ کدام از قانون‌های وابستگی درون این مجموعه نتواند به شکلی از روی دیگر قانون‌ها به دست آید. مجموعه‌ای کاهش ناپذیر از وابستگی‌ها است اگر و فقط اگر سه قانون زیر را داشته باشد.</p>
<ul class="simple">
<li>سمت چپ (تعیین کننده) هر وابستگی تابعی کاهش ناپذیر باشد. یعنی اگر سمت چپ یکی از قانون‌های وابستگی را کاهش دادیم حتما مجموعه‌ی بستار به دست آمده از آن تغییر کند(نه اینکه بتواند از قانون‌های دیگر به دست آید). به عبارت دیگر همه‌ی وابستگی‌ها باید کاهش ناپذیر چپ باشند.</li>
<li>هیچ وابستگی تابعی نتواند بدون تغییر بستار از این مجموعه حذف شود.</li>
<li>سمت راست(وابسته) هر وابستگی تابعی فقط یک ویژگی داشته باشد.</li>
</ul>
</div>
</div>
<div class="section" id="section-9">
<h1>3&nbsp;&nbsp;&nbsp;نرمال سطح دوم</h1>
<p>اگر ویژگی‌هایی به بخشی از کلید اصلی وابسته باشند به آن <em>وابستگی جزئی</em> گفته می‌شود. جدولی در سطح دوم نرمال است که درون آن وابستگی جزئی وجود نداشته باشد. یعنی هیچ قانون وابستگی که سمت چپ آن (تعیین کننده) آن بخشی از کلید باشد در وابستگی‌های آن جدول وجود نداشته باشد. به عبارت دیگر بخشی از کلید در سمت چپ هیچ وابستگی تابعی نباشد.</p>
<p>اکنون به جدول اولیه‌ی فروش دقت کنید. در این جدول کلید دو ویژگی شماره فاکتور و شماره جنس است در حالی که وابستگی تابعی شماره جنس ⭠ {نام جنس ، موجودی} را داریم که در سمت چپ آن (تعیین کننده آن) فقط بخشی از کلید اصلی است. ویژگی یا ويژگی‌هایی از جدول به بخشی از کلید اصلی وابسته هستند و بنابراین باید جدا شوند.</p>
<p>برای به دست آوردن فرم نرمال دوم باید همه‌ی وابستگی‌های جزئی را به دست آوریم و از آنها جدول‌های جداگانه ایجاد کنیم. دقت کنید که وابستگی‌های جزئی که در آنها سمت چپ (تعیین کننده) یکسان است باید با هم ترکیب شوند.</p>
<p>در جدول مجموعه‌ی کاهش ناپذیر وابستگی‌های زیر را داریم</p>
<ul class="simple">
<li>شماره جنس   ⭠ نام جنس</li>
<li>شماره جنس   ⭠ موجودی</li>
<li>{شماره جنس ، شماره فاکتور} ⭠ میزان فروش</li>
</ul>
<p>با ترکیب قانون‌هایی که تعیین کننده‌ی یکسان دارند دو قانون زیر به دست می‌آید.</p>
<ul class="simple">
<li>شماره جنس ⭠ {نام جنس ، موجودی}</li>
<li>{شماره جنس ، شماره فاکتور} ⭠ میزان فروش</li>
</ul>
<p>بنابراین باید جدول یاد شده را به دو جدول بشکنیم تا وابستگی جزئی درون آن نباشد.</p>
</div>
<div class="section" id="section-10">
<h1>4&nbsp;&nbsp;&nbsp;نرمال سطح سوم</h1>
<table border="1" class="docutils">
<caption>جدول دانشجو</caption>
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شمارهٔ دانشجویی</a></th>
<th class="head">نام</th>
<th class="head">نام خانوادگی</th>
<th class="head">نام دبیرستان</th>
<th class="head">شهر دبیرستان</th>
<th class="head">کدپستی دبیرستان</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>۹۸۱۲۵۶۱</td>
<td>علی</td>
<td>رحیمی</td>
<td>امام صادق</td>
<td>شهرضا</td>
<td>۸۹۲۷۳۹۸۷۴</td>
</tr>
<tr><td>۹۸۱۲۵۶۲</td>
<td>کوروش</td>
<td>پارسایی</td>
<td>امام صادق</td>
<td>شهرضا</td>
<td>۸۹۲۷۳۹۸۷۴</td>
</tr>
<tr><td>۹۸۱۲۵۶۳</td>
<td>احمد</td>
<td>یوسفان</td>
<td>منتظری</td>
<td>نجف‌آباد</td>
<td>۷۶۷۶۵۶۷۸۷۴</td>
</tr>
<tr><td>۹۸۱۲۵۶۴</td>
<td>کامران</td>
<td>خداپرستی</td>
<td>امام صادق</td>
<td>شهرضا</td>
<td>۸۹۲۷۳۹۸۷۴</td>
</tr>
<tr><td>۹۸۱۲۵۶۵</td>
<td>رضا</td>
<td>حقیقی</td>
<td>امام صادق</td>
<td>شهرضا</td>
<td>۸۹۲۷۳۹۸۷۴</td>
</tr>
<tr><td>۹۸۱۲۵۶۶</td>
<td>محمدرضا</td>
<td>مغزی</td>
<td>منتظری</td>
<td>نجف‌آباد</td>
<td>۷۶۷۶۵۶۷۸۷۴</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>ناهنجاری حذف</li>
<li>ناهنجاری ویرایش</li>
<li>ناهنجاری افزودن</li>
</ul>
<p>کدپستی دبیرستان  ⭠ {نام دبیرستان، شهر دبیرستان}</p>
<div class="section" id="section-11">
<h2>4.1&nbsp;&nbsp;&nbsp;وابستگی باواسطه</h2>
<p><a class="reference external" href="#">شمارهٔ دانشجویی</a>, نام, نام خانوادگی, کدپستی دبیرستان</p>
<p><a class="reference external" href="#">کدپستی دبیرستان</a>, نام دبیرستان, شهر دبیرستان</p>
<table border="1" class="docutils">
<caption>جدول دانشجو</caption>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شمارهٔ دانشجویی</a></th>
<th class="head">نام</th>
<th class="head">نام خانوادگی</th>
<th class="head">کدپستی دبیرستان</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>۹۸۱۲۵۶۱</td>
<td>علی</td>
<td>رحیمی</td>
<td>۸۹۲۷۳۹۸۷۴</td>
</tr>
<tr><td>۹۸۱۲۵۶۲</td>
<td>کوروش</td>
<td>پارسایی</td>
<td>۸۹۲۷۳۹۸۷۴</td>
</tr>
<tr><td>۹۸۱۲۵۶۳</td>
<td>احمد</td>
<td>یوسفان</td>
<td>۷۶۷۶۵۶۷۸۷۴</td>
</tr>
<tr><td>۹۸۱۲۵۶۴</td>
<td>کامران</td>
<td>خداپرستی</td>
<td>۸۹۲۷۳۹۸۷۴</td>
</tr>
<tr><td>۹۸۱۲۵۶۵</td>
<td>رضا</td>
<td>حقیقی</td>
<td>۸۹۲۷۳۹۸۷۴</td>
</tr>
<tr><td>۹۸۱۲۵۶۶</td>
<td>محمدرضا</td>
<td>مغزی</td>
<td>۷۶۷۶۵۶۷۸۷۴</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<caption>جدول دبیرستان</caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">کدپستی دبیرستان</a></th>
<th class="head">نام دبیرستان</th>
<th class="head">شهر دبیرستان</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>۸۹۲۷۳۹۸۷۴</td>
<td>امام صادق</td>
<td>شهرضا</td>
</tr>
<tr><td>۷۶۷۶۵۶۷۸۷۴</td>
<td>منتظری</td>
<td>نجف‌آباد</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="section-12">
<h2>4.2&nbsp;&nbsp;&nbsp;استثناها</h2>
<table border="1" class="docutils">
<caption>جدول خریدار</caption>
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">نام خریدار</a></th>
<th class="head">کدپستی خریدار</th>
<th class="head">شهر</th>
<th class="head">خیابان</th>
<th class="head">کوچه</th>
<th class="head">پلاک</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Ali</td>
<td>558633</td>
<td>Kashan</td>
<td>Street1</td>
<td>alley1</td>
<td>23</td>
</tr>
<tr><td>Kamran</td>
<td>912133</td>
<td>Arsanjan</td>
<td>Street2</td>
<td>alley2</td>
<td>32</td>
</tr>
<tr><td>Hamid</td>
<td>234553</td>
<td>Kohdasht</td>
<td>Street3</td>
<td>alley3</td>
<td>21</td>
</tr>
<tr><td>Koroush</td>
<td>494833</td>
<td>Mamasani</td>
<td>Street4</td>
<td>alley3</td>
<td>20</td>
</tr>
<tr><td>Reza</td>
<td>232444</td>
<td>Kazeron</td>
<td>Street5</td>
<td>alley6</td>
<td>12</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<caption>جدول دانشجو</caption>
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شمارهٔ دانشجویی</a></th>
<th class="head">نام و نام خانوادگی</th>
<th class="head">شمارهٔ ملی</th>
<th class="head">نام پدر</th>
<th class="head">نام و نام خانوادگی مادر</th>
<th class="head">کدپستی</th>
<th class="head">شهر</th>
<th class="head">خیابان</th>
<th class="head">کوچه</th>
<th class="head">پلاک</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>۹۸۲۳۲۳</td>
<td>علی رضایی</td>
<td>۲۹۸۷۳۹۲۸۳</td>
<td>رضا</td>
<td>اختر صالحی</td>
<td>۷۶۸۷۹۸۷</td>
<td>کاشان</td>
<td>باباافضل</td>
<td>محمدی</td>
<td>۲۳</td>
</tr>
<tr><td>۹۷۲۳۸۲۳</td>
<td>کامران خداپرست</td>
<td>۳۹۸۴۵۰۹۳</td>
<td>بهرام</td>
<td>اختر شیرین</td>
<td>۹۰۴۸۴۲۰۹۳</td>
<td>زاهدان</td>
<td>رضایی</td>
<td>سعیدی</td>
<td>۳۴</td>
</tr>
<tr><td>۹۷۳۸۳۸۷</td>
<td>مهدی رضایی</td>
<td>۲۹۸۷۳۹۲۸۴</td>
<td>رضا</td>
<td>اختر صالحی</td>
<td>۷۶۸۷۹۸۷</td>
<td>کاشان</td>
<td>باباافضل</td>
<td>محمدی</td>
<td>۲۳</td>
</tr>
<tr><td>۹۸۲۳۷۴</td>
<td>حسین رضایی</td>
<td>۲۹۸۷۳۹۲۸۵</td>
<td>رضا</td>
<td>اختر صالحی</td>
<td>۷۶۸۷۹۸۷</td>
<td>کاشان</td>
<td>باباافضل</td>
<td>محمدی</td>
<td>۲۳</td>
</tr>
<tr><td>۹۶۰۹۸۳۴</td>
<td>زینب رضایی</td>
<td>۲۹۸۷۳۹۲۸۶</td>
<td>رضا</td>
<td>اختر صالحی</td>
<td>۷۶۸۷۹۸۷</td>
<td>کاشان</td>
<td>باباافضل</td>
<td>محمدی</td>
<td>۲۳</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="bcnf">
<h1>5&nbsp;&nbsp;&nbsp;نرمال BCNF</h1>
<p>۱. هر دانشجو ممکن است در چندین رشته تحصیل کند.</p>
<p>۲. برای هر رشته، یک دانشجو فقط یک استاد راهنما دارد</p>
<p>۳. در هر رشته چندین استاد راهنما وجود دارد</p>
<p>۴. هر استاد راهنما فقط در یک رشته راهنمایی می‌کند.</p>
<ul class="simple">
<li>استاد راهنما ⭠ رشته</li>
<li>{شماره دانشجویی و رشته } ⭠ استاد راهنما</li>
</ul>
<table border="1" class="docutils">
<caption>جدول راهنمایی</caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شماره دانشجویی</a></th>
<th class="head"><a class="reference external" href="#">رشته</a></th>
<th class="head">استاد راهنما</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>123</td>
<td>کامپیوتر</td>
<td>یوسفان</td>
</tr>
<tr><td>243</td>
<td>هنر</td>
<td>عرب بیگی</td>
</tr>
<tr><td>342</td>
<td>مکانیک</td>
<td>عباسیان</td>
</tr>
<tr><td>342</td>
<td>کامپیوتر</td>
<td>یوسفان</td>
</tr>
<tr><td>123</td>
<td>هنر</td>
<td>عرب بیگی</td>
</tr>
<tr><td>243</td>
<td>مکانیک</td>
<td>عباسیان</td>
</tr>
<tr><td>243</td>
<td>کامپیوتر</td>
<td>یوسفان</td>
</tr>
<tr><td>342</td>
<td>هنر</td>
<td>عرب بیگی</td>
</tr>
<tr><td>123</td>
<td>مکانیک</td>
<td>عباسیان</td>
</tr>
</tbody>
</table>
<p>یک مشکل مهم این جدول این است که در آن وابستگی مهم میان استاد راهنما و رشته نشان داده نشده است. روشن است که ساختار جدول‌ها بهتر است به گونه‌ای باشد که تا جایی که بشود بتواند شرایط واقعی را نشان دهد و وابستگی تابعی را نشان دهد.</p>
<p>شماره دانشجویی   و   استاد راهنما</p>
<table border="1" class="docutils">
<caption>جدول شماره دانشجویی - استاد راهنما</caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شماره دانشجویی</a></th>
<th class="head"><a class="reference external" href="#">استاد راهنما</a></th>
</tr>
</thead>
<tbody valign="top">
<tr><td>123</td>
<td>یوسفان</td>
</tr>
<tr><td>123</td>
<td>عرب بیگی</td>
</tr>
<tr><td>123</td>
<td>عباسیان</td>
</tr>
<tr><td>243</td>
<td>عرب بیگی</td>
</tr>
<tr><td>243</td>
<td>یوسفان</td>
</tr>
<tr><td>342</td>
<td>عباسیان</td>
</tr>
<tr><td>342</td>
<td>یوسفان</td>
</tr>
<tr><td>342</td>
<td>عرب بیگی</td>
</tr>
</tbody>
</table>
<p>رشته و استاد راهنما</p>
<table border="1" class="docutils">
<caption>جدول رشته - استاد راهنما</caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">استاد راهنما</a></th>
<th class="head">رشته</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>یوسفان</td>
<td>کامپیوتر</td>
</tr>
<tr><td>عرب بیگی</td>
<td>هنر</td>
</tr>
<tr><td>عباسیان</td>
<td>مکانیک</td>
</tr>
</tbody>
</table>
<div class="section" id="section-13">
<h2>5.1&nbsp;&nbsp;&nbsp;همهٔ وابستگی‌ها در جدول فقط به کلید اصلی باشد.</h2>
</div>
</div>
<div class="section" id="section-14">
<h1>6&nbsp;&nbsp;&nbsp;نرمال سطح چهارم</h1>
<table border="1" class="ltr docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr><td><div class="first last"><table border="1px" dir="ltr" style="margin: 2px; padding:2px;">
    <thead>
        <tr>
            <th>
                SSN
            </th>
            <th>
                Sport
            </th>
            <th>
                Book
            </th>
        </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          54467
        </td>
        <td>
          <table border="1px" style="margin: 2px; padding:2px;">
            <thead>
              <tr><th>Sport</th></tr>
            </thead>
            <tbody>
              <tr><td>Volleyball</td></tr>
              <tr><td>Basketball</td></tr>
            </tbody>
          </table>
        </td>
        <td>
          <table border="1px" style="margin: 2px; padding:2px;">
            <thead>
              <tr><th>Book</th></tr>
            </thead>
            <tbody>
              <tr><td>We</td></tr>
              <tr><td>Hafez</td></tr>
            </tbody>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          65231
        </td>
        <td>
          <table border="1px" style="margin: 2px; padding:2px;">
            <thead>
              <tr><th>Sport</th></tr>
            </thead>
            <tbody>
              <tr><td>Tennis    </td></tr>
              <tr><td>Basketball</td></tr>
            </tbody>
          </table>
        </td>
        <td>
          <table border="1px">
            <thead>
              <tr><th>Book</th></tr>
            </thead>
            <tbody>
              <tr><td>Pinocchio</td></tr>
              <tr><td>Animal Farm</td></tr>
              <tr><td>Hafez</td></tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
</table>
</div></td>
<td><table border="1" class="first last docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">SSN</a></th>
<th class="head"><a class="reference external" href="#">Sport</a></th>
<th class="head"><a class="reference external" href="#">Book</a></th>
</tr>
</thead>
<tbody valign="top">
<tr><td>54467</td>
<td>Volleyball</td>
<td>We</td>
</tr>
<tr><td>54467</td>
<td>Volleyball</td>
<td>Hafez</td>
</tr>
<tr><td>54467</td>
<td>Basketball</td>
<td>We</td>
</tr>
<tr><td>54467</td>
<td>Basketball</td>
<td>Hafez</td>
</tr>
<tr><td>65231</td>
<td>Tennis</td>
<td>Pinocchio</td>
</tr>
<tr><td>65231</td>
<td>Tennis</td>
<td>Animal Farm</td>
</tr>
<tr><td>65231</td>
<td>Tennis</td>
<td>Hafez</td>
</tr>
<tr><td>65231</td>
<td>Basketball</td>
<td>Pinocchio</td>
</tr>
<tr><td>65231</td>
<td>Basketball</td>
<td>Animal Farm</td>
</tr>
<tr><td>65231</td>
<td>Basketball</td>
<td>Hafez</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<div class="section" id="multivalued-dependency">
<h2>6.1&nbsp;&nbsp;&nbsp;multivalued dependency</h2>
<p>وابستگی چند مقداری</p>
<p class="ltr center">SSN →→ Book | Sport</p>
<!-- :

database course fourth normal form multivalued -->
<table border="1" class="ltr docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr><td><table border="1" class="first last docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">SSN</a></th>
<th class="head"><a class="reference external" href="#">Sport</a></th>
<th class="head"><a class="reference external" href="#">Book</a></th>
</tr>
</thead>
<tbody valign="top">
<tr><td>54467</td>
<td>Volleyball</td>
<td>We</td>
</tr>
<tr><td>54467</td>
<td>Volleyball</td>
<td>Hafez</td>
</tr>
<tr><td>54467</td>
<td>Basketball</td>
<td>We</td>
</tr>
<tr><td>54467</td>
<td>Basketball</td>
<td>Hafez</td>
</tr>
<tr><td>65231</td>
<td>Tennis</td>
<td>Pinocchio</td>
</tr>
<tr><td>65231</td>
<td>Tennis</td>
<td>Animal Farm</td>
</tr>
<tr><td>65231</td>
<td>Tennis</td>
<td>Hafez</td>
</tr>
<tr><td>65231</td>
<td>Basketball</td>
<td>Pinocchio</td>
</tr>
<tr><td>65231</td>
<td>Basketball</td>
<td>Animal Farm</td>
</tr>
<tr><td>65231</td>
<td>Basketball</td>
<td>Hafez</td>
</tr>
</tbody>
</table>
</td>
<td><table border="1" class="first docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">SSN</a></th>
<th class="head"><a class="reference external" href="#">Sport</a></th>
</tr>
</thead>
<tbody valign="top">
<tr><td>54467</td>
<td>Volleyball</td>
</tr>
<tr><td>54467</td>
<td>Basketball</td>
</tr>
<tr><td>65231</td>
<td>Tennis</td>
</tr>
<tr><td>65231</td>
<td>Basketball</td>
</tr>
</tbody>
</table>
<table border="1" class="last docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">SSN</a></th>
<th class="head"><a class="reference external" href="#">Book</a></th>
</tr>
</thead>
<tbody valign="top">
<tr><td>54467</td>
<td>We</td>
</tr>
<tr><td>54467</td>
<td>Hafez</td>
</tr>
<tr><td>65231</td>
<td>Pinocchio</td>
</tr>
<tr><td>65231</td>
<td>Animal Farm</td>
</tr>
<tr><td>65231</td>
<td>Hafez</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>جدولی را در نظر بگیرید که شمارهٔ ملی یک نفر را به همراه نام فرزندان و شماره تلفن‌های فرد نگهداری می‌کند. هر فرد می‌تواند چند شمارهٔ تلفن و چند فرزند داشته باشد.</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">SSN</a></th>
<th class="head"><a class="reference external" href="#">child</a></th>
<th class="head"><a class="reference external" href="#">phone</a></th>
</tr>
</thead>
<tbody valign="top">
<tr><td>54467</td>
<td>ali</td>
<td>90284902</td>
</tr>
<tr><td>54467</td>
<td>ali</td>
<td>82434893</td>
</tr>
<tr><td>54467</td>
<td>reza</td>
<td>90284902</td>
</tr>
<tr><td>54467</td>
<td>reza</td>
<td>82434893</td>
</tr>
<tr><td>65231</td>
<td>hamid</td>
<td>9284028</td>
</tr>
<tr><td>65231</td>
<td>hamid</td>
<td>9284026</td>
</tr>
<tr><td>65231</td>
<td>hamed</td>
<td>9284028</td>
</tr>
<tr><td>65231</td>
<td>hamed</td>
<td>9284026</td>
</tr>
<tr><td>65231</td>
<td>mahmood</td>
<td>9284028</td>
</tr>
<tr><td>65231</td>
<td>mahmood</td>
<td>9284026</td>
</tr>
</tbody>
</table>
<p>می‌تواند به دو جدول زیر شکسته شود.</p>
<table border="1" class="ltr docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr><td><table border="1" class="first last docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">SSN</a></th>
<th class="head"><a class="reference external" href="#">child</a></th>
</tr>
</thead>
<tbody valign="top">
<tr><td>54467</td>
<td>ali</td>
</tr>
<tr><td>54467</td>
<td>reza</td>
</tr>
<tr><td>65231</td>
<td>hamid</td>
</tr>
<tr><td>65231</td>
<td>hamed</td>
</tr>
<tr><td>65231</td>
<td>mahmood</td>
</tr>
</tbody>
</table>
</td>
<td><table border="1" class="first last docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">SSN</a></th>
<th class="head"><a class="reference external" href="#">child</a></th>
<th class="head"><a class="reference external" href="#">phone</a></th>
</tr>
</thead>
<tbody valign="top">
<tr><td>54467</td>
<td>90284902</td>
<td>&nbsp;</td>
</tr>
<tr><td>54467</td>
<td>82434893</td>
<td>&nbsp;</td>
</tr>
<tr><td>65231</td>
<td>9284028</td>
<td>&nbsp;</td>
</tr>
<tr><td>65231</td>
<td>9284026</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>فرض کنید در فروشگاهی امکان خرید گروهی نیز باشد یعنی یک گروه از خریداران با نام‌های گوناگون یک خرید را با هم انجام دهند و یک فاکتور برایشان صادر شود. برای نمونه اگر سه نفر از اعضا خانواده با هم برای خرید آمدند نام هر سه نفر در فاکتور خرید آورده شود در حالی که یک فاکتور برای جنس‌های درون آن زده شود. بنابراین قانون زیر نیز افزوده شود:</p>
<p><em>برای یک فاکتور یک یا چند قلم جنس و یک یا چند خریدار می‌تواند وجود داشته باشد.</em></p>
<p>با این فرض، جدول زیر برای فروش پیشنهاد شده است.</p>
<table border="1" class="docutils">
<caption>جدول فروش همراه خریدار</caption>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شماره جنس</a></th>
<th class="head"><a class="reference external" href="#">شماره فاکتور فروش</a></th>
<th class="head">میزان فروش</th>
<th class="head"><a class="reference external" href="#">نام خریدار</a></th>
</tr>
</thead>
<tbody valign="top">
<tr><td>1</td>
<td>1</td>
<td>12</td>
<td>Ali</td>
</tr>
<tr><td>1</td>
<td>4</td>
<td>14</td>
<td>Kamran</td>
</tr>
<tr><td>1</td>
<td>5</td>
<td>5</td>
<td>Hamid</td>
</tr>
<tr><td>2</td>
<td>2</td>
<td>10</td>
<td>Koroush</td>
</tr>
<tr><td>2</td>
<td>4</td>
<td>20</td>
<td>Kamran</td>
</tr>
<tr><td>2</td>
<td>5</td>
<td>30</td>
<td>Hamid</td>
</tr>
<tr><td>2</td>
<td>3</td>
<td>40</td>
<td>Reza</td>
</tr>
<tr><td>1</td>
<td>5</td>
<td>5</td>
<td>Shahin</td>
</tr>
<tr><td>2</td>
<td>5</td>
<td>30</td>
<td>Shahin</td>
</tr>
</tbody>
</table>
<p>میزان فروش فقط به شماره‌ی جنس و شماره‌ی فاکتور بستگی دارد بنابراین جدول در نرمال سطح دوم نیست پس به دو جدول زیر شکسته می‌شود.</p>
<table border="1" class="docutils">
<caption>جدول فروش</caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شماره جنس</a></th>
<th class="head"><a class="reference external" href="#">شماره فاکتور فروش</a></th>
<th class="head">میزان فروش</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>1</td>
<td>1</td>
<td>12</td>
</tr>
<tr><td>1</td>
<td>4</td>
<td>14</td>
</tr>
<tr><td>1</td>
<td>5</td>
<td>5</td>
</tr>
<tr><td>2</td>
<td>2</td>
<td>10</td>
</tr>
<tr><td>2</td>
<td>4</td>
<td>20</td>
</tr>
<tr><td>2</td>
<td>5</td>
<td>30</td>
</tr>
<tr><td>2</td>
<td>3</td>
<td>40</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<caption>جدول فروش همراه خریدار</caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شماره جنس</a></th>
<th class="head"><a class="reference external" href="#">شماره فاکتور فروش</a></th>
<th class="head"><a class="reference external" href="#">نام خریدار</a></th>
</tr>
</thead>
<tbody valign="top">
<tr><td>1</td>
<td>1</td>
<td>Ali</td>
</tr>
<tr><td>1</td>
<td>4</td>
<td>Kamran</td>
</tr>
<tr><td>1</td>
<td>5</td>
<td>Hamid</td>
</tr>
<tr><td>2</td>
<td>2</td>
<td>Koroush</td>
</tr>
<tr><td>2</td>
<td>4</td>
<td>Kamran</td>
</tr>
<tr><td>2</td>
<td>5</td>
<td>Hamid</td>
</tr>
<tr><td>2</td>
<td>3</td>
<td>Reza</td>
</tr>
<tr><td>1</td>
<td>5</td>
<td>Shahin</td>
</tr>
<tr><td>2</td>
<td>5</td>
<td>Shahin</td>
</tr>
</tbody>
</table>
<p>اکنون اگر این جدول را بدون توجه به دیگر جدول‌های نگاه کنیم روشن است که جدول خوبی نیست ولی تا نرمال BCNF مشکلی ندارد. روشن است که تکرار داده دارد در واقع نوعی گروه بندی یا عدم وابستگی میان آنها وجود دارد که باعث می‌شود بهتر ببینم به دو جدول زیر آن را بشکنیم بدون این که اطلاعاتی از دست برود.</p>
<table border="1" class="docutils">
<caption>جدول فروش: فاکتور - جنس</caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شماره جنس</a></th>
<th class="head"><a class="reference external" href="#">شماره فاکتور فروش</a></th>
</tr>
</thead>
<tbody valign="top">
<tr><td>1</td>
<td>1</td>
</tr>
<tr><td>1</td>
<td>4</td>
</tr>
<tr><td>1</td>
<td>5</td>
</tr>
<tr><td>2</td>
<td>2</td>
</tr>
<tr><td>2</td>
<td>4</td>
</tr>
<tr><td>2</td>
<td>5</td>
</tr>
<tr><td>2</td>
<td>3</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<caption>جدول فروش: فاکتور - خریدار</caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شماره فاکتور فروش</a></th>
<th class="head"><a class="reference external" href="#">نام خریدار</a></th>
</tr>
</thead>
<tbody valign="top">
<tr><td>1</td>
<td>Ali</td>
</tr>
<tr><td>4</td>
<td>Kamran</td>
</tr>
<tr><td>5</td>
<td>Hamid</td>
</tr>
<tr><td>2</td>
<td>Koroush</td>
</tr>
<tr><td>4</td>
<td>Kamran</td>
</tr>
<tr><td>5</td>
<td>Hamid</td>
</tr>
<tr><td>3</td>
<td>Reza</td>
</tr>
</tbody>
</table>
<p>مشخص است که با توجه به جدول فروش که از سه ستون شماره جنس، شماره فاکتور فروش و میزان فروش ساخته شده است دیگر نیازی به جدول فروش: فاکتور - جنس نیست و می‌تواند حذف شود و دو جدول زیر باقی بماند.</p>
<table border="1" class="docutils">
<caption>جدول فروش</caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شماره جنس</a></th>
<th class="head"><a class="reference external" href="#">شماره فاکتور فروش</a></th>
<th class="head">میزان فروش</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>1</td>
<td>1</td>
<td>12</td>
</tr>
<tr><td>1</td>
<td>4</td>
<td>14</td>
</tr>
<tr><td>1</td>
<td>5</td>
<td>5</td>
</tr>
<tr><td>2</td>
<td>2</td>
<td>10</td>
</tr>
<tr><td>2</td>
<td>4</td>
<td>20</td>
</tr>
<tr><td>2</td>
<td>5</td>
<td>30</td>
</tr>
<tr><td>2</td>
<td>3</td>
<td>40</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<caption>جدول فروش: فاکتور - خریدار</caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شماره فاکتور فروش</a></th>
<th class="head"><a class="reference external" href="#">نام خریدار</a></th>
</tr>
</thead>
<tbody valign="top">
<tr><td>1</td>
<td>Ali</td>
</tr>
<tr><td>4</td>
<td>Kamran</td>
</tr>
<tr><td>5</td>
<td>Hamid</td>
</tr>
<tr><td>2</td>
<td>Koroush</td>
</tr>
<tr><td>4</td>
<td>Kamran</td>
</tr>
<tr><td>5</td>
<td>Hamid</td>
</tr>
<tr><td>3</td>
<td>Reza</td>
</tr>
</tbody>
</table>
<p>چرا این دو جدول همه‌ی اطلاعات مربوط به جدول پیشین را در بردارد؟</p>
<p>مهم‌ترین نکته این است که خریداران گوناگون در یک فاکتور فروش نمی‌توانند جنس‌های گوناگونی داشته باشند و همه‌ی جنس‌هایشان تکراری است.</p>
</div>
</div>
<div class="section" id="section-15">
<h1>7&nbsp;&nbsp;&nbsp;نمونه نرمال سازی</h1>
<p>جدول فروش زیر را در نظر بگیرید:</p>
<table border="1" class="docutils">
<caption>جدول فروش همراه خریدار</caption>
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شماره جنس</a></th>
<th class="head"><a class="reference external" href="#">شماره فاکتور فروش</a></th>
<th class="head">میزان فروش</th>
<th class="head"><a class="reference external" href="#">نام خریدار</a></th>
<th class="head">نشانی خریدار</th>
<th class="head">دیگر اطلاعات خریدار</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>1</td>
<td>1</td>
<td>12</td>
<td>Ali</td>
<td>Street1</td>
<td>other</td>
</tr>
<tr><td>1</td>
<td>4</td>
<td>14</td>
<td>Kamran</td>
<td>street2</td>
<td>other</td>
</tr>
<tr><td>1</td>
<td>5</td>
<td>5</td>
<td>Hamid</td>
<td>street3</td>
<td>other</td>
</tr>
<tr><td>2</td>
<td>2</td>
<td>10</td>
<td>Koroush</td>
<td>street1</td>
<td>other</td>
</tr>
<tr><td>2</td>
<td>4</td>
<td>20</td>
<td>Kamran</td>
<td>street2</td>
<td>other</td>
</tr>
<tr><td>2</td>
<td>5</td>
<td>30</td>
<td>Hamid</td>
<td>street3</td>
<td>other</td>
</tr>
<tr><td>2</td>
<td>3</td>
<td>40</td>
<td>Reza</td>
<td>street2</td>
<td>other</td>
</tr>
</tbody>
</table>
<p>باز هم این جدول دلچسب نیست و مشکل دارد. اولین مشکل این است که نرمال دوم نیست زیرا نام خریدار فقط به شماره فاکتور وابسته است بنابراین دو جدول زیر به دست می‌آید.</p>
<table border="1" class="docutils">
<caption>جدول فروش یک فروشگاه</caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شماره جنس</a></th>
<th class="head"><a class="reference external" href="#">شماره فاکتور فروش</a></th>
<th class="head">میزان فروش</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>1</td>
<td>1</td>
<td>12</td>
</tr>
<tr><td>1</td>
<td>4</td>
<td>14</td>
</tr>
<tr><td>1</td>
<td>5</td>
<td>5</td>
</tr>
<tr><td>2</td>
<td>2</td>
<td>10</td>
</tr>
<tr><td>2</td>
<td>4</td>
<td>20</td>
</tr>
<tr><td>2</td>
<td>5</td>
<td>30</td>
</tr>
<tr><td>2</td>
<td>3</td>
<td>40</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<caption>جدول فاکتور - خریدار</caption>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شماره فاکتور فروش</a></th>
<th class="head"><a class="reference external" href="#">نام خریدار</a></th>
<th class="head">نشانی خریدار</th>
<th class="head">دیگر اطلاعات خریدار</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>1</td>
<td>Ali</td>
<td>Street1</td>
<td>other</td>
</tr>
<tr><td>4</td>
<td>Kamran</td>
<td>street2</td>
<td>other</td>
</tr>
<tr><td>5</td>
<td>Hamid</td>
<td>street3</td>
<td>other</td>
</tr>
<tr><td>2</td>
<td>Koroush</td>
<td>street1</td>
<td>other</td>
</tr>
<tr><td>4</td>
<td>Kamran</td>
<td>street2</td>
<td>other</td>
</tr>
<tr><td>5</td>
<td>Hamid</td>
<td>street3</td>
<td>other</td>
</tr>
<tr><td>3</td>
<td>Reza</td>
<td>street2</td>
<td>other</td>
</tr>
</tbody>
</table>
<p>باز هم این جدول مشکل دارد و به خوبی می‌توان این مشکلات را به ویژه زمانی که تعداد خریداران و فاکتورها افزایش یابد دید زیرا نشانی خریدار و دیگر اطلاعات خریدار بی‌جهت تکرار می‌شود. بنابراین جدول فاکتور-خریدار به دو جدول زیر شکسته می‌شود.</p>
<table border="1" class="docutils">
<caption>جدول فاکتور - خریدار</caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">شماره فاکتور فروش</a></th>
<th class="head"><a class="reference external" href="#">نام خریدار</a></th>
</tr>
</thead>
<tbody valign="top">
<tr><td>1</td>
<td>Ali</td>
</tr>
<tr><td>4</td>
<td>Kamran</td>
</tr>
<tr><td>5</td>
<td>Hamid</td>
</tr>
<tr><td>2</td>
<td>Koroush</td>
</tr>
<tr><td>4</td>
<td>Kamran</td>
</tr>
<tr><td>5</td>
<td>Hamid</td>
</tr>
<tr><td>3</td>
<td>Reza</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<caption>جدول خریدار</caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><a class="reference external" href="#">نام خریدار</a></th>
<th class="head">نشانی خریدار</th>
<th class="head">دیگر اطلاعات خریدار</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Ali</td>
<td>Street1</td>
<td>other</td>
</tr>
<tr><td>Kamran</td>
<td>street2</td>
<td>other</td>
</tr>
<tr><td>Hamid</td>
<td>street3</td>
<td>otherخ</td>
</tr>
<tr><td>Koroush</td>
<td>street1</td>
<td>other</td>
</tr>
<tr><td>Kamran</td>
<td>street2</td>
<td>other</td>
</tr>
<tr><td>Hamid</td>
<td>street3</td>
<td>other</td>
</tr>
<tr><td>Reza</td>
<td>street2</td>
<td>other</td>
</tr>
</tbody>
</table>
<p>حفظ وابستگی‌ها و کنار هم گذاشتن ویژگی‌هایی که به هم وابسته هستند، اهمیت بالایی دارد.</p>
<!-- comments:

 rst2html4.py normalization.rst normalization.html - -stylesheet=farsi.css,html4css1.css
 rst2html5 normalization.rst normalization.html - -stylesheet=farsi.css
 rst2html normalization.rst normalization.html - -stylesheet=farsi.css


 Database normalization (or normalisation) is the process of organizing the columns (attributes) and tables (relations) of a relational database to minimize data redundancy.
 https://en.wikipedia.org/wiki/Database_normalization

 rst2odt normalization.rst normalization.odt - -stylesheet=test1.odt

http://stackoverflow.com/questions/9084173/how-to-underline-text-in-restructuredtext#9092809 -->
</div>
</div>
</body>
</html>
